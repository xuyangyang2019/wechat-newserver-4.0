(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0d41":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABKCAYAAABzTVwZAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIQSURBVHgB7dy/SwJhHMfxrxX9QJoCg4Yih6DooiD6B2poaYggqD/QJvcGG1qjyYsCwYQEQckixKAgyucRBU3N1uf9ecHRdd72fXf33AUmvltMsCZM0BQAnAKAUwBwCgBOAcApADgFAKcA4BQAnAKAUwBwCgBOAcApADgFAKcA4BQAnAKAUwBwCgBOAcApADgFAKcA4BQAnAKAUwBwUxa4TOZi7HOTyaQdHOz7nxTBB+AcHZ9a4/1r5Dn1SsFKpUfL5a5QESACcMOv1D9GnjPT2lZX036fFAFyDbC7Nu+3QaJo09LptI+g2Wxa6FABLC3M9Ay+P4JarWpxfOf3E4n2lSB0iFuAM+wvviOVSvX87m4HcRxb6DAB3BYaIz8vv821FgIrfUfDD0DvAUaIoshCh7kC/JdbLywtbFrodAUYoD38aSNAXgHy1azla9meY1uLJ7aVOukZvnsicI+FIcNdAQYNv3N8crbYHb57cUR4CkAFMGz4zuH6me0sb/t9N/xK/dMIMAH8NfzDjXO/f/lw4TcKxBqg+Ho9/vDvM93PZv1/CMKGCKB882x7dv7ruHvOjzbaizy34Htp3fK75z0ZQkJfFs2m9wBwCgBOAcApADgFAKcA4BQAnAKAUwBwCgBOAcApADgFAKcA4BQAnAKAUwBwCgBOAcApADgFAKcA4BQAnAKAUwBwCgBOAcApALgfcOV9OKPdo6wAAAAASUVORK5CYII="},"0e5c":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("d3b7");var n=a("bc3a"),i=n.create({timeout:1e4});function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.append("packageName","com.jubo.pc"),new Promise((function(t,a){i({url:"http://127.0.0.1:10089/fileUpload2020",method:"post",data:e}).then((function(e){t(e)})).catch((function(e){a(e)}))}))}i.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",i.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),i.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}))},2151:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-tabs",{on:{"tab-click":e.queryData},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"消息删除统计",name:"first"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入微信id",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.msgWechatId,callback:function(t){e.msgWechatId=t},expression:"msgWechatId"}}),a("el-input",{staticStyle:{width:"240px","margin-left":"10px"},attrs:{placeholder:"请输入好友id",clearable:"",maxlength:"50","show-word-limit":""},model:{value:e.msgFriendId,callback:function(t){e.msgFriendId=t},expression:"msgFriendId"}}),a("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请输入内容",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.msgContent,callback:function(t){e.msgContent=t},expression:"msgContent"}}),a("el-select",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{placeholder:"请选择消息类型",filterable:"",clearable:""},model:{value:e.contentType,callback:function(t){e.contentType=t},expression:"contentType"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{placeholder:"请选择发送类型",filterable:"",clearable:""},model:{value:e.sendFlag,callback:function(t){e.sendFlag=t},expression:"sendFlag"}},e._l(e.sendList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("搜索")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.msgData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"msgid",prop:"msgid",width:"100px"}}),a("el-table-column",{attrs:{label:"msgsvrid",prop:"msgsvrid",width:"180px"}}),a("el-table-column",{attrs:{label:"微信昵称",prop:"nickname"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("p",[e._v("微信昵称："+e._s(n.nickname))]),a("p",[e._v("微信id："+e._s(n.wechatid))])]}}])}),a("el-table-column",{attrs:{label:"好友昵称",prop:"friendnick"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("p",[e._v("好友昵称："+e._s(n.friendnick))]),a("p",[e._v("好友id："+e._s(n.friendid))])]}}])}),a("el-table-column",{attrs:{label:"内容",prop:"content"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(" "+e._s(e._f("timeFilter")(n.createTime))+" ")])]}}])}),a("el-table-column",{attrs:{label:"是发送的",prop:"issend",width:"100px"}})],1),a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticStyle:{background:"#f9fafc"},attrs:{total:e.total,page:e.page,limit:e.limit},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.limit=t},pagination:e.queryData}})],1),a("el-tab-pane",{attrs:{label:"会话删除统计",name:"second"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入微信id",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.convWechatId,callback:function(t){e.convWechatId=t},expression:"convWechatId"}}),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入会话id",clearable:"",maxlength:"50","show-word-limit":""},model:{value:e.convId,callback:function(t){e.convId=t},expression:"convId"}}),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入会话名称",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.convName,callback:function(t){e.convName=t},expression:"convName"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("搜索")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{data:e.convData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"id",prop:"id",width:"100px"}}),a("el-table-column",{attrs:{label:"微信id",prop:"wechatid"}}),a("el-table-column",{attrs:{label:"微信昵称",prop:"nickname"}}),a("el-table-column",{attrs:{label:"会话id",prop:"convid"}}),a("el-table-column",{attrs:{label:"会话昵称",prop:"convname"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-avatar",{attrs:{size:40,src:n.avatar}},[a("i",{staticClass:"fa fa-picture-o",attrs:{"aria-hidden":"true",title:"头像miss"}})]),a("p",{staticStyle:{"margin-left":"10px"},domProps:{textContent:e._s(n.convname)}})],1)]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(e._s(e._f("timeFilter")(n.createTime)))])]}}])})],1),a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total2>0,expression:"total2 > 0"}],staticStyle:{background:"#f9fafc"},attrs:{total:e.total2,page:e.page2,limit:e.limit2},on:{"update:page":function(t){e.page2=t},"update:limit":function(t){e.limit2=t},pagination:e.queryData}})],1)],1)],1)},i=[],l=a("5530"),o=a("2f62"),r=a("a97a"),s=a("333d"),c={name:"WarningNotice",components:{Pagination:s["a"]},data:function(){return{activeName:"first",loading:!0,msgData:[],msgWechatId:"",msgFriendId:"",msgContent:"",sendFlag:"",sendList:[{value:!0,label:"发送的"},{value:!1,label:"收到的"}],contentType:"",typeList:[{value:0,label:"未知内容"},{value:1,label:"文本内容"},{value:2,label:"图片消息"},{value:3,label:"语音消息"},{value:4,label:"视频消息"},{value:5,label:"系统消息"},{value:6,label:"链接消息"},{value:7,label:"扩展的链接消息"},{value:8,label:"文件发送"},{value:9,label:"名片"},{value:10,label:"位置信息"},{value:11,label:"红包"},{value:12,label:"转账"},{value:13,label:"小程序"},{value:14,label:"Emoji"},{value:15,label:"群管理消息"},{value:16,label:"领取红包消息"},{value:17,label:"群聊系统消息"},{value:18,label:"公众号文章"},{value:19,label:"语音通话"},{value:20,label:"视频通话"},{value:21,label:"服务通知"},{value:22,label:"引用通知"},{value:23,label:"接龙"},{value:24,label:"视频号消息"},{value:25,label:"群直播消息"},{value:26,label:"拍一拍"},{value:27,label:"分享音乐"},{value:28,label:"视频号直播"},{value:29,label:"客服号名片"},{value:30,label:"企业微信名片"},{value:99,label:"不支持的消息"}],page:1,limit:20,total:0,loading2:!1,convData:[],convWechatId:"",convId:"",convName:"",page2:1,limit2:20,total2:0}},computed:Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryDeletedMsg()},methods:{queryData:function(){"first"===this.activeName?this.queryDeletedMsg():this.queryDeletedConv()},queryDeletedMsg:function(){var e=this;this.loading=!0;var t=this.adminInfo.cid;this.msgData=[],Object(r["r"])(t,this.page,this.limit,this.msgWechatId,this.msgFriendId,this.contentType,this.msgContent,this.sendFlag).then((function(t){0===t.code&&(e.msgData=t.data.rows||[],e.total=t.data.records||0),e.loading=!1})).catch((function(e){console.log(e)}))},queryDeletedConv:function(){var e=this;this.loading2=!0;var t=this.adminInfo.cid;this.convData=[],Object(r["q"])(t,this.page2,this.limit2,this.convWechatId,this.convId,this.convName).then((function(t){console.log(t),0===t.code&&(e.convData=t.data.rows||[],e.total2=t.data.records||0),e.loading2=!1})).catch((function(e){console.log(e)}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,"a162e416",null);t["default"]=p.exports},2889:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u}));var n=a("1c1e");function i(e,t,a,i,l){return n["a"].post("/admin/device/pageList",{page:e,rows:t,isonline:a,wechatid:i,deviceid:l})}function l(e,t,a,i,l,o,r,s){var c={cid:e,page:t,rows:a,deviceid:i,wechatid:l,isonline:o,groupid:r,accountid:s};return n["a"].post("/user/device/pageList",c)}function o(e){return n["a"].post("/user/device/deletes",{ids:e})}function r(e,t,a,i,l,o,r,s){return n["a"].post("/user/device/add",{cid:e,deviceid:t,accountid:a,groupid:i,devnickname:l,brand:o,module:r,snumber:s})}function s(e,t,a,i,l,o,r,s,c){return n["a"].post("/user/device/update",{id:e,cid:t,deviceid:a,accountid:i,groupid:l,devnickname:o,brand:r,module:s,snumber:c})}function c(e,t){return n["a"].post("/user/device/group",{deviceids:e,groupid:t})}function u(e,t){return n["a"].post("/user/device/list",{cid:e,accountid:t})}},2953:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-page"},[n("el-header",{staticClass:"header-page",staticStyle:{"-webkit-app-region":"drag"},attrs:{height:"64px"}},[n("div",{staticClass:"logo-box"},[n("img",{staticClass:"logo-img",attrs:{src:a("9d64"),alt:""}})]),n("el-dropdown",{staticClass:"my-el-dropdown",staticStyle:{"-webkit-app-region":"no-drag"},on:{command:e.handleCommand}},[n("div",{staticClass:"el-dropdown-link"},[n("img",{staticClass:"user-avatar",attrs:{src:a("3b4e"),alt:""}}),n("span",{staticClass:"nick-name can-not-select",domProps:{textContent:e._s(e.adminInfo.nickname)}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},["web"===e.currentMode?n("el-dropdown-item",{attrs:{command:"toggleBig"}},[n("i",{staticClass:"el-icon-full-screen"}),e._v(" 切换大小 ")]):e._e(),n("el-dropdown-item",{attrs:{command:"modifyPwd"}},[n("i",{staticClass:"el-icon-edit"}),e._v(" 修改密码 ")]),n("el-dropdown-item",{attrs:{command:"logout"}},[n("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"}}),e._v(" 退出系统 ")])],1)],1),"electron"===e.currentMode?n("div",{staticClass:"menu",staticStyle:{"-webkit-app-region":"no-drag"}},[n("div",{staticClass:"icon-smaller",on:{click:function(t){return e.minimizeWindow()}}},[n("hr",{staticClass:"smaller"})]),n("div",{staticClass:"icon-bigger",on:{click:function(t){return e.maximizeWindow()}}},[n("div",{staticClass:"bigger"})]),n("div",{staticClass:"icon-close",on:{click:function(t){return e.hiddenWindow()}}},[n("div",{staticClass:"close"})])]):e._e(),n("el-dialog",{attrs:{title:"修改密码",visible:e.modifyPwdDialog},on:{"update:visible":function(t){e.modifyPwdDialog=t}}},[n("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"老密码","label-width":e.formLabelWidth,prop:"oldPwd",required:""}},[n("el-input",{attrs:{type:"password",autocomplete:"off",clearable:"","show-password":"",placeholder:"请输入老的密码",minlength:"6",maxlength:"30"},model:{value:e.form.oldPwd,callback:function(t){e.$set(e.form,"oldPwd",t)},expression:"form.oldPwd"}})],1),n("el-form-item",{attrs:{label:"新密码","label-width":e.formLabelWidth,prop:"newPwd",required:""}},[n("el-input",{attrs:{type:"password",autocomplete:"off",clearable:"",placeholder:"请输入新的密码","show-password":"",minlength:"6",maxlength:"30"},model:{value:e.form.newPwd,callback:function(t){e.$set(e.form,"newPwd",t)},expression:"form.newPwd"}})],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.modifyPwdDialog=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.modifyPwd}},[e._v("确 定")])],1)],1)],1),n("el-container",{staticClass:"el-container"},[n("ul",{staticClass:"navs-list scroll"},e._l(e.adminNavs,(function(t,a){return n("li",{key:a,staticClass:"aside-nav can-not-select",class:{"nav-chose":e.currentNav===t.navPath},on:{click:function(a){return e.setNav(t)}}},[n("i",{staticClass:"fa-lg",class:t.navIcon}),n("span",{domProps:{textContent:e._s(t.navName)}})])})),0),n("el-main",{staticClass:"main-page"},[n(e.currentNav,{tag:"component"})],1)],1)],1)},i=[],l=(a("d3b7"),a("5530")),o=a("2f62"),r=a("a97a"),s=function(){return Promise.resolve().then(a.bind(null,"5e5a"))},c=function(){return Promise.resolve().then(a.bind(null,"de45"))},u=function(){return Promise.resolve().then(a.bind(null,"4851"))},d=function(){return Promise.resolve().then(a.bind(null,"caf9"))},p=function(){return Promise.resolve().then(a.bind(null,"52ca"))},m=function(){return Promise.resolve().then(a.bind(null,"faec"))},h=function(){return Promise.resolve().then(a.bind(null,"c72e"))},f=function(){return Promise.resolve().then(a.bind(null,"6934"))},g=function(){return Promise.resolve().then(a.bind(null,"c290"))},b=function(){return Promise.resolve().then(a.bind(null,"51e9"))},v=function(){return Promise.resolve().then(a.bind(null,"7212"))},y=function(){return Promise.resolve().then(a.bind(null,"b21e"))},w=function(){return Promise.resolve().then(a.bind(null,"2de8"))},x=function(){return Promise.resolve().then(a.bind(null,"2151"))},S=function(){return Promise.resolve().then(a.bind(null,"e3ec"))},k={components:{accountManagement:s,commonReplies:c,commonTags:u,devicesManagement:d,versionControl:p,messageLog:m,mobilePhoneMonitor:h,customerManagement:g,sopTask:b,phonesManagementSuper:v,dataStatistics:f,moneyStatistics:y,autoTaskList:w,warningNotice:x,sensitiveWords:S},data:function(){var e=this,t=function(e,t,a){var n=/^[0-9a-z]{6,16}$/gi;n.test(t)?a():a(new Error("密码长度6-16位,必须是数字或字母!"))},a=function(t,a,n){var i=/^[0-9a-z]{6,16}$/gi;i.test(a)?(a===e.form.oldPwd&&n(new Error("新密码不能和老密码一样!")),n()):n(new Error("请输入新密码"))};return{modifyPwdDialog:!1,formLabelWidth:"80px",form:{oldPwd:"",newPwd:""},rules:{oldPwd:[{validator:t,trigger:"blur"}],newPwd:[{validator:a,trigger:"blur"}]},adminNavs:[{navName:"客服账号",navIcon:"el-icon-service",navPath:"accountManagement"},{navName:"设备管理",navIcon:"el-icon-mobile-phone",navPath:"devicesManagement"},{navName:"公共术语",navIcon:"el-icon-chat-line-square",navPath:"commonReplies"},{navName:"公共标签",navIcon:"el-icon-collection-tag",navPath:"commonTags"},{navName:"版本控制",navIcon:"el-icon-sunny",navPath:"versionControl"},{navName:"聊天记录",navIcon:"el-icon-s-order",navPath:"messageLog"},{navName:"手机监控",navIcon:"el-icon-aim",navPath:"mobilePhoneMonitor"},{navName:"SOP加好友",navIcon:"el-icon-phone-outline",navPath:"sopTask"},{navName:"数据统计",navIcon:"el-icon-s-data",navPath:"dataStatistics"},{navName:"定时任务",navIcon:"el-icon-s-flag",navPath:"autoTaskList"},{navName:"敏感监控",navIcon:"el-icon-warning-outline",navPath:"warningNotice"},{navName:"收帐统计",navIcon:"el-icon-document",navPath:"moneyStatistics"},{navName:"敏感词过滤",navIcon:"el-icon-bell",navPath:"sensitiveWords"}],currentNav:"accountManagement"}},computed:Object(l["a"])(Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo",currentMode:"currentMode"})),Object(o["b"])({superAdmin:"superAdmin"})),created:function(){this.superAdmin&&(this.adminNavs=[],this.adminNavs.push({navName:"客户账号列表",navIcon:"el-icon-s-custom",navPath:"customerManagement"}),this.adminNavs.push({navName:"手机设备状态",navIcon:"el-icon-mobile-phone",navPath:"phonesManagementSuper"}))},methods:{handleCommand:function(e){var t=this;switch(e){case"logout":this.$confirm("你将退出登录 ?","提示",{closeOnClickModal:!1,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$store.commit("SET_HTTP_TOKEN","")})).catch((function(){t.$message({type:"info",message:"已取消"})}));break;case"modifyPwd":this.modifyPwdDialog=!0;break;case"toggleBig":this.$store.commit("SET_BIG_SCREEN");break;default:this.$message("click on item "+e);break}},modifyPwd:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var a=e.adminInfo.id;Object(r["p"])(a,e.form.oldPwd,e.form.newPwd).then((function(t){0===t.code&&(e.modifyPwdDialog=!1,e.$message({type:"success",message:"修改密码成功!",duration:1e3}))}))}))},minimizeWindow:function(){this.$ipcRenderer.send("operations","min")},maximizeWindow:function(){this.$ipcRenderer.send("operations","max")},hiddenWindow:function(){this.$ipcRenderer.send("operations","hidden")},setNav:function(e){this.currentNav=e.navPath}}},_=k,D=(a("6a30"),a("2877")),C=Object(D["a"])(_,n,i,!1,null,"78600f1a",null);t["default"]=C.exports},"2de8":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"admin-wrap"},[n("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择任务类型"},model:{value:e.tasktype,callback:function(t){e.tasktype=t},expression:"tasktype"}},e._l(e.types,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("el-select",{staticStyle:{"margin-left":"10px"},attrs:{clearable:"",placeholder:"请选择任务状态"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.states,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("el-input",{staticStyle:{"margin-left":"10px",width:"200px"},attrs:{clearable:"",maxlength:"1000",placeholder:"输入备注"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}}),n("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("开始搜索")]),n("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff",border:"solid #ff9f00 1px"},attrs:{plain:""},on:{click:e.deleteTasks}},[e._v(" 批量删除 ")])],1),n("el-table",{attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),n("el-table-column",{attrs:{label:"账号信息",prop:"accountid"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("p",[e._v(" ID： "),n("span",{domProps:{textContent:e._s(a.accountid)}})]),n("p",[e._v(" 账号： "),n("span",{domProps:{textContent:e._s(a.account)}})]),n("p",[e._v(" 昵称： "),n("span",{domProps:{textContent:e._s(a.nickname)}})])]}}])}),n("el-table-column",{attrs:{prop:"remarks",label:"备注信息"}}),n("el-table-column",{attrs:{label:"任务类型",prop:"tasktype",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:e._s(e.tasktypeMap[t.row.tasktype])}})]}}])}),n("el-table-column",{attrs:{label:"当前状态",prop:"state",formatter:e.taskStateFormatter,width:"100px"}}),n("el-table-column",{attrs:{label:"时间",prop:"update_time"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("p",[e._v(" 执行时间： "),n("span",{domProps:{textContent:e._s(a.execute_time)}})]),a.update_time?n("p",[e._v(" 完成时间： "),n("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(a.update_time))}})]):e._e()]}}])}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1===a.state?n("el-button",{on:{click:function(t){return e.modifyState(a,-1)}}},[e._v("暂停")]):e._e(),-1===a.state?n("el-button",{on:{click:function(t){return e.modifyState(a,1)}}},[e._v("继续")]):e._e(),1===a.state||-1===a.state?n("el-button",{on:{click:function(t){return e.modifyState(a,2)}}},[e._v("取消")]):e._e(),n("el-button",{on:{click:function(t){return e.deleteTask(a)}}},[e._v("删除")]),n("el-button",{on:{click:function(t){return e.showTaskDetail(a)}}},[e._v("详情")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[100,200,400,800],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),n("el-dialog",{staticClass:"task-detail-admin",attrs:{"append-to-body":"",title:"任务详情",visible:e.taskDetailVisiable},on:{"update:visible":function(t){e.taskDetailVisiable=t}}},[n("div",{staticClass:"task-tip"},[e._v("任务id："+e._s(e.rowDetail.id))]),n("div",{staticClass:"task-tip"},[e._v("账号id："+e._s(e.rowDetail.accountid))]),e.rowDetail.wechatId?n("div",{staticClass:"task-tip"},[e._v("执行微信："+e._s(e.rowDetail.wechatId))]):e._e(),e.rowDetail.wechatList?n("div",[e._v("执行微信列表:"+e._s(e.rowDetail.wechatList))]):e._e(),2===e.rowDetail.tasktype?n("div",[n("p",{staticClass:"task-tip"},[e._v("朋友圈内容")]),n("div",{staticStyle:{"line-height":"22px",padding:"10px"},domProps:{textContent:e._s(e.rowDetail.content)}}),0===e.rowDetail.attachtype?n("div",[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("img",{staticStyle:{width:"30%","margin-right":"5px"},attrs:{src:e.rowDetail.attachtcontent[2]}}),n("span",[e._v("rowDetail.attachtcontent[1]")])])]):2===e.rowDetail.attachtype?n("div",{staticClass:"img-list"},e._l(e.rowDetail.attachtcontent,(function(e,t){return n("img",{key:t,staticClass:"img-item",attrs:{src:e}})})),0):3===e.rowDetail.attachtype?n("div",[n("video",{staticStyle:{width:"auto","max-height":"200px",padding:"5px"},attrs:{src:e.rowDetail.attachtcontent[0],type:"video/mp4",alt:"视频",controls:""}})]):e._e()]):6===e.rowDetail.tasktype?n("div",[n("p",{staticClass:"task-tip"},[e._v("批量加好友的号码列表")]),e._l(e.rowDetail.content,(function(t,a){return n("el-tag",{key:a,staticStyle:{margin:"5px"},attrs:{type:"info"},domProps:{textContent:e._s(t)}})}))],2):5===e.rowDetail.tasktype||1===e.rowDetail.tasktype?n("div",[n("p",{staticClass:"task-tip",domProps:{textContent:e._s(5===e.rowDetail.tasktype?"群发群消息":"群发消息")}}),n("div",{staticClass:"preview-box"},[n("div",{staticClass:"preview-list"},e._l(e.rowDetail.content,(function(t,i){return n("div",{key:i,staticClass:"preview-item"},[n("img",{staticStyle:{height:"28px","margin-right":"5px"},attrs:{src:a("bf90"),alt:""}}),"Text"===t.ContentType?n("p",{staticClass:"preview-item-bg",staticStyle:{"line-height":"30px"}},[e._v(" "+e._s(t.Content)+" ")]):e._e(),"Picture"===t.ContentType?n("img",{staticStyle:{"max-width":"100px","max-height":"100px"},attrs:{src:t.Content,alt:""}}):e._e(),"Link"===t.ContentType?n("div",{staticClass:"preview-item-bg preview-item-link"},[n("p",{staticClass:"ellipsis",staticStyle:{width:"160px","font-weight":"600","font-size":"14px","line-height":"30px"},domProps:{textContent:e._s(t.jContent.Title)}}),n("el-row",{attrs:{type:"flex",align:"middle",justify:"space-between"}},[n("p",{staticClass:"ellipsis-3",staticStyle:{"font-size":"12px"},domProps:{textContent:e._s(t.jContent.Des)}}),n("el-image",{staticStyle:{width:"60px","min-width":"60px",height:"60px"},attrs:{src:t.jContent.Thumb}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("img",{attrs:{src:a("30bc"),alt:""}})])])],1)],1):e._e(),"WeApp"===t.ContentType?n("div",{staticClass:"preview-item-bg",staticStyle:{width:"170px"}},[n("p",{staticClass:"ellipsis",staticStyle:{width:"160px","font-weight":"600","font-size":"14px","line-height":"30px"},domProps:{textContent:e._s(t.jContent.Source)}}),n("el-image",{staticStyle:{width:"160px","min-width":"160px"},attrs:{src:t.jContent.Thumb}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("img",{staticStyle:{"margin-left":"16px"},attrs:{src:a("0d41"),alt:""}})])]),n("el-row",{staticStyle:{height:"30px"},attrs:{type:"flex",align:"middle"}},[n("img",{staticStyle:{widht:"18px",height:"18px","margin-right":"5px","border-radius":"50%"},attrs:{src:t.jContent.Icon,alt:""}}),n("p",{staticStyle:{"font-size":"10px",color:"#a8a8a8"}},[e._v("小程序")])])],1):e._e()])})),0)])]):e._e(),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"medium"},on:{click:function(t){e.taskDetailVisiable=!1}}},[e._v("确 定")])],1)])],1)},i=[],l=(a("4de4"),a("a15b"),a("d81d"),a("4d63"),a("ac1f"),a("25f0"),a("1276"),a("b85c")),o=a("5530"),r=a("2f62"),s=a("3496"),c={name:"AutoTaskList",data:function(){return{remarks:"",multipleSelection:[],tableData:[],tasktypeMap:{1:"PC群发消息",2:"PC发朋友圈",5:"群发群消息",6:"批量加好友"},restypeMap:{Text:1,Picture:2,Voice:3,Video:4,Link:6,WeApp:13,1:"文本",2:"图片",3:"语音",4:"视频",6:"链接",13:"小程序"},types:[{value:1,label:"群发好友"},{value:5,label:"群发群"},{value:6,label:"批量加好友"},{value:2,label:"发朋友圈"}],states:[{value:0,label:"已完成"},{value:1,label:"开启中"},{value:2,label:"取消"},{value:-1,label:"暂停"}],pageNo:1,pageSize:100,tasktype:"",status:"",total:0,taskDetailVisiable:!1,rowDetail:{}}},computed:Object(o["a"])({},Object(r["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryData()},methods:{handleSelectionChange:function(e){this.multipleSelection=e},deleteTasks:function(){var e=this;this.$confirm("确认删除选中的任务么 ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.multipleSelection.map((function(e){return e.id})).join();Object(s["t"])(t).then((function(t){0===t.code?(e.$message.success("删除成功！"),e.queryData()):e.$alert(t.data,"删除失败",{type:"warning"})})).catch((function(t){e.$alert(t,"提示",{type:"error"})}))})).catch((function(){}))},taskStateFormatter:function(e){var t={"-1":"暂停",0:"已完成",1:"开启中",2:"取消"};return t[e.state]},queryData:function(){var e=this;Object(s["r"])(this.adminInfo.cid,"",this.pageNo,this.pageSize,this.tasktype,this.status).then((function(t){0===t.code&&(e.tableData=t.data.list||[],e.total=t.data.total||0)})).catch((function(e){console.log(e)}))},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryData())},handleCurrentChange:function(e){this.pageNo=e,this.queryData()},showTaskDetail:function(e){var t=e.id,a=e.accountid,n=e.wechatId,i=e.wechatList,l=e.tasktype,o=e.remark2,r=e.content,s=new RegExp(/^{.+}$/),c={};if(2===l){s.test(o)&&(c=JSON.parse(o));var u=c,d=u.attachtype,p=u.attachtcontent;this.rowDetail={id:t,accountid:a,tasktype:l,wechatId:n,wechatList:i,content:r,attachtype:d||1,attachtcontent:p?p.split(","):[]}}else this.rowDetail=6===l?{id:t,accountid:a,tasktype:l,wechatId:n,wechatList:i,content:r?r.split(","):[]}:1===l||5===l?{id:t,accountid:a,tasktype:l,wechatId:n,wechatList:i,content:r?JSON.parse(r):[]}:e;this.taskDetailVisiable=!0},modifyState:function(e,t){var a=this;Object(s["v"])(e.id,t).then((function(n){if(0===n.code){var i,o=Object(l["a"])(a.tableData);try{for(o.s();!(i=o.n()).done;){var r=i.value;if(r.id===e.id){r.state=t;break}}}catch(s){o.e(s)}finally{o.f()}}}))},deleteTask:function(e){var t=this;Object(s["t"])(e.id).then((function(a){0===a.code&&(t.$message.success("删除成功！"),t.tableData=t.tableData.filter((function(t){return t.id!==e.id})))}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,"6064ee2b",null);t["default"]=p.exports},"30bc":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJoSURBVHgB7ZpPaxNBGId/0XbD/oPawkZCSmlAVDA95+JecvMmvfgh/Bx+lPTUe+9echCRbFAomFBcAololEjqJpW676SVht2mrnknxOk8MMwwM0t4MrMz8w6bO4/BLeIObhlaWHW0sOpoYdXRwqqjhVVHC6uOFlYdLaw6a2CiXj/AopRKJfj+U8iETZgoFDx4XgFZ6fd76PX6CMMQjUYD1WoVsmAVJtmN+w8w+vkr23NxImHHsdFud0SdLGlWYYJkh6fZhPMX+e5uWeRBEIhchjS7cBqueReuNf2p4ehs7h9SqTwRuSzp5QjHssUtQ5S7cbppBsiUlir8cNsSo3sVEqf05niY6E+L14WjQMY7LUW4uDV9K/Pr2bZ5WrgopdVzIUnYyNTf87x4GldS22irGo/H4EKKcNp0ncen72Y8HXYS9ZPxKQaDALZtg4v/4mhpGOvgYuWFaeHyfR9crLSwmTdQq9VYp/RS9uF/wYhX+EfbDoy1HDhZyRGeylrsssTSRrjZO0Szf5jatlfYx563L8oyZYmljPA82avt18l2Oh1wIV34JtlLwh+vUS6eJ2SDoIVmMwAXUoX/VnbT9vDSfwUn78zUn3S//QkguJAmnFV205q9Kel+idD9ynekvETKorWo7NGHAyH8eOMZuGEXJtFFZY/e10V5Eo3g4h44YRWmyCY6i1CezI9dbcfBc/9FQvZd6y2OW22UMX0++jyAmXPACZswHf8ojHPjKznX9K7tZxiGuIq1rdnjIgX6Jx9D7JjJMJHO01zk9Jd4iqOFVUcLq44WVh0trDpaWHW0sOpoYdXRwqrzG5kPz20AMo0bAAAAAElFTkSuQmCC"},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var n=r(),i=e-n,s=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=s;var r=Math.easeInOutQuad(c,n,i,t);o(r),c<t?l(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,d=(a("9235"),a("2877")),p=Object(d["a"])(u,n,i,!1,null,"3e1a4b02",null);t["a"]=p.exports},"3bc1":function(e,t,a){"use strict";var n=a("824a"),i=a.n(n);i.a},4851:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticClass:"device-wechat-id",staticStyle:{width:"220px"},attrs:{placeholder:"请输入标签名",clearable:"",minlength:"1",maxlength:"30","show-word-limit":""},model:{value:e.tagName,callback:function(t){e.tagName=t},expression:"tagName"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.showDialog}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"标签名","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff"},attrs:{size:"mini",type:"warning"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(" 删除 ")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[20,40,60,80],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"admin-base-dialog",attrs:{"append-to-body":"",title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"标签名","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入标签名",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateOrAddDevice}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a("b0c0"),a("5530")),o=a("2f62"),r=a("a97a"),s={name:"CommonTags",data:function(){return{tableData:[],tagName:"",pageNo:1,pageSize:20,total:0,dialogTitle:"添加标签",dialogVisible:!1,formLabelWidth:"120px",form:{id:"",cid:"",name:""},rules:{name:[{required:!0,message:"请输入标签名",trigger:"blur"}]}}},computed:Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryData()},methods:{queryData:function(){var e=this;this.tableData=[],Object(r["y"])(this.adminInfo.cid,this.tagName,this.pageNo,this.pageSize).then((function(t){0===t.code&&(e.tableData=t.data.rows||[],e.total=t.data.records||0)}))},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryData())},handleCurrentChange:function(e){this.pageNo=e,this.queryData()},showDialog:function(){this.resetForm(),this.dialogTitle="添加标签",this.dialogVisible=!0},updateOrAddDevice:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var a=e.form,n=a.id,i=a.name,l=e.adminInfo.cid;"添加标签"===e.dialogTitle?Object(r["b"])(l,i).then((function(t){0===t.code&&(e.queryData(),e.dialogVisible=!1,e.$message({type:"success",message:"添加成功!",duration:1e3}))})):Object(r["K"])(n,l,i).then((function(t){0===t.code&&(e.dialogVisible=!1,e.queryData(),e.$message({type:"success",message:"更新成功",duration:1e3}))}))}))},resetForm:function(){this.form={id:"",cid:"",name:""}},handleEdit:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(this.form[a]="state"===a?1===t[a]:t[a]);this.dialogTitle="编辑标签",this.dialogVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("是否删除设备？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["i"])(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total-1)/a.pageSize);a.pageNo>t&&(a.pageNo=t),a.queryData(),a.$message({type:"success",message:"删除成功!",duration:1e3})}}))})).catch((function(){a.$message({type:"info",message:"取消",duration:1e3})}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,"78af064a",null);t["default"]=d.exports},"51e9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"号码列表",name:"first"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入手机号码",clearable:"",minlength:"6",maxlength:"30","show-word-limit":""},model:{value:e.phoneNum,callback:function(t){e.phoneNum=t},expression:"phoneNum"}}),a("el-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{placeholder:"使用状态",filterable:"",clearable:""},model:{value:e.phoneState,callback:function(t){e.phoneState=t},expression:"phoneState"}},e._l(e.onlineState,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")]),a("el-divider",{attrs:{direction:"vertical"}}),a("label",{staticClass:"chose-number",attrs:{for:"chosePhoneText"}},[e._v("导入号码")]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"chosePhoneText",type:"file",accept:"text/plain"},on:{change:function(t){return e.openFile(t)}}}),0===e.phonesList.length?a("p",{staticStyle:{color:"#999999","font-size":"12px"}},[a("a",{staticClass:"a_download",attrs:{target:"_blank",href:"http://www.jjldkj.com/files/weixin/phones.txt",download:""}},[e._v(" 下载模板 ")])]):e._e(),e.phonesList.length>0?[a("span",[e._v("共"+e._s(e.phonesList.length)+"个号码")]),a("el-button",{attrs:{type:"primary"},on:{click:e.uploadPhoneList}},[e._v("上传号码")])]:e._e()],2),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"phonenumber",label:"手机号码","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",[e._v(e._s(e._f("timeFilter")(n.createTime)))])]}}])}),a("el-table-column",{attrs:{label:"是否使用","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.state?a("span",{staticStyle:{color:"#67c23a"},domProps:{textContent:e._s("已使用")}}):a("span",{staticStyle:{color:"#f56c6c"},domProps:{textContent:e._s("未使用")}})]}}])}),a("el-table-column",{attrs:{prop:"task_result",label:"执行结果","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticStyle:{"margin-top":"10px"},attrs:{total:e.total,page:e.page,limit:e.limit},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.limit=t},pagination:e.queryData}})],1),a("el-tab-pane",{attrs:{label:"创建任务",name:"second"}},[a("el-form",{ref:"sopFormRef",staticStyle:{"margin-top":"10px"},attrs:{model:e.sopForm,rules:e.sopRules,"status-icon":""}},[a("el-form-item",{attrs:{label:"微信","label-width":e.formLabelWidth,prop:"wechatsList"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{disabled:e.allWechatFlag,multiple:"",placeholder:"请选择微信"},model:{value:e.sopForm.wechatsList,callback:function(t){e.$set(e.sopForm,"wechatsList",t)},expression:"sopForm.wechatsList"}},e._l(e.wechats,(function(t){return a("el-option",{key:t.wechatid,attrs:{label:t.wechatnick||t.wechatno,value:t.wechatid}},[a("el-avatar",{staticStyle:{float:"left"},attrs:{src:t.avatar,size:30}}),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.wechatnick))])],1)})),1),a("el-checkbox",{staticStyle:{"margin-left":"10px"},model:{value:e.allWechatFlag,callback:function(t){e.allWechatFlag=t},expression:"allWechatFlag"}},[e._v("全选")])],1),a("el-form-item",{attrs:{label:"添加数量","label-width":e.formLabelWidth,prop:"config"}},[a("el-input-number",{attrs:{min:1,max:30},model:{value:e.sopForm.config,callback:function(t){e.$set(e.sopForm,"config",t)},expression:"sopForm.config"}})],1),a("el-form-item",{attrs:{label:"间隔时间","label-width":e.formLabelWidth,prop:"between_time"}},[a("el-input-number",{attrs:{min:1,max:36e3},model:{value:e.sopForm.between_time,callback:function(t){e.$set(e.sopForm,"between_time",t)},expression:"sopForm.between_time"}})],1),a("el-form-item",{attrs:{label:"执行时间","label-width":e.formLabelWidth,prop:"execute_time"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",clearable:""},model:{value:e.sopForm.execute_time,callback:function(t){e.$set(e.sopForm,"execute_time",t)},expression:"sopForm.execute_time"}})],1),a("el-form-item",{attrs:{label:"验证消息","label-width":e.formLabelWidth,prop:"message"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:"100",placeholder:"请输入验证消息"},model:{value:e.sopForm.message,callback:function(t){e.$set(e.sopForm,"message","string"===typeof t?t.trim():t)},expression:"sopForm.message"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remarks"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{maxlength:"100",placeholder:"请输入备注"},model:{value:e.sopForm.remarks,callback:function(t){e.$set(e.sopForm,"remarks","string"===typeof t?t.trim():t)},expression:"sopForm.remarks"}})],1),a("el-form-item",{attrs:{align:"left"}},[a("el-button",{on:{click:function(t){return e.submitForm("sopFormRef")}}},[e._v("创建任务")]),a("el-button",{on:{click:function(t){return e.resetForm("sopFormRef")}}},[e._v("重置")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"任务列表",name:"third"}},[a("el-table",{staticStyle:{"margi-top":"10px"},attrs:{data:e.logs,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"ID",prop:"id",width:"100px"}}),a("el-table-column",{attrs:{label:"微信信息",prop:"wechatid",width:"230px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v("ID："+e._s(n.wechatid))]),a("div",[e._v("昵称："+e._s(n.wechatnick))]),a("div",[e._v("微信号："+e._s(n.wechatno))])]}}])}),a("el-table-column",{attrs:{label:"附加消息",prop:"remarks"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v("验证："+e._s(n.message))]),a("div",[e._v("备注："+e._s(n.remarks))])]}}])}),a("el-table-column",{attrs:{label:"间隔",prop:"between_time",width:"100px"}}),a("el-table-column",{attrs:{label:"执行进度"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(" 总次数： "+e._s(n.totalsize)+" ")]),a("div",[e._v(" 已执行： "+e._s(n.doingsize)+" ")]),a("div",[e._v(" 成功次数： "+e._s(n.successsize)+" ")])]}}])}),a("el-table-column",{attrs:{label:"任务状态"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[-1===n.state?a("span",[e._v("暂停")]):0===n.state?a("span",[e._v("已完成")]):1===n.state?a("span",[e._v("开启中")]):2===n.state?a("span",[e._v("取消")]):a("span",[e._v(e._s(n.state))])]}}])}),a("el-table-column",{attrs:{prop:"execute_time",label:"时间",width:"230px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v("创建："+e._s(e._f("timeFilter")(n.createTime)))]),a("div",[e._v("执行："+e._s(n.execute_time))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.state?a("el-button",{on:{click:function(t){return e.modifyState(n,-1)}}},[e._v("暂停")]):e._e(),-1===n.state?a("el-button",{on:{click:function(t){return e.modifyState(n,1)}}},[e._v("继续")]):e._e(),1===n.state||-1===n.state?a("el-button",{on:{click:function(t){return e.modifyState(n,2)}}},[e._v("取消")]):e._e(),a("el-button",{on:{click:function(t){return e.deleteTask(n)}}},[e._v("删除")])]}}])})],1),a("Pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],staticStyle:{"margin-top":"10px"},attrs:{total:e.total,page:e.page,limit:e.limit},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.limit=t},pagination:e.queryLogs}})],1)],1)],1)},i=[],l=(a("4de4"),a("a434"),a("ac1f"),a("1276"),a("b85c")),o=a("5530"),r=a("2f62"),s=a("333d"),c=a("a97a"),u=a("3496"),d=a("2889"),p={name:"SopTask",components:{Pagination:s["a"]},data:function(){return{activeName:"first",tableData:[],phoneState:"",phoneNum:"",onlineState:[{id:"isonline0",value:0,label:"已使用"},{id:"isonline1",value:1,label:"未使用"}],phonesList:[],formLabelWidth:"100px",sopForm:{wechatsList:[],config:20,execute_time:"",between_time:60,message:"",remarks:""},sopRules:{execute_time:[{required:!0,message:"执行时间不能为空",trigger:"blur"}],between_time:[{required:!0,message:"添加间隔不能为空",trigger:"blur"}],config:[{required:!0,message:"添加数量不能为空",trigger:"blur"}]},allWechatFlag:!1,wechats:[],logs:[],page:1,limit:20,total:0}},computed:Object(o["a"])({},Object(r["d"])({adminInfo:"adminInfo"})),watch:{activeName:function(e){this.page=1,this.limit=20,this.total=0,"first"===e?this.queryData():"third"===e&&this.queryLogs()}},mounted:function(){this.queryData(),this.queryDevices()},methods:{queryDevices:function(){var e=this;Object(d["c"])(this.adminInfo.cid,"").then((function(t){0===t.code&&t.data&&(e.wechats=t.data.filter((function(e){return e.wechatid})))}))},queryData:function(){var e=this;Object(c["D"])(this.adminInfo.cid,this.phoneState,this.phoneNum,this.page,this.limit).then((function(t){0===t.code&&(e.tableData=t.data.rows,e.total=t.data.records||0)}))},openFile:function(e){var t=this,a=e.target.files[0],n=new FileReader;a?(n.readAsText(a),n.onload=function(e){var a=e.target.result;t.phonesList=a.split(/\r\n|\n/)}):this.phones=[]},uploadPhoneList:function(){var e=this;0!==this.phonesList.length?this.$confirm("确认上传号码?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["d"])(e.adminInfo.cid,e.phonesList).then((function(t){0===t.code&&e.$message({type:"success",message:"号码上传成功！",duration:1e3}),e.phonesList=[],e.queryData()}))})).catch((function(){})):this.$alert("号码不能为空！","提示",{type:"warning"})},handleEdit:function(e,t){var a=this;this.$prompt("请输入号码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入新号码",inputValue:t.phonenumber,inputPattern:/^[0-9a-zA-Z_]{6,20}$/,inputErrorMessage:"号码格式不正确"}).then((function(e){var n=e.value;Object(c["t"])(t.id,n,t.state).then((function(e){0===e.code&&a.queryData()}))})).catch((function(){}))},handleDelete:function(e,t){var a=this;this.$confirm("确认删除手机号码？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["l"])(t.id).then((function(t){if(0===t.code){a.tableData.splice(e,1),a.total=a.total-1;var n=Math.ceil(a.total/a.limit);a.page>n&&(a.page=n)}}))})).catch((function(){}))},queryLogs:function(){var e=this;Object(u["l"])(this.adminInfo.cid,"","",this.page,this.limit).then((function(t){var a=t.data.list;0===t.code&&(e.logs=a.list||[],e.total=a.total||0)}))},deleteTask:function(e){var t=this;this.$confirm("确认删除该任务?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["j"])(e.id).then((function(a){0===a.code&&(t.$message.success("删除成功！",a),t.logs=t.logs.filter((function(t){return t.id!==e.id})),t.total=t.total-1)}))})).catch((function(){}))},modifyState:function(e,t){var a=this;Object(u["k"])(e.id,t).then((function(n){if(0===n.code){var i,o=Object(l["a"])(a.logs);try{for(o.s();!(i=o.n()).done;){var r=i.value;if(r.id===e.id){r.state=t,a.$forceUpdate();break}}}catch(s){o.e(s)}finally{o.f()}}}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.sureSend()}))},resetForm:function(e){this.$refs[e].resetFields()},transformTime:function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",i=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",l=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",o=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),r=a+n+i+l+o;return r},sureSend:function(){var e=this,t=this.sopForm,a=t.remarks,n=t.message,i=t.config,o=t.between_time,r=t.execute_time,s=t.wechatsList,c=[];if(this.allWechatFlag){var d,p=Object(l["a"])(this.wechats);try{for(p.s();!(d=p.n()).done;){var m=d.value;c.push({wechatid:m.wechatid,add_count:i})}}catch(b){p.e(b)}finally{p.f()}}else{var h,f=Object(l["a"])(s);try{for(f.s();!(h=f.n()).done;){var g=h.value;c.push({wechatid:g,add_count:i})}}catch(b){f.e(b)}finally{f.f()}}0!==c.length?Object(u["e"])(this.adminInfo.cid,"",this.transformTime(r),o,c,"",n,a).then((function(t){0===t.code?e.$message({type:"success",message:"创建自动加好友任务成功！",duration:1e3}):e.$message({type:"error",message:"创建自动加好友任务失败！",duration:1e3}),e.resetForm("sopFormRef")})).catch((function(t){e.$message.error(t.message)})):this.$alert("请选择执行的微信","提示")}}},m=p,h=(a("3bc1"),a("2877")),f=Object(h["a"])(m,n,i,!1,null,"d2480d0a",null);t["default"]=f.exports},"52ca":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入版本名",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}}),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入版本号",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.vernumber,callback:function(t){e.vernumber=t},expression:"vernumber"}}),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"是否推送",filterable:"",clearable:""},model:{value:e.flag,callback:function(t){e.flag=t},expression:"flag"}},e._l(e.flagStates,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.showDialog}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"version",label:"版本名称","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"vernumber",label:"版本号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"packagename",label:"包名","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"flag",label:"是否推送升级","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(0===t.row.flag?"已推送":"未推送")}})]}}])}),a("el-table-column",{attrs:{prop:"packageurl",label:"软件包地址","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.packageurl},domProps:{textContent:e._s(t.row.packageurl)}})]}}])}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300px","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),a("el-button",{on:{click:function(a){return e.pushVersionId(t.row)}}},[e._v("推送更新")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[20,40,60,80],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"admin-base-dialog",attrs:{"append-to-body":"",title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"版本名称","label-width":e.formLabelWidth,prop:"version"}},[a("el-input",{attrs:{placeholder:"请输入版本名称",clearable:"",maxlength:"50","show-word-limit":"",autocomplete:"off"},model:{value:e.form.version,callback:function(t){e.$set(e.form,"version",t)},expression:"form.version"}})],1),a("el-form-item",{attrs:{label:"版本号","label-width":e.formLabelWidth,prop:"vernumber"}},[a("el-input",{attrs:{placeholder:"请输入版本号",clearable:"",maxlength:"50","show-word-limit":"",autocomplete:"off"},model:{value:e.form.vernumber,callback:function(t){e.$set(e.form,"vernumber",t)},expression:"form.vernumber"}})],1),a("el-form-item",{attrs:{label:"APP包名","label-width":e.formLabelWidth,prop:"packagename"}},[a("el-input",{attrs:{placeholder:"请输入APP包名",clearable:"",maxlength:"50","show-word-limit":"",autocomplete:"off"},model:{value:e.form.packagename,callback:function(t){e.$set(e.form,"packagename",t)},expression:"form.packagename"}})],1),a("el-form-item",{attrs:{label:"填写内容","label-width":e.formLabelWidth,prop:"packageurl"}},[a("el-input",{attrs:{placeholder:"请输入url",clearable:"",maxlength:"200","show-word-limit":"",autocomplete:"off"},model:{value:e.form.packageurl,callback:function(t){e.$set(e.form,"packageurl",t)},expression:"form.packageurl"}})],1),a("el-upload",{ref:"elUpload",staticClass:"upload-demo",staticStyle:{"margin-left":"38px"},attrs:{drag:"",multiple:!1,accept:".apk",action:e.actionUrl,data:e.upData,"before-upload":e.beforeUpload,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或 "),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传apk文件，且不超过10M")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateOrAddDevice}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a("b0c0"),a("ac1f"),a("5319"),a("5530")),o=a("2f62"),r=a("a97a"),s={name:"VersionControl",data:function(){return{tableData:[],upData:{myfile:"",packageName:"pc"},version:"",vernumber:"",packagename:"",flag:"",flagStates:[{id:"flagState0",value:0,label:"已推送"},{id:"flagState1",value:1,label:"未推送"}],pageNo:1,pageSize:20,total:0,dialogTitle:"添加版本",dialogVisible:!1,formLabelWidth:"120px",form:{cid:"",version:"",vernumber:"",packagename:"",packageurl:""},rules:{version:[{required:!0,message:"请输入版本名称",trigger:"blur"}],vernumber:[{required:!0,message:"请输入版本号",trigger:"blur"}],packagename:[{required:!0,message:"请输入app包名",trigger:"blur"}],packageurl:[{required:!0,message:"请输入url",trigger:"blur"}]}}},computed:Object(l["a"])(Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),Object(o["b"])({actionUrl:"actionUrl"})),mounted:function(){this.queryData()},methods:{queryData:function(){var e=this;this.tableData=[],Object(r["I"])(this.adminInfo.cid,this.version,this.vernumber,this.packagename,this.flag,this.pageNo,this.pageSize).then((function(t){0===t.code&&(e.tableData=t.data.rows||[],e.total=t.data.records||0)}))},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryData())},handleCurrentChange:function(e){this.pageNo=e,this.queryData()},showDialog:function(){this.resetForm(),this.dialogTitle="添加版本",this.dialogVisible=!0},updateOrAddDevice:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var a=e.form,n=a.id,i=a.version,l=a.vernumber,o=a.packagename,s=a.packageurl,c=e.adminInfo.cid;"添加版本"===e.dialogTitle?Object(r["g"])(c,i,l,o,s).then((function(t){0===t.code&&(e.$refs.elUpload.clearFiles(),e.queryData(),e.dialogVisible=!1,e.$message({type:"success",message:"添加成功!",duration:1e3}))})):Object(r["O"])(n,c,i,l,o,s).then((function(t){0===t.code&&(e.$refs.elUpload.clearFiles(),e.queryData(),e.dialogVisible=!1,e.$message({type:"success",message:"更新成功",duration:1e3}))}))}))},resetForm:function(){this.form={cid:"",version:"",vernumber:"",packagename:"",packageurl:""}},handleEdit:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(this.form[a]="state"===a?1===t[a]:t[a]);this.dialogTitle="编辑版本",this.dialogVisible=!0},pushVersionId:function(e){var t=this;Object(r["u"])(e.id).then((function(e){0===e.code&&t.$message({type:"success",message:"推送成功",duration:1e3})}))},handleDelete:function(e,t){var a=this;this.$confirm("是否删除设备？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["o"])(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total[a.activeName]-1)/a.pageSize);a.pageNo>t&&(a.pageNo=t),a.queryData(),a.$message({type:"success",message:"删除成功!",duration:1e3})}}))})).catch((function(){a.$message({type:"info",message:"取消",duration:1e3})}))},beforeUpload:function(e){var t="application/vnd.android.package-archive"===e.type,a=e.size/1024/1024<10;return t||this.$message.warning("上传视频只能是 MP4 格式!"),a||this.$message.warning("上传视频大小不能超过 20MB!"),t&&a&&(this.upData.myfile=e),t&&a},uploadSuccess:function(e,t){this.form.version=t.name.replace(/\.apk/,""),this.form.packageurl=e.data.url},uploadError:function(e){this.$alert(e,"文件上传失败",{type:"error"})}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,"006b417a",null);t["default"]=d.exports},"5e5a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入账号名称",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.accountName,callback:function(t){e.accountName=t},expression:"accountName"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.showDialog}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"account",label:"账号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"password",label:"密码","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"nickname",label:"昵称","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(1===t.row.state?"正常":"禁用")}})]}}])}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[20,40,60,80],"page-size":e.limit,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"admin-base-dialog",attrs:{"append-to-body":"",title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"账号","label-width":e.formLabelWidth,prop:"account"}},[a("el-input",{attrs:{placeholder:"请输入账号名称",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"请输入密码",clearable:"","show-password":"",maxlength:"30",autocomplete:"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"确认密码","label-width":e.formLabelWidth,prop:"checkPassword"}},[a("el-input",{attrs:{type:"password",placeholder:"请再次输入密码",clearable:"","show-password":"",maxlength:"30",autocomplete:"off"},model:{value:e.form.checkPassword,callback:function(t){e.$set(e.form,"checkPassword",t)},expression:"form.checkPassword"}})],1),a("el-form-item",{attrs:{label:"昵称","label-width":e.formLabelWidth,prop:"nickname"}},[a("el-input",{attrs:{placeholder:"请输入昵称",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),a("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth,required:"",prop:"state"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}})],1),a("el-form-item",{attrs:{label:"账号等级","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},e._l(e.levels,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateOrAddAccount}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a("498a"),a("5530")),o=a("2f62"),r=a("a97a"),s={name:"AccountManagement",data:function(){var e=this,t=function(e,t,a){var n=/^[\S\u4e00-\u9fa5a-z0-9_-]{1,16}$/;n.test(t)?a():a(new Error("账号必须由1-16个汉字、英文、数字、下划线、中划线组成"))},a=function(t,a,n){var i=/^[0-9a-z]{6,16}$/gi;i.test(a)?(""!==e.form.checkPassword&&e.$refs.ruleForm.validateField("checkPassword"),n()):n(new Error("设备号长度6-16位,必须是数字或字母!"))},n=function(t,a,n){""===a?n(new Error("请再次输入密码")):a!==e.form.password?n(new Error("两次输入密码不一致!")):n()};return{accountName:"",tableData:[],page:1,limit:20,total:0,dialogTitle:"添加账号",dialogVisible:!1,currentAccount:{},formLabelWidth:"120px",form:{account:"",password:"",checkPassword:"",nickname:"",cid:"",state:!0,level:1},rules:{account:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:t,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:a,trigger:"blur"}],checkPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:n,trigger:"blur"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}]},levels:[{label:"一级",value:1},{label:"二级",value:2},{label:"三级",value:3},{label:"四级",value:4},{label:"五级",value:5}]}},computed:Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),watch:{accountName:function(e){""===e.trim()&&this.queryData()}},mounted:function(){this.queryData()},methods:{queryData:function(){var e=this;this.tableData=[],setTimeout((function(){Object(r["v"])(e.adminInfo.cid,e.accountName,e.page,e.limit).then((function(t){0===t.code&&(e.tableData=t.data.rows||[],e.total=t.data.records||0)}))}),100)},handleSizeChange:function(e){this.limit!==e&&(this.limit=e,this.queryData())},handleCurrentChange:function(e){this.page=e,this.queryData()},showDialog:function(){this.resetForm(),this.dialogTitle="添加账号",this.dialogVisible=!0},updateOrAddAccount:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var a=e.form,n=a.id,i=a.account,l=a.password,o=a.nickname,s=a.state,c=a.level,u=e.adminInfo.cid;"添加账号"===e.dialogTitle?Object(r["a"])(i,l,o,u,s?1:2,c).then((function(t){0===t.code&&(e.queryData(),e.dialogVisible=!1,e.$message({type:"success",message:"添加账号成功!",duration:1e3}))})):Object(r["J"])(n,i,l,o,u,s?1:2,c).then((function(t){0===t.code&&(e.dialogVisible=!1,e.queryData(),e.$message({type:"success",message:"更新成功",duration:1e3}))}))}))},resetForm:function(){this.form={account:"",password:"",checkPassword:"",nickname:"",cid:"",state:!0}},handleEdit:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(this.form[a]="state"===a?1===t[a]:t[a]);this.currentAccount=t,this.dialogTitle="编辑账号",this.dialogVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("是否删除客服账号！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["h"])(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total-1)/a.limit);a.page>t&&(a.page=t),a.queryData(),a.$message({type:"success",message:"删除成功!",duration:1e3})}}))})).catch((function(){a.$message({type:"info",message:"取消",duration:1e3})}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,"c1bda0ac",null);t["default"]=d.exports},6934:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{gutter:12}},[a("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover"}},[e._v("设备总数 "+e._s(e.dataStatistics.wechatAllSize))])],1),a("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover"}},[e._v("在线设备数 "+e._s(e.dataStatistics.onLineWeChatSize))])],1),a("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover"}},[e._v("好友总数 "+e._s(e.dataStatistics.weChatContactSize))])],1),a("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover"}},[e._v("群聊总数 "+e._s(e.dataStatistics.qunContactSize))])],1),a("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover"}},[e._v("消息数 "+e._s(e.dataStatistics.weChatMessageSize))])],1),a("el-col",{staticStyle:{"max-width":"240px"},attrs:{span:4}},[a("el-card",{attrs:{shadow:"hover"}},[e._v("群消息数 "+e._s(e.dataStatistics.qunMessageSize))])],1)],1),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"聊天数据统计",name:"first"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-date-picker",{attrs:{type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.timePick2,callback:function(t){e.timePick2=t},expression:"timePick2"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryBaobiao}},[e._v("查询")])],1),a("el-row",{staticClass:"scroll",staticStyle:{overflow:"auto"},attrs:{gutter:12}},[a("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("个人聊天发送消息")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v("操作按钮")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.chatMsgSendSize,stripe:"",height:"300px"}},[a("el-table-column",{attrs:{prop:"day",label:"日期","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"count",label:"消息数量","header-align":"center",align:"center"}})],1)],1)],1),a("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("个人聊天收到消息")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v("操作按钮")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.chatMsgReceivedSize,stripe:"",height:"300px"}},[a("el-table-column",{attrs:{prop:"day",label:"日期","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"count",label:"消息数量","header-align":"center",align:"center"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("群聊天发送消息")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v("操作按钮")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.qunMsgSendSize,stripe:"",height:"300px"}},[a("el-table-column",{attrs:{prop:"day",label:"日期","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"count",label:"消息数量","header-align":"center",align:"center"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("群聊天收到消息")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[e._v("操作按钮")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.qunMsgReceivedSize,stripe:"",height:"300px"}},[a("el-table-column",{attrs:{prop:"day",label:"日期","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"count",label:"消息数量","header-align":"center",align:"center"}})],1)],1)],1)],1)],1),a("el-tab-pane",{attrs:{label:"各账号用户数",name:"second"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{"margin-top":"10px"},attrs:{data:e.friendsData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"微信id",prop:"wechatid"}}),a("el-table-column",{attrs:{label:"微信号",prop:"wechatno"}}),a("el-table-column",{attrs:{label:"微信昵称",prop:"wechatnick"}}),a("el-table-column",{attrs:{label:"数量",prop:"count"}})],1)],1),a("el-tab-pane",{attrs:{label:"新增用户数",name:"third"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-date-picker",{attrs:{type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.timePick,callback:function(t){e.timePick=t},expression:"timePick"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryChange}},[e._v("查询")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading3,expression:"loading3"}],attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"微信id",prop:"wechatid"}}),a("el-table-column",{attrs:{label:"微信号",prop:"wechatno"}}),a("el-table-column",{attrs:{label:"微信昵称",prop:"wechatnick"}}),a("el-table-column",{attrs:{label:"数量",prop:"count"}}),a("el-table-column",{attrs:{label:"日期",prop:"day"}})],1)],1)],1)],1)},i=[],l=(a("b0c0"),a("5530")),o=a("5a0c"),r=a.n(o),s=a("2f62"),c=a("a97a"),u=a("d58b"),d={name:"DataStatistics",data:function(){return{dataStatistics:{wechatAllSize:0,onLineWeChatSize:0,weChatContactSize:0,qunContactSize:0,weChatMessageSize:0,qunMessageSize:0},activeName:"first",loading:!1,timePick2:"",loading2:!0,friendsData:[],loading3:!1,timePick:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},tableData:[],chatMsgSendSize:[],chatMsgReceivedSize:[],qunMsgSendSize:[],qunMsgReceivedSize:[]}},computed:Object(l["a"])({},Object(s["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryTongJi()},methods:{queryTongJi:function(){var e=this;Object(c["B"])(this.adminInfo.cid).then((function(t){0===t.code&&(e.dataStatistics=t.data)}))},queryBaobiao:function(){var e=this,t="",a="";this.timePick2&&(t=new Date(this.timePick2[0]).getTime(),a=new Date(this.timePick2[1]).getTime()),t&&a?(this.loading=!0,Object(c["A"])(this.adminInfo.cid,t,a).then((function(t){0===t.code&&(e.chatMsgSendSize=t.data.chatMsgSendSize||[],e.chatMsgReceivedSize=t.data.chatMsgReceivedSize||[],e.qunMsgSendSize=t.data.qunMsgSendSize||[],e.qunMsgReceivedSize=t.data.chatMsgqunMsgReceivedSizeSendSize||[]),e.loading=!1}))):this.$message.warning("请设置时间！")},queryData:function(){var e=this;this.loading2=!0;var t=this.adminInfo.cid;Object(u["d"])(t,"").then((function(t){0===t.code&&(e.friendsData=t.data),e.loading2=!1})).catch((function(t){e.$alert(t,"提示",{type:"error"})}))},queryChange:function(){var e=this,t="",a="";if(this.timePick&&(t=r()(this.timePick[0]).format("YYYY-MM-DD"),a=r()(this.timePick[1]).format("YYYY-MM-DD")),t&&a){this.loading3=!0;var n=this.adminInfo.cid;Object(u["b"])(n,"",1,t,a).then((function(t){0===t.code&&(e.tableData=t.data),e.loading3=!1})).catch((function(t){e.$alert(t,"提示",{type:"error"}),e.loading3=!1}))}else this.$message.warning("请设置时间！")},handleClick:function(e){"second"===e.name&&this.queryData()}}},p=d,m=a("2877"),h=Object(m["a"])(p,n,i,!1,null,"e8f449be",null);t["default"]=h.exports},"6a30":function(e,t,a){"use strict";var n=a("e37e"),i=a.n(n);i.a},7212:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"260px"},attrs:{placeholder:"请输入设备号",clearable:"",minlength:"15",maxlength:"16","show-word-limit":""},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}}),a("el-input",{staticStyle:{width:"260px","margin-left":"10px"},attrs:{placeholder:"请输入wxid",clearable:"",minlength:"6",maxlength:"20","show-word-limit":""},model:{value:e.wechatid,callback:function(t){e.wechatid=t},expression:"wechatid"}}),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"上线状态",filterable:"",clearable:""},model:{value:e.isonline,callback:function(t){e.isonline=t},expression:"isonline"}},e._l(e.onlineState,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"deviceid",label:"设备号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"wechatid",label:"微信id","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"wechatno",label:"微信号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"wechatnick",label:"微信昵称","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"是否在线","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isonline?a("span",{staticStyle:{color:"#67c23a"},domProps:{textContent:e._s("已上线")}}):a("span",{staticStyle:{color:"#f56c6c"},domProps:{textContent:e._s("已下线")}})]}}])}),a("el-table-column",{attrs:{prop:"cname",label:"所属客户","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.cname?t.row.cname:"--")}})]}}])}),a("el-table-column",{attrs:{prop:"accountid",label:"所属操作员","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return e._l(n.accountid,(function(t,n){return a("el-tag",{key:n,staticStyle:{margin:"5px"},attrs:{type:"success"}},[e._v(" "+e._s(e.accountsMap[t]||t)+" ")])}))}}])}),a("el-table-column",{attrs:{label:"登录时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.login_time))}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[20,40,60,80],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],l=(a("4160"),a("ac1f"),a("1276"),a("159b"),a("b85c")),o=a("5530"),r=a("2f62"),s=a("a97a"),c=a("2889"),u={name:"SuperPhonesManagement",data:function(){return{tableData:[],deviceid:"",accounts:[],wechatid:"",isonline:"",onlineState:[{id:"isonline0",value:0,label:"已上线"},{id:"isonline1",value:1,label:"已下线"}],pageNo:1,pageSize:20,total:0}},computed:Object(o["a"])(Object(o["a"])({},Object(r["d"])({adminInfo:"adminInfo"})),{},{accountsMap:function(){var e={};return this.accounts.forEach((function(t){e[t.id]=t.account})),e}}),mounted:function(){var e=this;Object(s["w"])(this.adminInfo.cid).then((function(t){0===t.code&&(e.accounts=t.data||[])})),this.queryData()},methods:{queryData:function(){var e=this;this.tableData=[],Object(c["f"])(this.pageNo,this.pageSize,this.isonline,this.wechatid,this.deviceid).then((function(t){if(0===t.code){var a,n=t.data.rows||[],i=Object(l["a"])(n);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.accountid=o.accountid.split(",")}}catch(r){i.e(r)}finally{i.f()}e.tableData=n,e.total=t.data.records||0}}))},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryData())},handleCurrentChange:function(e){this.pageNo=e,this.queryData()}}},d=u,p=a("2877"),m=Object(p["a"])(d,n,i,!1,null,"7e6aa892",null);t["default"]=m.exports},"824a":function(e,t,a){},9235:function(e,t,a){"use strict";var n=a("de21"),i=a.n(n);i.a},"932e":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return s}));var n=a("1c1e");function i(e,t,a,i){return n["a"].post("/user/devicegroup/pageList",{cid:e,name:t,page:a,rows:i})}function l(e){return n["a"].post("/user/devicegroup/queryByCid",{cid:e})}function o(e,t){return n["a"].post("/user/devicegroup/add",{cid:e,name:t})}function r(e,t,a){return n["a"].post("/user/devicegroup/update",{id:e,cid:t,name:a})}function s(e){return n["a"].post("/user/devicegroup/deletes",{ids:e})}},"9d64":function(e,t,a){e.exports=a.p+"static/img/logo.png"},b21e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择任务类型"},model:{value:e.moneyType,callback:function(t){e.moneyType=t},expression:"moneyType"}},e._l(e.moneyTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.timePick,callback:function(t){e.timePick=t},expression:"timePick"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("开始搜索")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"微信id",prop:"wechatid"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{domProps:{textContent:e._s(e.wechatsNameMap[n.wechatid]||n.wechatid)}})]}}])}),a("el-table-column",{attrs:{label:"总金额(元)",prop:"amount"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.amount?a("div",{domProps:{textContent:e._s(n.amount/100)}}):a("div",{domProps:{textContent:e._s(n.amount)}})]}}])}),a("el-table-column",{attrs:{label:"日期",prop:"day"}}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{on:{click:function(t){return e.showMoneyDetail(n)}}},[e._v("详情")])]}}])})],1),a("el-dialog",{staticClass:"money-detail-dialog",attrs:{title:"对账单","close-on-click-modal":!1,"show-close":!0,"append-to-body":"",visible:e.moneyDetailDialog},on:{"update:visible":function(t){e.moneyDetailDialog=t}}},[a("el-table",{attrs:{data:e.detailData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"微信昵称",prop:"wechatid"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{domProps:{textContent:e._s(e.wechatsNameMap[n.wechatid]||n.wechatid)}})]}}])}),a("el-table-column",{attrs:{label:"发送者昵称",prop:"friendname"}}),a("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{domProps:{textContent:e._s(e.moneyTypeMapMap[n.type]||n.type)}})]}}])}),a("el-table-column",{attrs:{label:"金额(元)",prop:"amount"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.amount?a("div",{domProps:{textContent:e._s(n.amount/100)}}):a("div",{domProps:{textContent:e._s(n.amount)}})]}}])}),a("el-table-column",{attrs:{label:"日期",prop:"day"}})],1),a("span",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},i=[],l=(a("4160"),a("159b"),a("5530")),o=a("2f62"),r=a("5a0c"),s=a.n(r),c=a("d58b"),u=a("2889"),d={name:"ToolsAutoTaskList",data:function(){return{moneyType:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},timePick:"",tableData:[],detailData:[],moneyTypeMapMap:{0:"红包",1:"转账"},moneyTypes:[{value:0,label:"红包"},{value:1,label:"转账"}],moneyDetailDialog:!1,wechatsNameMap:{}}},computed:Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),mounted:function(){var e=this;Object(u["e"])(this.adminInfo.cid,1,200,"","","","").then((function(t){if(0===t.code&&t.data.rows){var a={};t.data.rows.forEach((function(e){a[e.wechatid]=e.wechatnick})),e.wechatsNameMap=a}}))},methods:{queryData:function(){var e=this,t="",a="";this.timePick&&(t=s()(this.timePick[0]).format("YYYY-MM-DD"),a=s()(this.timePick[1]).format("YYYY-MM-DD")),t&&a?Object(c["e"])(this.adminInfo.cid,this.moneyType,t,a).then((function(t){0===t.code&&(e.tableData=t.data)})).catch((function(t){e.$alert(t,"提示",{type:"warning"})})):this.$message.warning("请设置时间！")},showMoneyDetail:function(e){var t=this,a=e.day,n=new Date(e.day).getTime()+864e5;n=s()(n).format("YYYY-MM-DD"),Object(c["f"])(this.adminInfo.cid,this.moneyType,e.wechatid,a,n).then((function(e){0===e.code&&(t.detailData=e.data,t.moneyDetailDialog=!0)})).catch((function(e){t.$alert(e,"提示",{type:"warning"})}))}}},p=d,m=a("2877"),h=Object(m["a"])(p,n,i,!1,null,"18c4d47a",null);t["default"]=h.exports},bf90:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAEG0lEQVRIS72WW2gcVRjH/9+ZMzs7m80m9dINoVjboj4UaaMPBlvpgxQJiA+hoSapDyoiXmjE+qB4QRHFhwpGWpReRKj2QsX2oRL6JGIqVsESURBLhWosTdKGbnazMztzZo58szuSrruzqxDPsgu7O+f8znf7fx+N7PM2kggGECKtCRrLsEiDQtKOIeQEDe8vvyhAWQ34AGgZeHykJsAEYZFG9zlvaELYLkxUd0cXIw3NG9tcmjQEjex3Xm9zA6SECBXCShBdEJYBISSEUtXv7ay2gGwVEWimCDebhuztQoYPv1RAueRC5TuR1m1a2xLIML5+0YX/6Ca5cfM6455chm5kYMHVVybPB2c/+lpNdWVgxs8mWdoSaBBofhHeW4PmgxtWGf26mgBxcnFW09R08O2rJ/1T3TZSgU7O9EQgx+zyNThPbpF9g31ySOtqrNi9UerVDieCOHFOffbhV+qHnm7YSTFNBPLBjg+1d8R6rCdHtzKQD1/qsvi32ZL+/ZlPKgfSEkZSBjUFMsxTCPJZ2Lu3p3daMkqUyIV1MYp+8xScXcfd8ZkFOCkJI7a+Pp6tgTnY7w6lx1ISdhKwolB+4Zj7/kzpPwL5Zuw7VyHYM2I9ns/R6iSXzizoi08frhy0Tchm1kXxTyr8OGmeuE/ete1uua2WodG+2FVx1p6aCk7u/dL/bmUOtgqbC0HLsmDoXAHuaw9ZW/vX0JYa6Lo4/jgdnN15xPs830U2q09SaSQCuQYXfahsGubz95tb1+aN2wIFlTaR5ZiqEN7Vov7TlLDminr2ndPeFyUXfocJ2QzaFMgwjt8KG9abg9aOlVm6hZMmCKE4RoYBMwwRCAGj5mPi0nj5ROVQoQyPy6MRNBF4zYH33sOp4bU3ifWhRiCoenj94jhyQvH/v10Jf37uqHekmeo0BEoBMbsAZ6TfWP9IvznaKDubgVn2Pv7GP3T0++CXniwsv07qGgLNWmfYM2oNr7uZ7mwbWFOiC3P6p2c/rRzmLtISyLXnhdAdFuT4duupznTUGRopTEPXsoVFV18dO1b5gGVRArRU6v5hYSxpPV2U2T1kjaWMqNcFUe3FnX4JKhqCqpMQf2oiGH4Ad9fxyvjlgi7Xy1xDl8bl8MqA+UDfamNTO5186TPnLgZn3p7wT1sNVKchMGqkIVD04G++nXrvXSPvWLVC9OZsdFsmZUyBFHuCY+sH8FylufMX/pgPpycvqPOTv+pLnRmeSK53Z0tpY0sLLvySq1XKILohCyubgpkyIYiItNaaa7XsQM2XUfECrTstMnIJjbiltDGUDERzHWukCqOa+3t+ZUuliN78gg6gE6Xt34yJceeNx8TIRTV4G2NbdUwcPeC8BI2O/2MQDqFLtOOgtyEI1YDQZC/nqA8BV4fGxF/vmR1mDoPLwAAAAABJRU5ErkJggg=="},c290:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入管理员名称",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.adminName,callback:function(t){e.adminName=t},expression:"adminName"}}),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入客户名称",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.customerName,callback:function(t){e.customerName=t},expression:"customerName"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.showDialog}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"suppliername",label:"客户名称","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"admin",label:"管理员账号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"dname",label:"状态","header-align":"center",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.state?a("span",{staticStyle:{color:"#67c23a"}},[e._v("正常")]):a("span",{staticStyle:{color:"#e6a23c"}},[e._v("禁用")])]}}])}),a("el-table-column",{attrs:{prop:"account_num",label:"最大账号数量","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"device_num",label:"最大设备数量","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"validity",label:"服务期限","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[20,40,60,80],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"admin-base-dialog",attrs:{"append-to-body":"",title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:"客户名称","label-width":e.formLabelWidth,prop:"suppliername"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入账号名称",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.form.suppliername,callback:function(t){e.$set(e.form,"suppliername",t)},expression:"form.suppliername"}})],1),a("el-form-item",{attrs:{label:"最大账号数量","label-width":e.formLabelWidth,prop:"account_num"}},[a("el-input-number",{staticStyle:{width:"280px"},attrs:{min:1,max:1e4,label:"请设置最大账号数量"},model:{value:e.form.account_num,callback:function(t){e.$set(e.form,"account_num",t)},expression:"form.account_num"}})],1),a("el-form-item",{attrs:{label:"最大设备数量","label-width":e.formLabelWidth,prop:"device_num"}},[a("el-input-number",{staticStyle:{width:"280px"},attrs:{min:1,max:1e4,label:"请设置最大账号数量"},model:{value:e.form.device_num,callback:function(t){e.$set(e.form,"device_num",t)},expression:"form.device_num"}})],1),a("el-form-item",{attrs:{label:"服务期限","label-width":e.formLabelWidth,prop:"validity"}},[a("el-date-picker",{staticStyle:{width:"280px"},attrs:{type:"date",placeholder:"选择服务期限","picker-options":e.pickerOptions},model:{value:e.form.validity,callback:function(t){e.$set(e.form,"validity",t)},expression:"form.validity"}})],1),a("el-form-item",{attrs:{label:"客户状态","label-width":e.formLabelWidth,prop:"state"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择阅读状态",filterable:"",clearable:""},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},e._l(e.customerStates,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"管理员账号","label-width":e.formLabelWidth,prop:"admin"}},[a("el-input",{attrs:{placeholder:"请输入管理员账号",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.form.admin,callback:function(t){e.$set(e.form,"admin",t)},expression:"form.admin"}})],1),a("el-form-item",{attrs:{label:"联系人姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入昵称",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1),a("el-form-item",{attrs:{label:"联系人电话","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入昵称",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"备注信息","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:"请输入备注信息"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateOrAddAccount}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a("a4d3"),a("e01a"),a("5530")),o=a("2f62"),r=a("a97a"),s={name:"SuperCustomerManagement",data:function(){var e=function(e,t,a){var n=/^[\S\u4e00-\u9fa5a-z0-9_-]{1,16}$/;n.test(t)?a():a(new Error("账号必须由1-16个汉字、英文、数字、下划线、中划线组成"))};return{tableData:[],adminName:"",customerName:"",customerStates:[{id:"customerStates0",value:1,label:"正常"},{id:"customerStates1",value:2,label:"禁用"}],pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()}},pageNo:1,pageSize:20,total:0,dialogTitle:"添加客户",dialogVisible:!1,formLabelWidth:"120px",form:{id:"",suppliername:"",account_num:"",device_num:"",validity:"",state:"",admin:"",contact:"",phone:"",description:""},rules:{suppliername:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:e,trigger:"blur"}],account_num:[{required:!0,message:"请设置最大账号数量",trigger:"blur"}],device_num:[{required:!0,message:"请设置最大账号数量",trigger:"blur"}],validity:[{required:!0,message:"选择服务期限",trigger:"blur"}],state:[{required:!0,message:"请选择阅读状态",trigger:"blur"}],admin:[{required:!0,message:"请输入管理员账号",trigger:"blur"}]}}},computed:Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryData()},methods:{queryData:function(){var e=this;this.tableData=[],Object(r["z"])(this.customerName,this.adminName,this.pageNo,this.pageSize).then((function(t){0===t.code&&(e.tableData=t.data.rows||[],e.total=t.data.records||0)}))},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryData())},handleCurrentChange:function(e){this.pageNo=e,this.queryData()},showDialog:function(){this.resetForm(),this.dialogTitle="添加客户",this.dialogVisible=!0},updateOrAddAccount:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var a=e.form,n=a.id,i=a.suppliername,l=a.account_num,o=a.device_num,s=a.state,c=a.admin,u=a.contact,d=a.phone,p=a.description,m=e.form.validity;if("添加客户"===e.dialogTitle){var h=m.getFullYear(),f=m.getMonth()+1;f<10&&(f="0"+f);var g=m.getDate()<10?"0"+m.getDate():m.getDate(),b=h+"-"+f+"-"+g;Object(r["c"])(i,l,o,b,s,c,u,d,p).then((function(t){0===t.code&&(e.queryData(),e.dialogVisible=!1,e.$message({type:"success",message:"添加客户成功!",duration:1e3}))}))}else Object(r["L"])(n,i,l,o,m,s,c,u,d,p).then((function(t){0===t.code&&(e.queryData(),e.dialogVisible=!1,e.$message({type:"success",message:"更新成功!",duration:1e3}))}))}))},resetForm:function(){this.form={id:"",suppliername:"",account_num:"",device_num:"",validity:"",state:"",admin:"",contact:"",phone:"",description:""}},handleEdit:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(this.form[a]=t[a]);this.dialogTitle="编辑客户",this.dialogVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("是否删除客服账号！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["j"])(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total-1)/a.pageSize);a.pageNo>t&&(a.pageNo=t),a.queryData(),a.$message({type:"success",message:"删除成功!",duration:1e3})}}))})).catch((function(){a.$message({type:"info",message:"取消",duration:1e3})}))}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,"73dc5678",null);t["default"]=d.exports},c72e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"通话记录",name:"calls"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入设备号",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.callImei,callback:function(t){e.callImei=t},expression:"callImei"}}),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入号码",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.callNumber,callback:function(t){e.callNumber=t},expression:"callNumber"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")])],1),a("el-table",{attrs:{data:e.tableData[e.activeName],stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"imei",label:"设备号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"wechatid",label:"微信id","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"number",label:"电话号码","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"duration",label:"时长","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"record",label:"录音地址","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.record?a("div",[a("audio",{staticClass:"show-content-voice",attrs:{src:n.record,type:"audio/mp3",controls:""}})]):e._e()]}}])}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.callPageNo,"page-sizes":[20,40,60,80],"page-size":e.callPageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total[e.activeName]},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-tab-pane",{attrs:{label:"短信记录",name:"shortMessages"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入内容",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.msgContent,callback:function(t){e.msgContent=t},expression:"msgContent"}}),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入号码",clearable:"",maxlength:"30","show-word-limit":""},model:{value:e.msgNumber,callback:function(t){e.msgNumber=t},expression:"msgNumber"}}),a("el-select",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{placeholder:"请选择阅读状态",filterable:"",clearable:""},model:{value:e.msgRead,callback:function(t){e.msgRead=t},expression:"msgRead"}},e._l(e.readState,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{placeholder:"请选择发送状态",filterable:"",clearable:""},model:{value:e.msgType,callback:function(t){e.msgType=t},expression:"msgType"}},e._l(e.typeState,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")])],1),a("el-table",{attrs:{data:e.tableData[e.activeName],stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"imei",label:"设备号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"number",label:"电话号码","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"content",label:"内容","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"readz",label:"阅读状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["true"===t.row.readz?a("span",{staticStyle:{color:"#67c23a"},domProps:{textContent:e._s("已读")}}):a("span",{staticStyle:{color:"#f56c6c"},domProps:{textContent:e._s("未读")}})]}}])}),a("el-table-column",{attrs:{prop:"type",label:"发送状态","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.typeMap[t.row.type])}})]}}])}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])})],1),a("el-pagination",{attrs:{"current-page":e.msgPageNo,"page-sizes":[20,40,60,80],"page-size":e.msgPageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total[e.activeName]},on:{"size-change":e.handleMsgSizeChange,"current-change":e.handleMsgCurrentChange}})],1)],1)],1)},i=[],l=a("5530"),o=a("2f62"),r=a("a97a"),s={name:"MobilePhoneMonitor",data:function(){return{activeName:"calls",typeMap:{1:"收件箱",2:"发送中",3:"垃圾箱",4:"发件箱",5:"发送失败",6:"排队发送"},callNumber:"",callType:"",callContent:"",callRecord:"",callImei:"",callPageNo:1,callPageSize:20,msgNumber:"",msgType:"",typeState:[{id:"typeState0",value:1,label:"收件箱"},{id:"typeState2",value:2,label:"发送中"},{id:"typeState3",value:3,label:"垃圾箱"},{id:"typeState4",value:4,label:"发件箱"},{id:"typeState5",value:5,label:"发送失败"},{id:"typeState6",value:6,label:"排队发送"}],msgContent:"",msgRead:"",readState:[{id:"readState0",value:"true",label:"已读"},{id:"readState1",value:"false",label:"未读"}],msgPageNo:1,msgPageSize:20,tableData:{calls:[],shortMessages:[]},total:{calls:0,shortMessages:0}}},computed:Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryCallLogList(),this.queryShortMessageList()},methods:{queryCallLogList:function(){var e=this;this.tableData["calls"]=[],Object(r["x"])(this.adminInfo.cid,this.callNumber,this.callType,this.callContent,this.callRecord,this.callImei,this.callPageNo,this.callPageSize).then((function(t){console.log(t),0===t.code&&(e.tableData["calls"]=t.data.rows||[],e.total["calls"]=t.data.records||0)}))},queryShortMessageList:function(){var e=this;this.tableData["shortMessages"]=[],Object(r["H"])(this.adminInfo.cid,this.msgNumber,this.msgType,this.msgContent,this.msgRead,this.msgPageNo,this.msgPageSize).then((function(t){0===t.code&&(e.tableData["shortMessages"]=t.data.rows||[],e.total["shortMessages"]=t.data.records||0)}))},queryData:function(){"calls"===this.activeName?this.queryCallLogList():this.queryShortMessageList()},handleSizeChange:function(e){this.callPageSize!==e&&(this.callPageSize=e,this.queryData())},handleCurrentChange:function(e){this.callPageNo=e,this.queryData()},handleMsgSizeChange:function(e){this.msgPageSize!==e&&(this.msgPageSize=e,this.queryData())},handleMsgCurrentChange:function(e){this.msgPageNo=e,this.queryData()}}},c=s,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,"3fe259e8",null);t["default"]=d.exports},caf9:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"设备管理",name:"device"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入设备号",clearable:"",minlength:"6",maxlength:"30","show-word-limit":""},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}}),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入wxid或微信号",clearable:"",minlength:"6",maxlength:"30","show-word-limit":""},model:{value:e.wechatid,callback:function(t){e.wechatid=t},expression:"wechatid"}}),a("el-select",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请选择操作员",filterable:"",clearable:""},model:{value:e.accountid,callback:function(t){e.accountid=t},expression:"accountid"}},e._l(e.accounts,(function(e){return a("el-option",{key:e.id,attrs:{label:e.account,value:e.id}})})),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"上线状态",filterable:"",clearable:""},model:{value:e.isonline,callback:function(t){e.isonline=t},expression:"isonline"}},e._l(e.onlineState,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请选择分组",filterable:"",clearable:""},model:{value:e.groupId,callback:function(t){e.groupId=t},expression:"groupId"}},e._l(e.groupsList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryDeviceDataByCondition}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.showDialog}},[e._v("添加")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.addGroupId}},[e._v("批量分组")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.deleteDevices}},[e._v("批量删除")])],1),a("el-table",{ref:"multipleTable",attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"deviceid",label:"设备号","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"wechatid",label:"微信信息","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v("微信id:"+e._s(n.wechatid))]),a("div",[e._v("微信号:"+e._s(n.wechatno))]),a("div",[e._v("微信昵称:"+e._s(n.wechatnick))])]}}])}),a("el-table-column",{attrs:{prop:"groupid",label:"所属分组","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{domProps:{textContent:e._s(e.groupsMap[n.groupid]||n.groupid)}})]}}])}),a("el-table-column",{attrs:{prop:"snumber",label:"序号","header-align":"center",align:"center",width:"80"}}),a("el-table-column",{attrs:{label:"手机是否在线","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.isonline?a("span",{staticStyle:{color:"#67c23a"},domProps:{textContent:e._s("已上线")}}):a("span",{staticStyle:{color:"#f56c6c"},domProps:{textContent:e._s("已下线")}})]}}])}),a("el-table-column",{attrs:{prop:"accountid",label:"所属操作员","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return e._l(n.accountid,(function(t,n){return a("el-tag",{key:n,staticStyle:{margin:"5px"},attrs:{type:"success"}},[e._v(" "+e._s(e.accountsMap[t]||t)+" ")])}))}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[20,40,60,80],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-tab-pane",{attrs:{label:"设备分组",name:"group"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入分组名称",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.groupName,callback:function(t){e.groupName=t},expression:"groupName"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryGroupDataByName}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.addGroup}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.groupData,height:"100%",stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"分组名称","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.updateGroupName(t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.deleteGroupItem(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.groupPageNo,"page-sizes":[20,40,60,80],"page-size":e.groupPageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.groupTotal},on:{"size-change":e.handleGroupSizeChange,"current-change":e.handleGroupPageChange}})],1)],1),a("el-dialog",{staticClass:"add-device-dialog",attrs:{"append-to-body":"",title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.deviceForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"所属操作员","label-width":e.formLabelWidth,prop:"accountid"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{multiple:"",placeholder:"请选择操作员",filterable:"",clearable:""},model:{value:e.deviceForm.accountid,callback:function(t){e.$set(e.deviceForm,"accountid",t)},expression:"deviceForm.accountid"}},e._l(e.accounts,(function(e){return a("el-option",{key:e.id,attrs:{label:e.account,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"设备ID","label-width":e.formLabelWidth,prop:"deviceid"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入账号名称",clearable:"",minlength:"6",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.deviceForm.deviceid,callback:function(t){e.$set(e.deviceForm,"deviceid",t)},expression:"deviceForm.deviceid"}})],1),a("el-form-item",{attrs:{label:"分组","label-width":e.formLabelWidth,prop:"groupid"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择分组",filterable:"",clearable:""},model:{value:e.deviceForm.groupid,callback:function(t){e.$set(e.deviceForm,"groupid",t)},expression:"deviceForm.groupid"}},e._l(e.groupsList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"序号","label-width":e.formLabelWidth,prop:"snumber"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,max:1e4},model:{value:e.deviceForm.snumber,callback:function(t){e.$set(e.deviceForm,"snumber",t)},expression:"deviceForm.snumber"}})],1),a("el-form-item",{attrs:{label:"手机别名","label-width":e.formLabelWidth,prop:"devnickname"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入手机别名",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.deviceForm.devnickname,callback:function(t){e.$set(e.deviceForm,"devnickname",t)},expression:"deviceForm.devnickname"}})],1),a("el-form-item",{attrs:{label:"手机品牌","label-width":e.formLabelWidth,prop:"brand"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入手机品牌",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.deviceForm.brand,callback:function(t){e.$set(e.deviceForm,"brand",t)},expression:"deviceForm.brand"}})],1),a("el-form-item",{attrs:{label:"手机型号","label-width":e.formLabelWidth,prop:"module"}},[a("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入手机型号",clearable:"",maxlength:"30","show-word-limit":"",autocomplete:"off"},model:{value:e.deviceForm.module,callback:function(t){e.$set(e.deviceForm,"module",t)},expression:"deviceForm.module"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateOrAddDevice}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),a("ac1f"),a("1276"),a("159b"),a("b85c")),o=a("5530"),r=a("2f62"),s=a("2889"),c=a("a97a"),u=a("932e"),d={name:"DevicesManagement",data:function(){return{activeName:"device",tableData:[],deviceid:"",groupId:"",wechatid:"",accounts:[],isonline:"",accountid:"",onlineState:[{id:"isonline0",value:0,label:"已上线"},{id:"isonline1",value:1,label:"已下线"}],pageNo:1,pageSize:20,total:0,dialogTitle:"添加设备",dialogVisible:!1,formLabelWidth:"120px",deviceForm:{id:"",cid:"",deviceid:[],accountid:"",groupid:"",snumber:0,devnickname:"",brand:"",module:""},rules:{accountid:[{required:!0,message:"请选择操作员",trigger:"blur"}],deviceid:[{required:!0,message:"请输入设备号",trigger:"blur"}]},groupsList:[],groupName:"",groupData:[],groupPageNo:1,groupPageSize:20,groupTotal:0,multipleSelection:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(r["d"])({adminInfo:"adminInfo"})),{},{accountsMap:function(){var e={};return this.accounts.forEach((function(t){e[t.id]=t.account})),e},groupsMap:function(){var e={};return this.groupsList.forEach((function(t){e[t.id]=t.name})),e}}),mounted:function(){var e=this;Object(c["w"])(this.adminInfo.cid).then((function(t){0===t.code&&(e.accounts=t.data||[])})),this.querAllGroup(),this.queryDeviceData(),this.queryGroupData()},methods:{querAllGroup:function(){var e=this;Object(u["c"])(this.adminInfo.cid).then((function(t){e.groupsList=t.data||[]}))},queryGroupData:function(){var e=this;Object(u["d"])(this.adminInfo.cid,this.groupName,this.groupPageNo,this.groupPageSize).then((function(t){0===t.code&&(e.groupData=t.data.rows,e.groupTotal=t.data.records||0)}))},queryGroupDataByName:function(){this.groupName&&(this.groupPageNo=1,this.groupPageSize=20),this.queryGroupData()},handleGroupSizeChange:function(e){this.pageSize!==e&&(this.groupPageSize=e,this.queryGroupData())},handleGroupPageChange:function(e){this.groupPageNo=e,this.queryGroupData()},addGroup:function(){var e=this;this.$prompt("请输入分组名称","添加分组",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[\u4e00-\u9fa5_a-zA-Z0-9]{1,50}/,inputErrorMessage:"名称格式不正确"}).then((function(t){var a=t.value;Object(u["a"])(e.adminInfo.cid,a).then((function(t){0===t.code&&e.queryGroupData()}))})).catch((function(){}))},updateGroupName:function(e){var t=this;this.$prompt("请输入分组名称","修改分组名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"输入分组名称",inputValue:e.name,inputPattern:/[\u4e00-\u9fa5_a-zA-Z0-9]{1,50}/,inputErrorMessage:"名称格式不正确"}).then((function(a){var n=a.value;Object(u["e"])(e.id,t.adminInfo.cid,n).then((function(e){0===e.code&&t.queryGroupData()}))})).catch((function(){}))},deleteGroupItem:function(e,t){var a=this;this.$confirm("此操作将删除该分组, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(u["b"])(t.id).then((function(e){0===e.code&&a.queryGroupData()}))})).catch((function(){}))},queryDeviceData:function(){var e=this;Object(s["e"])(this.adminInfo.cid,this.pageNo,this.pageSize,this.deviceid,this.wechatid,this.isonline,this.groupId,this.accountid).then((function(t){if(console.log(t),0===t.code){var a,n=t.data.rows||[],i=Object(l["a"])(n);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.accountid=o.accountid.split(",")}}catch(r){i.e(r)}finally{i.f()}e.tableData=n,e.total=t.data.records||0}}))},queryDeviceDataByCondition:function(){(this.deviceid||this.wechatid||""!==this.isonline||""!==this.groupId)&&(this.pageNo=1,this.pageSize=20),this.queryDeviceData()},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryDeviceData())},handleCurrentChange:function(e){this.pageNo=e,this.queryDeviceData()},showDialog:function(){this.resetForm(),this.dialogTitle="添加设备",this.dialogVisible=!0},updateOrAddDevice:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var a=e.deviceForm,n=a.id,i=a.deviceid,l=a.accountid,o=a.groupid,r=a.devnickname,c=a.brand,u=a.snumber,d=e.adminInfo.cid,p=e.deviceForm.module,m=l.join(",");"添加设备"===e.dialogTitle?Object(s["a"])(d,i,m,o,r,c,p,u).then((function(t){0===t.code&&(e.queryDeviceData(),e.dialogVisible=!1)})):Object(s["g"])(n,d,i,m,o,r,c,p,u).then((function(t){0===t.code&&(e.dialogVisible=!1,e.queryDeviceData())}))}))},resetForm:function(){this.deviceForm={id:"",cid:"",deviceid:"",accountid:"",groupid:"",snumber:0,devnickname:"",brand:"",module:""}},handleEdit:function(e,t){var a=this;for(var n in t)t.hasOwnProperty(n)&&("state"===n?this.deviceForm[n]=1===t[n]:"accountid"===n?function(){var e=[];t["accountid"].forEach((function(t){e.push(Number(t))})),a.deviceForm["accountid"]=e}():this.deviceForm[n]=t[n]);this.dialogTitle="编辑设备",this.dialogVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("是否删除设备？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["b"])(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total[a.activeName]-1)/a.pageSize);a.pageNo>t&&(a.pageNo=t),a.queryDeviceData()}}))})).catch((function(){}))},deleteDevices:function(){var e=this;this.$confirm("确认这些删除设备？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.multipleSelection.map((function(e){return e.id}));Object(s["b"])(t.join(",")).then((function(t){if(0===t.code){var a=Math.ceil((e.total[e.activeName]-1)/e.pageSize);e.pageNo>a&&(e.pageNo=a),e.queryDeviceData()}}))})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},addGroupId:function(){var e=this,t=this.multipleSelection.map((function(e){return e.id}));t.length<=0?this.$alert("至少选中一个设备！","提示",{type:"warning"}):this.groupId?Object(s["d"])(t.join(","),this.groupId).then((function(t){0===t.code&&(e.groupId="",e.queryDeviceData())})):this.$alert("请在左侧选择一个分组！","提示",{type:"warning"})}}},p=d,m=a("2877"),h=Object(m["a"])(p,n,i,!1,null,"79bf07c2",null);t["default"]=h.exports},d58b:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return c}));var n=a("1c1e");function i(e){return n["a"].post("/user/data/circleTongji",{cid:e})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return n["a"].post("/user/data/friendAddTongji",{cid:e,type:t,wechatid:l,groupid:o,start:a,end:i})}function o(e,t,a,i,l){return n["a"].post("/user/data/friendChangeTongji",{cid:e,accountid:t,type:a,start:i,end:l})}function r(e,t,a){return n["a"].post("/user/data/friendTotalTongji",{cid:e,accountid:t,wechatid:a})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return n["a"].post("/user/data/luckyMoneyTongji",{cid:e,type:t,start:a,end:i})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;return n["a"].post("/user/data/luckyMoneyDetail",{cid:e,type:t,wechatid:a,start:i,end:l})}},de21:function(e,t,a){},de45:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"常用术语列表",name:"reply"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入标题",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.replyName,callback:function(t){e.replyName=t},expression:"replyName"}}),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择类型",filterable:"",clearable:""},model:{value:e.replyCtype,callback:function(t){e.replyCtype=t},expression:"replyCtype"}},e._l(e.ctypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{placeholder:"请选择术语分组",filterable:"",clearable:""},model:{value:e.replyTid,callback:function(t){e.replyTid=t},expression:"replyTid"}},e._l(e.replyGroups,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryDataByCondition}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.showDialog}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.tableData[e.activeName],stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"tname",label:"所属分组","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"术语标题","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"ctype",label:"术语类型","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.ctypeMap[t.row.ctype])}})]}}])}),a("el-table-column",{attrs:{prop:"content",label:"术语内容","header-align":"center",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"ellipsis",attrs:{title:t.row.content},domProps:{textContent:e._s(t.row.content)}})]}}])}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[20,40,60,80],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total[e.activeName]},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-tab-pane",{attrs:{label:"术语分组列表",name:"types"}},[a("el-row",{staticStyle:{margin:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入分组名称",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.typeName,callback:function(t){e.typeName=t},expression:"typeName"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryGroupDate}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.showGroupDialog}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.tableData[e.activeName],height:"100%",stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"所属分组","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleGroupEdit(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.groupPageNo,"page-sizes":[20,40,60,80],"page-size":e.groupPageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total[e.activeName]},on:{"size-change":e.handleTypeSizeChange,"current-change":e.handleTypeCurrentChange}})],1)],1),a("el-dialog",{staticClass:"admin-base-dialog",attrs:{"append-to-body":"","close-on-click-modal":!1,title:e.dialogTitle,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.replyForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"所属分组","label-width":e.formLabelWidth,prop:"tid"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择术语分组",filterable:"",clearable:""},model:{value:e.replyForm.tid,callback:function(t){e.$set(e.replyForm,"tid",t)},expression:"replyForm.tid"}},e._l(e.replyGroups,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"术语类型","label-width":e.formLabelWidth,prop:"ctype"}},[a("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择类型",filterable:"",clearable:""},model:{value:e.replyForm.ctype,callback:function(t){e.$set(e.replyForm,"ctype",t)},expression:"replyForm.ctype"}},e._l(e.ctypes,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"术语标题","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入标签名",clearable:"",maxlength:"20","show-word-limit":"",autocomplete:"off"},model:{value:e.replyForm.name,callback:function(t){e.$set(e.replyForm,"name",t)},expression:"replyForm.name"}})],1),a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"内容","label-width":e.formLabelWidth,prop:"content"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:8,maxRows:8},placeholder:"请输入内容",maxlength:"500","show-word-limit":""},model:{value:e.replyForm.content,callback:function(t){e.$set(e.replyForm,"content",t)},expression:"replyForm.content"}})],1),a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[1!==e.replyForm.ctype?a("label",{staticClass:"label",staticStyle:{cursor:"poninter"},attrs:{for:"sendFiles"}},[e._v("选择文件")]):e._e(),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"toolsFile",attrs:{id:"sendFiles",type:"file",maxlength:"1"},on:{change:function(t){return e.choseMedia()}}})])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateOrAddReply}},[e._v("确 定")])],1)],1),a("el-dialog",{staticClass:"admin-base-dialog",attrs:{"append-to-body":"","close-on-click-modal":!1,title:e.groupDialogTitle,visible:e.groupDialogVisible},on:{"update:visible":function(t){e.groupDialogVisible=t}}},[a("el-form",{ref:"ruleGroupForm",attrs:{model:e.groupForm,rules:e.groupRules}},[a("el-form-item",{attrs:{label:"术语分组名称","label-width":e.formLabelWidth,prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入名称",clearable:"",maxlength:"20","show-word-limit":"",autocomplete:"off"},model:{value:e.groupForm.name,callback:function(t){e.$set(e.groupForm,"name",t)},expression:"groupForm.name"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.groupDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateOrAddGroup}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a("b0c0"),a("ac1f"),a("5319"),a("5530")),o=a("2f62"),r=a("0e5c"),s=a("a97a"),c={name:"CommonReplies",data:function(){return{activeName:"reply",ctypeMap:{1:"文本类型",2:"图片类型",3:"视频类型",4:"语音类型",5:"其他文件类型"},departments:[],replyGroups:[],ctypes:[{id:"ctypes1",value:1,label:"文本类型"},{id:"ctypes2",value:2,label:"图片类型"},{id:"ctypes3",value:3,label:"视频类型"},{id:"ctypes4",value:4,label:"语音类型"},{id:"ctypes5",value:5,label:"其他文件类型"}],replyName:"",replyTid:"",replyCtype:"",pageNo:1,pageSize:20,dialogTitle:"添加术语",groupDialogTitle:"添加术语分组",dialogVisible:!1,groupDialogVisible:!1,formLabelWidth:"120px",replyForm:{id:"",cid:"",ctype:1,tid:"",content:"",name:""},groupForm:{id:"",cid:"",name:""},rules:{tid:[{required:!0,message:"请选择术语类型",trigger:"blur"}],name:[{required:!0,message:"请输入标题",trigger:"blur"}],ctype:[{required:!0,message:"请选择类型",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]},groupRules:{name:[{required:!0,message:"请输入术语分组名称",trigger:"blur"}]},typeName:"",groupPageNo:1,groupPageSize:20,tableData:{reply:[],types:[]},total:{reply:0,types:0}}},computed:Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryAllGroup(),this.queryData()},methods:{choseMedia:function(){var e=this,t=new FormData,a=this.$refs.toolsFile.files;if(a[0]){var n=a[0].size,i=a[0].name.replace(/.+\./,"").toLowerCase();if(n>10485760||n<=0)return void this.$message.warning("文件不能大于10M，文件不能是空文件");t.append("myfile",a[0]);var l=this.$loading({lock:!0,text:"文件上传中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});if(4===this.replyForm.ctype){"mp3"===i?t.append("isMp3ToAmr",!0):"amr"===i&&t.append("isAmrToMp3",!1);var o=new FormData;o.append("myfile",a[0]),"mp3"===i?o.append("isMp3ToAmr",!1):"amr"===i&&o.append("isAmrToMp3",!0),Object(r["a"])(o)}Object(r["a"])(t).then((function(t){e.replyForm.content=t.data.url,l.close(),e.$forceUpdate(),e.$refs.toolsFile.value=""})).catch((function(){e.$message({message:"文件上传失败!",type:"error",duration:1e3}),l.close()}))}},queryAllGroup:function(){var e=this;Object(s["G"])(this.adminInfo.cid).then((function(t){0===t.code&&(e.replyGroups=t.data||[])}))},handleClick:function(e){"types"===e.name&&this.queryGroupDate()},queryDataByCondition:function(){this.handleCurrentChange(1)},queryData:function(){var e=this;this.tableData["reply"]=[],Object(s["E"])(this.adminInfo.cid,this.replyName,this.replyTid,this.replyCtype,this.pageNo,this.pageSize).then((function(t){0===t.code&&(e.tableData["reply"]=t.data.rows||[],e.total["reply"]=t.data.records||0)}))},queryGroupDate:function(){var e=this;this.tableData["types"]=[],Object(s["F"])(this.adminInfo.cid,this.typeName,this.groupPageNo,this.groupPageSize).then((function(t){0===t.code&&(e.tableData["types"]=t.data.rows||[],e.total["types"]=t.data.records||0)}))},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryData())},handleCurrentChange:function(e){this.pageNo=e,this.queryData()},handleTypeSizeChange:function(e){this.groupPageSize!==e&&(this.groupPageSize=e,this.queryGroupDate())},handleTypeCurrentChange:function(e){this.groupPageNo=e,this.queryGroupDate()},showDialog:function(){this.resetForm(),this.dialogTitle="添加术语",this.dialogVisible=!0},showGroupDialog:function(){this.resetGroupForm(),this.groupDialogTitle="添加术语分组",this.groupDialogVisible=!0},updateOrAddReply:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;var a=e.replyForm,n=a.id,i=a.tid,l=a.name,o=a.ctype,r=a.content,c=e.adminInfo.cid;"添加术语"===e.dialogTitle?Object(s["e"])(c,i,l,o,r).then((function(t){0===t.code&&(e.queryData(),e.dialogVisible=!1,e.$message({type:"success",message:"添加成功!",duration:1e3}))})):Object(s["M"])(n,c,i,l,o,r).then((function(t){0===t.code&&(e.dialogVisible=!1,e.queryData(),e.$message({type:"success",message:"更新成功",duration:1e3}))})),e.$refs.elUpload&&e.$refs.elUpload.clearFiles()}))},updateOrAddGroup:function(){var e=this;this.$refs["ruleGroupForm"].validate((function(t){if(!t)return!1;var a=e.groupForm,n=a.id,i=a.name,l=e.adminInfo.cid;"添加术语分组"===e.groupDialogTitle?Object(s["f"])(l,i).then((function(t){0===t.code&&(e.queryGroupDate(),e.queryAllGroup(),e.groupDialogVisible=!1,e.$message({type:"success",message:"添加成功!",duration:1e3}))})):Object(s["N"])(n,l,i).then((function(t){0===t.code&&(e.queryGroupDate(),e.queryAllGroup(),e.groupDialogVisible=!1,e.$message({type:"success",message:"更新成功!",duration:1e3}))}))}))},resetForm:function(){this.replyForm={id:"",cid:"",ctype:1,content:"",tid:"",name:""}},resetGroupForm:function(){this.groupForm={id:"",cid:"",name:""}},handleEdit:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(this.replyForm[a]="state"===a?1===t[a]:t[a]);this.dialogTitle="编辑术语",this.dialogVisible=!0},handleGroupEdit:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(this.groupForm[a]=t[a]);this.groupDialogTitle="编辑术语分组",this.groupDialogVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("是否删除设备？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"reply"===a.activeName?Object(s["m"])(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total[a.activeName]-1)/a.pageSize);a.pageNo>t&&(a.pageNo=t),a.queryData(),a.$message({type:"success",message:"删除成功!",duration:1e3})}})):Object(s["n"])(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total[a.activeName]-1)/a.pageSize);a.groupPageNo>t&&(a.groupPageNo=t),a.queryGroupDate(),a.queryAllGroup(),a.$message({type:"success",message:"删除成功!",duration:1e3})}}))})).catch((function(){a.$message({type:"info",message:"取消",duration:1e3})}))}}},u=c,d=a("2877"),p=Object(d["a"])(u,n,i,!1,null,"dd2180a8",null);t["default"]=p.exports},e37e:function(e,t,a){},e3ec:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入标题",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.replyName,callback:function(t){e.replyName=t},expression:"replyName"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryDataByCondition}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.addWord}},[e._v("添加")])],1),a("el-table",{attrs:{data:e.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"words",label:"敏感词","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.editWord(t.$index,t.row)}}},[e._v("修改")]),a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[20,40,60,80],"page-size":e.limit,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],l=a("5530"),o=a("2f62"),r=a("1c1e");function s(e,t,a,n){return r["a"].post("/user/sensitiveWords/pageList",{cid:e,words:t,page:a,rows:n})}function c(e,t){return r["a"].post("/user/sensitiveWords/add",{cid:e,words:t})}function u(e,t,a){return r["a"].post("/user/sensitiveWords/update",{id:e,cid:t,words:a})}function d(e){return r["a"].post("/user/sensitiveWords/deletes",{ids:e})}var p={name:"SensitiveWords",data:function(){return{tableData:[],replyName:"",total:0,page:1,limit:20}},computed:Object(l["a"])({},Object(o["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryData()},methods:{queryData:function(){var e=this;s(this.adminInfo.cid,this.replyName,this.page,this.limit).then((function(t){0===t.code&&(e.tableData=t.data.rows||[],e.total=t.data.records||0)})).catch((function(t){e.$alert(t,"查询敏感词失败",{type:"error"})}))},queryDataByCondition:function(){this.handleCurrentChange(1)},handleSizeChange:function(e){this.limit!==e&&(this.limit=e,this.queryData())},handleCurrentChange:function(e){this.page=e,this.queryData()},addWord:function(){var e=this;this.$prompt("请输入敏感词","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"敏感词不能是空的"}).then((function(t){var a=t.value;c(e.adminInfo.cid,a).then((function(t){0===t.code&&(e.$message({type:"success",message:"添加成功!",duration:1e3}),e.queryData())}))})).catch((function(){}))},editWord:function(e,t){var a=this;this.$prompt("请输入新的敏感词","提示",{inputValue:t.words,confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"敏感词不能是空的"}).then((function(e){var n=e.value;u(t.id,a.adminInfo.cid,n).then((function(e){0===e.code&&(a.queryData(),a.$message({type:"success",message:"更新成功",duration:1e3}))}))})).catch((function(){}))},handleDelete:function(e,t){var a=this;console.log(t),this.$confirm("确认删除该敏感词？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){d(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total-1)/a.limit);a.page>t&&(a.page=t),a.queryData(),a.$message({type:"success",message:"删除成功!",duration:1e3})}}))})).catch((function(){}))}}},m=p,h=a("2877"),f=Object(h["a"])(m,n,i,!1,null,"79d1d990",null);t["default"]=f.exports},faec:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-wrap"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入微信昵称",clearable:"",minlength:"1",maxlength:"50","show-word-limit":""},model:{value:e.wechatnick,callback:function(t){e.wechatnick=t},expression:"wechatnick"}}),a("el-input",{staticStyle:{width:"220px","margin-left":"10px"},attrs:{placeholder:"请输入好友昵称",clearable:"",minlength:"1",maxlength:"50","show-word-limit":""},model:{value:e.friendnick,callback:function(t){e.friendnick=t},expression:"friendnick"}}),a("el-select",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{placeholder:"请选择消息类型",filterable:"",clearable:""},model:{value:e.contenttype,callback:function(t){e.contenttype=t},expression:"contenttype"}},e._l(e.contentTypeState,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{placeholder:"群聊",filterable:"",clearable:""},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeState,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{placeholder:"发送状态",filterable:"",clearable:""},model:{value:e.issend,callback:function(t){e.issend=t},expression:"issend"}},e._l(e.sendState,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})})),1),a("el-date-picker",{staticStyle:{width:"360px","margin-left":"10px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.timePick,callback:function(t){e.timePick=t},expression:"timePick"}}),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.queryData}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.handleDownload}},[e._v("导出数据")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"wechatno",label:"微信号"}}),a("el-table-column",{attrs:{prop:"wechatnick",label:"微信昵称"}}),a("el-table-column",{attrs:{prop:"friendno",label:"好友(群)号"}}),a("el-table-column",{attrs:{prop:"friendnick",label:"好友(群)昵称"}}),a("el-table-column",{attrs:{prop:"content",label:"消息内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{attrs:{title:t.row.content},domProps:{textContent:e._s(t.row.content)}})]}}])}),a("el-table-column",{attrs:{prop:"contenttype",label:"消息类型",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.contentTypeMap[t.row.contenttype]||t.row.contenttype)}})]}}])}),a("el-table-column",{attrs:{label:"发送消息",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return["true"===t.row.issend?a("span",{staticStyle:{color:"#67c23a"},domProps:{textContent:e._s("发送的消息")}}):a("span",{staticStyle:{color:"#e6a23c"},domProps:{textContent:e._s("收到的消息")}})]}}])}),a("el-table-column",{attrs:{label:"消息时间",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":[20,40,80,160],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},i=[],l=(a("d81d"),a("d3b7"),a("5530")),o=a("5a0c"),r=a.n(o),s=a("2f62"),c=a("a97a"),u={name:"MessageLog",data:function(){return{tableData:[],wechatnick:"",friendnick:"",issend:"",sendState:[{id:"issend0",value:"false",label:"收到的消息"},{id:"issend1",value:"true",label:"发送的消息"}],contenttype:"",contentTypeState:[{id:"contentTypeState0",value:0,label:"未知内容"},{id:"contentTypeState1",value:1,label:"文本内容"},{id:"contentTypeState2",value:2,label:"图片消息"},{id:"contentTypeState3",value:3,label:"语音消息"},{id:"contentTypeState4",value:4,label:"视频消息"},{id:"contentTypeState5",value:5,label:"系统消息"},{id:"contentTypeState6",value:6,label:"链接消息"},{id:"contentTypeState7",value:7,label:"扩展的链接消息"},{id:"contentTypeState8",value:8,label:"文件发送"},{id:"contentTypeState9",value:9,label:"名片"},{id:"contentTypeState10",value:10,label:"位置信息"},{id:"contentTypeState11",value:11,label:"红包"},{id:"contentTypeState12",value:12,label:"转账"},{id:"contentTypeState13",value:13,label:"小程序"},{id:"contentTypeState14",value:14,label:"Emoji"},{id:"contentTypeState15",value:15,label:"群管理消息"},{id:"contentTypeState16",value:16,label:"领取红包消息"},{id:"contentTypeState17",value:17,label:"群聊系统消息"},{id:"contentTypeState18",value:18,label:"公众号文章"},{id:"contentTypeState19",value:19,label:"语音通话"},{id:"contentTypeState20",value:20,label:"视频通话"},{id:"contentTypeState21",value:21,label:"服务通知"},{id:"contentTypeState22",value:22,label:"引用通知"},{id:"contentTypeState99",value:99,label:"不支持的消息"}],contentTypeMap:{0:"未知内容",1:"文本内容",2:"图片消息",3:"语音消息",4:"视频消息",5:"系统消息",6:"链接消息",7:"扩展的链接消息",8:"文件发送",9:"名片",10:"位置信息",11:"红包",12:"转账",13:"小程序",14:"Emoji",15:"群管理消息",16:"领取红包消息",17:"群聊系统消息",18:"公众号文章",19:"语音通话",20:"视频通话",21:"服务通知",22:"引用通知",99:"不支持的消息"},type:"",typeState:[{id:"typeState0",value:0,label:"聊天消息"},{id:"typeState1",value:1,label:"群消息"}],pageNo:1,pageSize:20,total:0,timePick:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},computed:Object(l["a"])({},Object(s["d"])({adminInfo:"adminInfo"})),mounted:function(){this.queryData()},methods:{queryData:function(){var e=this,t="",a="";this.timePick&&(t=r()(this.timePick[0]).format("YYYY-MM-DD"),a=r()(this.timePick[1]).format("YYYY-MM-DD")),Object(c["C"])(this.adminInfo.cid,this.wechatnick,this.friendnick,this.issend,this.contenttype,this.type,this.pageNo,this.pageSize,t,a).then((function(t){0===t.code&&(e.tableData=t.data.rows||[],e.total=t.data.records||0)}))},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryData())},handleCurrentChange:function(e){this.pageNo=e,this.queryData()},handleDelete:function(e,t){var a=this;this.$confirm("是否删除记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["k"])(t.id).then((function(e){if(0===e.code){var t=Math.ceil((a.total[a.activeName]-1)/a.pageSize);a.pageNo>t&&(a.pageNo=t),a.queryData(),a.$message({type:"success",message:"删除成功!",duration:1e3})}}))})).catch((function(){a.$message({type:"info",message:"取消",duration:1e3})}))},handleDownload:function(){var e=this,t=(new Date).getTime();a.e("chunk-49658c7c").then(a.bind(null,"4bf8")).then((function(a){var n=["微信号","微信昵称","好友(群)号","好友(群)昵称","消息内容","消息类型","发送消息","消息时间"],i=["wechatno","wechatnick","friendno","friendnick","content","contenttype","issend","createTime"],l=e.formatJson(i);a.export_json_to_excel({header:n,data:l,filename:"聊天记录".concat(t)}),e.downloadLoading=!1}))},formatJson:function(e){var t=this;return this.tableData.map((function(a){return e.map((function(e){return"createTime"===e?new Date(a[e]).toLocaleString():"contenttype"===e?t.contentTypeMap[a[e]]:a[e]}))}))}}},d=u,p=a("2877"),m=Object(p["a"])(d,n,i,!1,null,"3d4f68bc",null);t["default"]=m.exports}}]);