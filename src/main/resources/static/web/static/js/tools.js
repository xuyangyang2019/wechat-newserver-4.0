(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tools"],{"053f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-tools"},[a("div",{staticClass:"toggle-wechat"},[e.notShowSelect.indexOf(e.currentNav)<0?[a("p",[e._v("当前微信号:")]),a("el-select",{staticClass:"el-select-wechats-list",staticStyle:{"margin-left":"10px"},attrs:{size:"small",clearable:"",placeholder:"请选择微信"},on:{change:function(t){return e.queryInfoByWechatId(t)}},model:{value:e.currentWeChatId,callback:function(t){e.currentWeChatId=t},expression:"currentWeChatId"}},e._l(e.wechats,(function(e,t){return a("el-option",{key:t,attrs:{label:e.WeChatNick,value:e.WeChatId,disabled:!e.IsOnline}})})),1)]:e._e()],2),a(e.currentNav,{tag:"component"})],1)},s=[],i=(a("d3b7"),a("5530")),r=a("2f62"),o=function(){return a.e("tools").then(a.bind(null,"7e1d"))},l=function(){return a.e("tools").then(a.bind(null,"d00f"))},c=function(){return a.e("tools").then(a.bind(null,"2619"))},u=function(){return a.e("tools").then(a.bind(null,"0c96"))},d=function(){return a.e("tools").then(a.bind(null,"f053"))},p=function(){return a.e("tools").then(a.bind(null,"092c"))},h=function(){return a.e("tools").then(a.bind(null,"863e"))},f=function(){return a.e("tools").then(a.bind(null,"d89f"))},m=function(){return a.e("tools").then(a.bind(null,"4b64"))},b=function(){return a.e("tools").then(a.bind(null,"a4b1"))},y=function(){return a.e("tools").then(a.bind(null,"7852"))},g=function(){return a.e("tools").then(a.bind(null,"0d8f"))},v=function(){return a.e("tools").then(a.bind(null,"45ce"))},k=function(){return a.e("tools").then(a.bind(null,"0c7e"))},C=function(){return a.e("tools").then(a.bind(null,"eb1e"))},x={components:{newFriend:o,addFriend:l,addFriendAuto:c,searchPhones:u,autoReply:p,autoTask:d,clearFans:g,materialLibrary:v,phoneManagement:h,qrCode:f,takeLabels:m,friendsFilter:b,autoTaskList:y,moneyStatistics:k,wechatCount:C},data:function(){return{notShowSelect:["newFriend","addFriendAuto","phoneManagement","friendsFilter","autoTaskList","materialLibrary","moneyStatistics","wechatCount"]}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(r["d"])("tools",{currentNav:"currentNav"})),Object(r["b"])({wechats:"conversation/wechats"})),{},{currentWeChatId:{get:function(){return this.$store.getters["tools/currentWeChatId"]},set:function(e){this.$store.commit("tools/SET_CURRENT_WECHAT_IDS",{nav:this.currentNav,weChatId:e})}}}),methods:{queryInfoByWechatId:function(e){if(e)switch(this.currentNav){case"addFriend":this.$store.dispatch("nedb/SetAddFriends",e);break;case"takeLabels":this.$store.dispatch("nedb/SetToolsLabels",e),this.$store.dispatch("nedb/SetToolsFriends",e),this.$store.dispatch("nedb/SetToolsRooms",e);break;case"clearFans":this.$store.commit("tools/SET_CLEAR_RESULT",{}),this.$store.dispatch("nedb/SetZombies",e);break;case"qrCode":this.$store.dispatch("nedb/SetQrCode",e),e&&this.$store.dispatch("websocket/PullWeChatQrCodeTask",e);break;default:break}},resetWeChatId:function(){this.currentWeChatId="",this.$store.dispatch("nedb/SetToolsFriends","")}}},w=x,S=(a("9b0d"),a("2877")),T=Object(S["a"])(w,n,s,!1,null,"b1cfe8f0",null);t["default"]=T.exports},"092c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"auto-reply"},[n("div",{staticClass:"auto-reply-title"},[n("p",{staticStyle:{color:"#999999","font-size":"14px"}},[e._v("微信自动回复")]),n("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#fff",width:"105px",height:"32px"},attrs:{size:"small"},on:{click:e.showReplyDialog}},[e._v(" 新增回复 ")])],1),n("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:e.autoReply,stripe:"",border:""}},[n("el-table-column",{attrs:{label:"匹配模式",prop:"keyType",width:"120px",formatter:e.keyTypeFomatter}}),n("el-table-column",{attrs:{label:"关键词",prop:"keyWord"}}),n("el-table-column",{attrs:{label:"消息类型",prop:"resourceType",formatter:e.formateMsgType,width:"80"}}),n("el-table-column",{attrs:{label:"回复内容",prop:"returnString"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{class:[{"chat-link":6===t.row.resourceType},{"chat-app":13===t.row.resourceType}],domProps:{innerHTML:e._s(e.decodeChat(t.row))}})]}}])}),n("el-table-column",{attrs:{label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:e._s(e.$options.filters.timeFilter(t.row.createTime))}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticStyle:{"background-color":"#fff",color:"#999999"},attrs:{size:"small"},on:{click:function(a){return e.showUpdateReply(t.row)}}},[e._v(" 编辑 ")]),n("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff"},attrs:{size:"small",type:"warning"},on:{click:function(a){return e.removeReply(t)}}},[e._v(" 删除 ")])]}}])})],1),n("el-dialog",{staticClass:"add-reply-dialog",attrs:{title:e.reply2Updated?"编辑关键词回复":"新增关键词回复","close-on-click-modal":!1,"show-close":!1,"append-to-body":"",visible:e.addReplyDialog},on:{"update:visible":function(t){e.addReplyDialog=t}}},[n("div",{staticClass:"reply-item"},[n("p",{staticClass:"reply-item-tip"},[e._v("微信")]),n("div",{staticStyle:{"margin-left":"10px"}},[n("el-select",{attrs:{size:"small",disabled:!!e.reply2Updated.id,clearable:"","collapse-tags":"",multiple:"",placeholder:"请选择微信"},model:{value:e.wechats2add,callback:function(t){e.wechats2add=t},expression:"wechats2add"}},e._l(e.wechats,(function(e,t){return n("el-option",{key:t,attrs:{label:e.WeChatNick,value:e.WeChatId,disabled:!e.IsOnline}})})),1)],1)]),n("div",{staticClass:"reply-item"},[n("p",{staticClass:"reply-item-tip"},[e._v("匹配方式")]),n("div",{staticStyle:{"margin-left":"10px"}},[n("el-radio",{attrs:{size:"small",label:"0"},model:{value:e.keyType,callback:function(t){e.keyType=t},expression:"keyType"}},[e._v("精准匹配")]),n("el-radio",{attrs:{size:"small",label:"1"},model:{value:e.keyType,callback:function(t){e.keyType=t},expression:"keyType"}},[e._v("模糊匹配")])],1)]),n("div",{staticClass:"reply-item"},[n("p",{staticClass:"reply-item-tip"},[e._v("关键词")]),n("el-input",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!!e.reply2Updated.id,maxlength:"20",size:"mini","show-word-limit":"",clearable:"",placeholder:"输入关键词"},model:{value:e.keyWord,callback:function(t){e.keyWord="string"===typeof t?t.trim():t},expression:"keyWord"}})],1),n("div",{staticClass:"reply-content"},[n("p",{staticClass:"reply-item-tip"},[e._v("回复内容")]),n("div",{staticClass:"setting-reply-content"},[n("ul",{staticClass:"add-reply-aside"},e._l(e.msgTypes,(function(t,a){return n("li",{key:a,class:{"li-selected":e.msgType===t.type},on:{click:function(a){return e.toggleType(t.type)}}},[n("i",{staticClass:"fa",class:t.icon,attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(t.name)+" ")])})),0),"Text"===e.msgType?n("el-input",{attrs:{type:"textarea",placeholder:"请输入内容",maxlength:"500","show-word-limit":"",resize:"none"},model:{value:e.returnString,callback:function(t){e.returnString="string"===typeof t?t.trim():t},expression:"returnString"}}):"Picture"===e.msgType?n("div",{staticClass:"type-content"},[e.pictureUrl?[n("img",{staticStyle:{"max-width":"400px","max-height":"190px"},attrs:{src:e.pictureUrl,alt:"图片"}}),n("div",{staticStyle:{display:"flex","align-items":"center",height:"32px"}},[n("p",{staticStyle:{"margin-right":"5px"},domProps:{textContent:e._s(e.pictureName)}}),n("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:e.deletePicture}})])]:[n("img",{staticStyle:{"margin-top":"30px"},attrs:{src:a("efb7"),alt:""}}),n("label",{staticStyle:{cursor:"pointer",padding:"5px"},attrs:{for:"addPicture"}},[n("i",{staticClass:"el-icon-plus"}),n("span",{staticStyle:{color:"#576c95","font-size":"14px"}},[e._v("添加图片")])]),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"pictureInputRef",attrs:{id:"addPicture",type:"file",accept:".jpg, .png, .jpeg"},on:{change:e.chosePicture}})]],2):"Voice"===e.msgType?n("div",{staticClass:"type-content"},[e.voiceUrl?[n("audio",{staticStyle:{"max-width":"400px","max-height":"190px","margin-top":"60px"},attrs:{src:e.voicePlayUrl,controls:""}}),n("div",{staticStyle:{display:"flex","align-items":"center",height:"32px"}},[n("p",{staticStyle:{"margin-right":"5px"},domProps:{textContent:e._s(e.voiceName)}}),n("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:e.deleteVoice}})])]:[n("img",{staticStyle:{"margin-top":"30px"},attrs:{src:a("0e06"),alt:""}}),n("label",{staticStyle:{cursor:"pointer",padding:"5px"},attrs:{for:"addVoice"}},[n("i",{staticClass:"el-icon-plus"}),n("span",{staticStyle:{color:"#576c95","font-size":"14px"}},[e._v("添加语音")])]),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"voiceInputRef",attrs:{id:"addVoice",type:"file",accept:".mp3, .amr"},on:{change:e.choseVoice}})]],2):"Video"===e.msgType?n("div",{staticClass:"type-content"},[e.videoUrl?[n("video",{staticStyle:{"max-width":"400px","max-height":"190px"},attrs:{src:e.videoUrl,controls:""}}),n("div",{staticStyle:{display:"flex","align-items":"center",height:"32px"}},[n("p",{staticStyle:{"margin-right":"5px"},domProps:{textContent:e._s(e.videoName)}}),n("i",{staticClass:"el-icon-delete",staticStyle:{cursor:"pointer"},on:{click:e.deleteVideo}})])]:[n("img",{staticStyle:{"margin-top":"30px"},attrs:{src:a("0e06"),alt:""}}),n("label",{staticStyle:{cursor:"pointer",padding:"5px"},attrs:{for:"addPicture"}},[n("i",{staticClass:"el-icon-plus"}),n("span",{staticStyle:{color:"#576c95","font-size":"14px"}},[e._v("添加视频")])]),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"videoInputRef",attrs:{id:"addPicture",type:"file",accept:".mp4"},on:{change:e.choseVideo}})]],2):"Link"===e.msgType||"WeApp"===e.msgType?n("div",{staticClass:"link-form"},e._l(e.resourcesDataList,(function(t,a){return n("div",{key:a,staticClass:"we-app-item",class:{"we-app-item-checked":e.rd2Send.Url===t.Url},attrs:{title:t.Title},on:{click:function(a){e.rd2Send=t}}},[n("img",{staticClass:"we-app-img",attrs:{src:t.Thumb,alt:""}}),n("p",{staticClass:"we-app-name ellipsis",domProps:{textContent:e._s(t.Title)}})])})),0):e._e()],1)]),n("span",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.resetData}},[e._v("取 消")]),e.reply2Updated?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.updateReplyById}},[e._v("立即更新")]):n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.createReply}},[e._v("立即添加")])],1)])],1)},s=[],i=(a("99af"),a("4160"),a("c975"),a("d81d"),a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("8a79"),a("5319"),a("498a"),a("159b"),a("5530")),r=a("2f62"),o=a("0e5c"),l=a("3496"),c=a("f067"),u={name:"AutoReply",data:function(){return{autoReply:[],addReplyDialog:!1,wechats2add:[],keyType:"0",keyWord:"",returnString:"",msgType:"Text",msgTypes:[{type:"Text",icon:"fa-file-text-o",name:"文本"},{type:"Picture",icon:"fa-file-image-o",name:"图片"},{type:"Voice",icon:"fa-microphone",name:"语音"},{type:"Video",icon:"fa-video-camera",name:"视频"},{type:"Link",icon:"fa-link",name:"链接"},{type:"WeApp",icon:"fa-product-hunt",name:"小程序"}],reply2Updated:{},pictureUrl:"",pictureName:"",voiceUrl:"",voicePlayUrl:"",voiceName:"",videoUrl:"",videoName:"",resourcesDataList:[],rd2Send:{}}},computed:Object(i["a"])({},Object(r["b"])({currentUser:"currentUser",wechats:"conversation/wechats",currentWeChatId:"tools/currentWeChatId"})),watch:{currentWeChatId:function(){this.queryConfig()}},created:function(){this.queryConfig()},methods:{showReplyDialog:function(){this.wechats2add=this.wechats.map((function(e){return e.WeChatId})),this.addReplyDialog=!0},toggleType:function(e){var t=this;this.msgType=e;var a=0;"Link"===e?a=6:"WeApp"===e?a=13:"shipinhao"===e&&(a=24),this.rd2Send={},a&&Object(l["s"])(this.currentUser.SupplierId,1,100,a,"").then((function(e){if(0===e.code&&e.data.rows){var a=[];e.data.rows.forEach((function(e){a.push(JSON.parse(e.content))})),t.resourcesDataList=a}else t.resourcesDataList=[]}))},chosePicture:function(){var e=this,t=this.$refs.pictureInputRef.files;if(t[0]){var a=t[0],n=a.type.indexOf("image")>=0,s=a.size>0&&a.size/1024/1024<20;if(!n)return void this.$alert("图片格式不对！","提示",{type:"warning"});if(!s)return void this.$alert("上传图片大小不能超过 20MB!","提示",{type:"warning"});var i=new FormData;i.append("myfile",a);var r=this.$loading({lock:!0,text:"文件上传中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["a"])(i).then((function(t){e.pictureName=a.name,e.pictureUrl=t.data.url,r.close()})).catch((function(t){e.$alert("".concat(t),"文件上传失败",{type:"error"}),r.close()}))}},deletePicture:function(){this.pictureName="",this.pictureUrl=""},choseVideo:function(){var e=this,t=this.$refs.videoInputRef.files;if(t[0]){var a=t[0],n="video/mp4"===a.type,s=a.size>0&&a.size/1024/1024<20;if(!n)return void this.$alert("上传视频只能是 MP4 格式!","提示",{type:"warning"});if(!s)return void this.$alert("上传视频大小不能超过 20MB!","提示",{type:"warning"});var i=new FormData;i.append("myfile",a);var r=this.$loading({lock:!0,text:"文件上传中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["a"])(i).then((function(t){e.videoName=a.name,e.videoUrl=t.data.url,r.close()})).catch((function(t){e.$alert("".concat(t),"文件上传失败",{type:"error"}),r.close()}))}},deleteVideo:function(){this.videoUrl="",this.videoName=""},choseVoice:function(){var e=this,t=this.$refs.voiceInputRef.files;if(t[0]){var a=t[0],n=a.size,s=a.name,i=s.replace(/.+\./,"").toLowerCase();if(n>104857600||n<=0)return void this.$alert("语音大小不能超过 10MB!","提示",{type:"warning"});if(["amr","mp3"].indexOf(i)<0)return void this.$alert("语音格式不对!","提示",{type:"warning"});var r=new FormData;r.append("myfile",a),"mp3"===i?r.append("isMp3ToAmr",!0):"amr"===i&&r.append("isAmrToMp3",!1);var l=new FormData;l.append("myfile",t[0]),"mp3"===i?l.append("isMp3ToAmr",!1):"amr"===i&&l.append("isAmrToMp3",!0),Object(o["a"])(l).then((function(t){e.voicePlayUrl=t.data.url})).catch((function(t){e.$message.error(t)}));var c=this.$loading({lock:!0,text:"文件上传中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["a"])(r).then((function(t){e.voiceName=a.name,e.voiceUrl=t.data.url,c.close()})).catch((function(t){e.$alert("".concat(t),"文件上传失败",{type:"error"}),c.close()}))}},deleteVoice:function(){this.voiceUrl="",this.voiceName=""},queryConfig:function(){var e=this;this.currentWeChatId&&Object(l["m"])(this.currentUser.SupplierId,this.currentWeChatId,"","","",1,1e3).then((function(t){0===t.code&&(e.autoReply=t.data.rows)})).catch((function(t){e.$message.error(t.message)}))},keyTypeFomatter:function(e){return 1===e.keyType?"模糊包含匹配":0===e.keyType?"精准完全匹配":"未知"},formateMsgType:function(e){return 1===e.resourceType?"文本":2===e.resourceType?"图片":3===e.resourceType?"语音":4===e.resourceType?"视频":6===e.resourceType?"链接":13===e.resourceType?"小程序":e.resourceType},createReply:function(){var e=this;if(0!==this.wechats2add.length)if(this.keyWord.trim()){var t={Text:1,Picture:2,Voice:3,Video:4,Link:6,WeApp:13},a=this.returnString;if("Picture"===this.msgType?a=this.pictureUrl:"Voice"===this.msgType?a=this.voiceUrl:"Video"===this.msgType?a=this.videoUrl:("Link"===this.msgType||"WeApp"===this.msgType)&&(a=JSON.stringify(this.rd2Send)),a.trim())for(var n=this.wechats2add.length||0,s=function(s){var i=e.wechats2add[s];setTimeout((function(){Object(l["b"])(e.currentUser.SupplierId,i,e.keyWord,"0"===e.keyType?0:1,t[e.msgType],a),s===n-1&&(e.queryConfig(),e.resetData())}),50*s)},i=0;i<n;i++)s(i);else this.$alert("回复内容不能为空！","提示",{type:"warning"})}else this.$alert("关键词不能为空！","提示",{type:"warning"});else this.$alert("请选择微信！","提示",{type:"warning"})},resetData:function(){this.addReplyDialog=!1,this.keyWord="",this.returnString="",this.reply2Updated={},this.keyType="0",this.rd2Send={}},removeReply:function(e){var t=this;this.$confirm("确定删除 ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["h"])(e.row.id).then((function(){t.queryConfig()})).catch((function(e){t.$message.error(e.message)}))})).catch((function(){return!1}))},decodeChat:function(e){var t=e.returnString,a=new RegExp(/^{.+}$/),n={};a.test(t)&&(n=JSON.parse(t));var s="",i="";switch(e.resourceType){case"Text":case 1:return t;case"Picture":case 2:return'<img class="chat-img" src="'.concat(t,'"  alt="图片"/>');case"Voice":case 3:return s=t.endsWith(".amr")?t.replace(/.amr$/,".mp3"):t.replace(/.mp3:[0-9]+/,".mp3"),'<audio src="'.concat(s,'" alt="语音" controls></audio>');case"Video":case 4:return'<video class="video-box" src="'.concat(t,'" type="video/mp4" alt="视频" controls></video>');case"Link":case 6:return i='\n                    <span class="link-title">'.concat(n.Title,'</span>\n                    <div class="link-content">\n                      <span class="link-des">').concat(n.Des,'</span>\n                      <img class="link-img" src="').concat(n.Thumb,'" alt="链接图片" />\n                    </div>\n                    <div class="link-type">').concat(n.TypeStr,"</div>\n                    "),i;case"WeApp":case 13:var r=c,o="无效小程序",l="无效小程序",u="",d="小程序";return"string"===typeof t&&a.test(t)&&(n=JSON.parse(t),r=n.Icon&&"undefined"!==typeof n.Icon?n.Icon:c,o=n.Source,l=n.Title||n.Des,u=n.Thumb,d=n.TypeStr?n.TypeStr:"小程序"),i='\n              <div class="app-des">\n              <img class="app-icon" src="'.concat(r,'" alt="icon" />\n              <span class="app-source ellipsis">').concat(o,'</span>\n              </div>\n              <div class="app-title ellipsis">').concat(l,'</div>\n              <img class="app-img" src="').concat(u,'" />\n              <div class="app-typestr">').concat(d,"</div>\n               "),i;default:return"不支持的消息类型".concat(e.ContentType)}},showUpdateReply:function(e){var t=this;console.log(e);var a={1:"Text",2:"Picture",3:"Voice",4:"Video",6:"Link",13:"WeApp"};this.reply2Updated=e,this.wechats2add=[e.wechatid],this.keyWord=e.keyWord,this.keyType=1===e.keyType?"1":"0",this.msgType=a[e.resourceType],1===e.resourceType?this.returnString=e.returnString:2===e.resourceType?this.pictureUrl=e.returnString:3===e.resourceType?this.voiceUrl=e.returnString:4===e.resourceType?this.videoUrl=e.returnString:6===e.resourceType?(this.rd2Send=JSON.parse(e.returnString),Object(l["s"])(this.currentUser.SupplierId,1,100,6,"").then((function(e){if(0===e.code&&e.data.rows){var a=[];e.data.rows.forEach((function(e){a.push(JSON.parse(e.content))})),t.resourcesDataList=a}else t.resourcesDataList=[]}))):13===e.resourceType&&(this.rd2Send=JSON.parse(e.returnString),Object(l["s"])(this.currentUser.SupplierId,1,100,13,"").then((function(e){if(0===e.code&&e.data.rows){var a=[];e.data.rows.forEach((function(e){a.push(JSON.parse(e.content))})),t.resourcesDataList=a}else t.resourcesDataList=[]}))),this.addReplyDialog=!0},updateReplyById:function(){var e=this;if(this.keyWord.trim()){var t=this.returnString;if("Picture"===this.msgType?t=this.pictureUrl:"Voice"===this.msgType?t=this.voiceUrl:"Video"===this.msgType?t=this.videoUrl:("Link"===this.msgType||"WeApp"===this.msgType)&&(t=JSON.stringify(this.rd2Send)),t.trim()){var a={Text:1,Picture:2,Voice:3,Video:4,Link:6,WeApp:13};Object(l["u"])(this.reply2Updated.id,this.currentUser.SupplierId,this.currentWeChatId,this.keyWord,"0"===this.keyType?0:1,a[this.msgType],t).then((function(){e.queryConfig(),e.resetData()})).catch((function(t){e.$message.error(t.message)}))}else this.$alert("回复内容不能为空！","提示",{type:"warning"})}else this.$alert("关键词不能为空！","提示",{type:"warning"})}}},d=u,p=(a("aa72"),a("2877")),h=Object(p["a"])(d,n,s,!1,null,"5baf0e0e",null);t["default"]=h.exports},"0c7e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"money-statistics"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择任务类型"},model:{value:e.moneyType,callback:function(t){e.moneyType=t},expression:"moneyType"}},e._l(e.moneyTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.timePick,callback:function(t){e.timePick=t},expression:"timePick"}}),a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff",border:"solid #ff9f00 1px","margin-left":"10px"},attrs:{plain:"",size:"small"},on:{click:e.queryData}},[e._v(" 开始搜索 ")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"微信id",prop:"wechatid"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{domProps:{textContent:e._s(e.wechatsNameMap[n.wechatid]||n.wechatid)}})]}}])}),a("el-table-column",{attrs:{label:"总金额(元)",prop:"amount"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.amount?a("div",{domProps:{textContent:e._s(n.amount/100)}}):a("div",{domProps:{textContent:e._s(n.amount)}})]}}])}),a("el-table-column",{attrs:{label:"日期",prop:"day"}}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showMoneyDetail(n)}}},[e._v("详情")])]}}])})],1),a("el-dialog",{staticClass:"money-detail-dialog",attrs:{title:"对账单","close-on-click-modal":!1,"show-close":!0,"append-to-body":"",visible:e.moneyDetailDialog},on:{"update:visible":function(t){e.moneyDetailDialog=t}}},[a("el-table",{attrs:{data:e.detailData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"微信昵称",prop:"wechatid"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{domProps:{textContent:e._s(e.wechatsNameMap[n.wechatid]||n.wechatid)}})]}}])}),a("el-table-column",{attrs:{label:"发送者昵称",prop:"friendname"}}),a("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{domProps:{textContent:e._s(e.moneyTypeMapMap[n.type]||n.type)}})]}}])}),a("el-table-column",{attrs:{label:"金额(元)",prop:"amount"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[n.amount?a("div",{domProps:{textContent:e._s(n.amount/100)}}):a("div",{domProps:{textContent:e._s(n.amount)}})]}}])}),a("el-table-column",{attrs:{label:"日期",prop:"day"}})],1),a("span",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},s=[],i=(a("4160"),a("159b"),a("5530")),r=a("2f62"),o=a("5a0c"),l=a.n(o),c=a("d58b"),u=a("2889"),d={name:"MoneyStatistics",data:function(){return{moneyType:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},timePick:"",tableData:[],detailData:[],moneyTypeMapMap:{0:"红包",1:"转账"},moneyTypes:[{value:0,label:"红包"},{value:1,label:"转账"}],moneyDetailDialog:!1,wechatsNameMap:{}}},computed:Object(i["a"])({},Object(r["b"])({currentUser:"currentUser"})),mounted:function(){var e=this;Object(u["e"])(this.currentUser.SupplierId,1,200,"","","","").then((function(t){if(0===t.code&&t.data.rows){var a={};t.data.rows.forEach((function(e){a[e.wechatid]=e.wechatnick})),e.wechatsNameMap=a}}))},methods:{queryData:function(){var e=this,t="",a="";this.timePick&&(t=l()(this.timePick[0]).format("YYYY-MM-DD"),a=l()(this.timePick[1]).format("YYYY-MM-DD")),t&&a?Object(c["e"])(this.currentUser.SupplierId,this.moneyType,t,a).then((function(t){0===t.code&&(e.tableData=t.data)})).catch((function(t){e.$alert(t,"提示",{type:"warning"})})):this.$message.warning("请设置时间！")},showMoneyDetail:function(e){var t=this,a=e.day,n=new Date(e.day).getTime()+864e5;n=l()(n).format("YYYY-MM-DD"),Object(c["f"])(this.currentUser.SupplierId,this.moneyType,e.wechatid,a,n).then((function(e){0===e.code&&(t.detailData=e.data,t.moneyDetailDialog=!0)})).catch((function(e){t.$alert(e,"提示",{type:"warning"})}))}}},p=d,h=(a("4d1a"),a("2877")),f=Object(h["a"])(p,n,s,!1,null,"cba1c994",null);t["default"]=f.exports},"0c96":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search-phones"},[a("div",{staticClass:"set-parameters"},[a("el-input",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{placeholder:"请输入手机号/微信号",size:"small",clearable:"",maxlength:"20","show-word-limit":""},model:{value:e.phonenumber,callback:function(t){e.phonenumber="string"===typeof t?t.trim():t},expression:"phonenumber"}}),a("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.timeRange,callback:function(t){e.timeRange=t},expression:"timeRange"}}),a("el-button",{staticStyle:{"margin-left":"10px","background-color":"#ff9f00",color:"#ffffff",border:"solid #ff9f00 1px"},attrs:{size:"small",plain:""},on:{click:e.queryPhonesList}},[e._v(" 开始搜索 ")])],1),a("el-table",{attrs:{data:e.phonesList,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"微信号",prop:"wechatid",width:"170px"}}),a("el-table-column",{attrs:{label:"微信昵称",width:"170px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.wechatsNameMap[t.row.wechatid]||t.row.wechatid)}})]}}])}),a("el-table-column",{attrs:{label:"号码",prop:"phonenumber"}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.timeFilter(t.row.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"是否执行"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(0===t.row.state?"已执行":"未执行")}})]}}])}),a("el-table-column",{attrs:{label:"任务结果",prop:"task_result"}})],1),a("div",{staticClass:"data-count"},[a("span",[e._v("总的号码数："+e._s(e.totalSize))]),a("span",[e._v("添加失败的号码数："+e._s(e.addFailSize))]),a("span",[e._v("没有用户号码数："+e._s(e.notUseSize))])]),a("el-pagination",{staticStyle:{margin:"0 auto"},attrs:{"current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},s=[],i=a("5530"),r=a("2f62"),o=a("3496"),l={name:"ToolsSearchPhones",data:function(){return{addFailSize:0,phonesList:[],notUseSize:0,totalSize:0,currentPage:1,pageSize:20,phonenumber:"",timeRange:""}},computed:Object(i["a"])({},Object(r["b"])({currentWeChatId:"tools/currentWeChatId",wechatsNameMap:"conversation/wechatsNameMap"})),created:function(){this.queryPhonesList()},methods:{queryPhonesList:function(){var e=this;if(this.currentWeChatId){var t=this.timeRange&&this.timeRange[0]?this.transformTime(this.timeRange[0]):"",a=this.timeRange&&this.timeRange[1]?this.transformTime(this.timeRange[1]):"";Object(o["p"])(this.currentWeChatId,this.phonenumber,t,a,this.currentPage,this.pageSize).then((function(t){0===t.code?(e.addFailSize=t.data&&t.data.addFailSize?t.data.addFailSize:0,e.phonesList=t.data&&t.data.list?t.data.list:[],e.notUseSize=t.data&&t.data.notUseSize?t.data.notUseSize:0,e.totalSize=t.data&&t.data.totalSize?t.data.totalSize:0):e.$message({type:"error",message:"查询失败！",duration:1e3})})).catch((function(t){e.$message.error(t.message)}))}else this.addFailSize=0,this.phonesList=[],this.notUseSize=0,this.totalSize=0},handleSizeChange:function(e){this.size=e,this.queryPhonesList()},handleCurrentChange:function(e){this.currentPage=e,this.queryPhonesList()},transformTime:function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),o=a+n+s+i+r;return o}}},c=l,u=(a("2013"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"28aa4fb0",null);t["default"]=d.exports},"0d8f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clear-fans"},[a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:e.form,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"朋友圈检测"}},[a("el-switch",{attrs:{disabled:""},model:{value:e.form.queryCircle,callback:function(t){e.$set(e.form,"queryCircle",t)},expression:"form.queryCircle"}})],1),a("el-form-item",{attrs:{label:"发送内容"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{size:"small",placeholder:"可以不填，默认是无打扰模式",maxlength:"100",clearable:""},model:{value:e.form.sendInfo,callback:function(t){e.$set(e.form,"sendInfo",t)},expression:"form.sendInfo"}})],1),a("el-form-item",{attrs:{label:"最大数量"}},[a("el-input-number",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",min:0,max:1e4,label:"描述文字"},model:{value:e.form.maxNumber,callback:function(t){e.$set(e.form,"maxNumber",t)},expression:"form.maxNumber"}}),a("span",[e._v("默认数0，检测所有好友")])],1),a("el-form-item",{staticClass:"check-circle",attrs:{label:"免检时间"}},[a("el-input",{staticClass:"check-circle-input",attrs:{size:"small",placeholder:"请设置检测时间",maxlength:"10","show-word-limit":""},model:{value:e.form.skipHour,callback:function(t){e.$set(e.form,"skipHour",t)},expression:"form.skipHour"}}),a("span",[e._v("跳过多少小时内有互动的好友（聊天，朋友圈互动,上次已检测等）")])],1),a("el-form-item",{staticClass:"el-form-btn"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.onSubmit(1)}}},[e._v("开始")]),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return e.onSubmit(2)}}},[e._v("停止")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.fetchLastClearInfo(e.currentWeChatId)}}},[e._v("获取清粉记录")]),a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff"},attrs:{size:"small",type:"warning"},on:{click:function(t){return e.clearLocalData(e.currentWeChatId)}}},[e._v(" 删除本地记录 ")])],1)],1),a("div",{staticClass:"clear-result"},[a("p",{staticStyle:{padding:"10px 0","font-weight":"600"}},[e._v(" 手机上的最后一次的清粉结果： "),e.clearResult.StartTime?e._e():a("span",[e._v("点击 获取清粉记录 按钮获取")])]),e.clearResult.StartTime?a("el-row",{staticClass:"line-data",attrs:{type:"flex",align:"middle"}},[a("p",[a("span",[e._v("开始时间：")]),a("span",{domProps:{textContent:e._s(e.$options.filters.timeFilter(e.clearResult.StartTime))}})]),a("p",[a("span",[e._v("结束时间：")]),a("span",{domProps:{textContent:e._s(e.$options.filters.timeFilter(e.clearResult.EndTime))}})]),a("p",[a("span",[e._v("状态：")]),a("span",{domProps:{textContent:e._s(e.clearResult.IsFinished?"已完成":"进行中")}})]),a("p",[a("span",[e._v("筛选数量：")]),a("span",{domProps:{textContent:e._s(e.clearResult.Count)}})]),a("p",[a("span",[e._v("跳过的数量：")]),a("span",{domProps:{textContent:e._s(e.clearResult.SkipCount)}})]),a("p",[a("span",[e._v("僵尸粉数量：")]),a("span",{domProps:{textContent:e._s(e.clearResult.totalData?e.clearResult.totalData.length:0)}})]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(t){return e.showZombies(e.clearResult.totalData)}}},[e._v(" 查看僵尸粉 ")])],1):e._e()],1),a("p",{staticStyle:{padding:"10px 0","font-weight":"600"}},[e._v("实时清粉通知")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"任务id",prop:"TaskId",width:"180px"}}),a("el-table-column",{attrs:{label:"开始时间",prop:"ReqTime"}}),a("el-table-column",{attrs:{label:"结束时间",prop:"RspTime"}}),a("el-table-column",{attrs:{label:"筛选个数",prop:"Count",width:"80px"}}),a("el-table-column",{attrs:{label:"删除个数",prop:"DelCount",width:"80px"}}),a("el-table-column",{attrs:{label:"跳过个数",prop:"SkipCount",width:"80px"}}),a("el-table-column",{attrs:{label:"僵尸粉数量",prop:"Zombies"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[n.Zombies?a("span",{domProps:{textContent:e._s(n.Zombies.length)}}):a("span",{domProps:{textContent:e._s(n.Zombies)}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(t){return e.showZombies(n.Zombies)}}},[e._v("查看僵尸粉")])],1)]}}])}),a("el-table-column",{attrs:{label:"是否结束",prop:"IsFinished",width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{domProps:{textContent:e._s(n.IsFinished?"已结束":"未结束")}})]}}])})],1),a("el-dialog",{staticClass:"zomby-list-dialog",attrs:{title:"僵尸粉详情","append-to-body":"",visible:e.zombiesDialog,width:"50%"},on:{"update:visible":function(t){e.zombiesDialog=t}}},[e._l(e.zombiesList,(function(t){return a("el-tag",{key:t,staticStyle:{margin:"5px"},attrs:{type:"success"}},[e._v(" "+e._s(t)+" ")])})),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{disabled:""!==e.labelId2Send,clearable:"",placeholder:"输入标签名"},model:{value:e.labelName,callback:function(t){e.labelName=t},expression:"labelName"}}),a("el-select",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{clearable:"",placeholder:"请选择标签"},on:{change:e.labelChange},model:{value:e.labelId2Send,callback:function(t){e.labelId2Send=t},expression:"labelId2Send"}},e._l(e.toolsLabels,(function(e,t){return a("el-option",{key:t,attrs:{label:e.LabelName,value:e.LabelId}})})),1),e.zombiesList.length>0?a("el-button",{on:{click:function(t){return e.remarkZomby(e.zombiesList)}}},[e._v("打标签")]):e._e(),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.zombiesDialog=!1}}},[e._v("确 定")])],1)],2)],1)},s=[],i=(a("a15b"),a("5530")),r=a("2f62"),o=a("2c32"),l={name:"ToolsClearFans",data:function(){return{form:{onlyCheck:!0,queryCircle:!0,maxNumber:0,sendInfo:"",skipHour:72},zombiesDialog:!1,zombiesList:[],labelId2Send:"",labelName:""}},computed:Object(i["a"])({},Object(r["b"])({currentWeChatId:"tools/currentWeChatId",wechatsNameMap:"conversation/wechatsNameMap",tableData:"nedb/zombies",toolsLabels:"nedb/toolsLabels",toolsLabelIdMap:"nedb/toolsLabelIdMap",toolsLabelNameMap:"nedb/toolsLabelNameMap",clearResult:"tools/clearResult"})),methods:{onSubmit:function(e){var t=this.currentWeChatId;if(t)if(1===e){var a=this.form,n=a.onlyCheck,s=a.queryCircle,i=a.maxNumber,r=a.sendInfo,l=a.skipHour;Object(o["k"])(t,r,n,l,s?6:1,i);var c=this.wechatsNameMap[t]||t;this.$message({message:"微信：".concat(c,"，开始清理僵尸粉"),type:"success"})}else this.tableData[0]?(console.log(this.tableData[0].TaskId),Object(o["m"])(t,this.tableData[0].TaskId)):Object(o["m"])(t);else this.$message({message:"请先选择一个微信",type:"warning"})},clearLocalData:function(e){e&&this.$store.dispatch("nedb/ClearZombiesData",e)},fetchLastClearInfo:function(e){e&&Object(o["h"])(e)},showZombies:function(e){this.zombiesList=e||[],this.zombiesDialog=!0},labelChange:function(e){this.labelName=e?this.toolsLabelIdMap[e]:""},remarkZomby:function(e){var t=0;if(this.labelId2Send&&this.labelName)t=this.labelId2Send;else{if(!this.labelName)return void this.$alert("请输入或选择标签名","提示");this.toolsLabelNameMap[this.labelName]&&(t=this.toolsLabelNameMap[this.labelName])}var a={WeChatId:this.currentWeChatId,AddList:e.join(","),LabelId:t,LabelName:this.labelName};this.$store.dispatch("websocket/ContactLabelTask",a),this.zombiesDialog=!1}}},c=l,u=(a("7fa1"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"0d559824",null);t["default"]=d.exports},"0e06":function(e,t,a){e.exports=a.p+"static/img/tianjiashipin.png"},"0e5c":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("d3b7");var n=a("bc3a"),s=n.create({timeout:1e4});function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.append("packageName","com.jubo.pc"),new Promise((function(t,a){s({url:"http://127.0.0.1:10089/fileUpload2020",method:"post",data:e}).then((function(e){t(e)})).catch((function(e){a(e)}))}))}s.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",s.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}))},"0e6e":function(e,t,a){e.exports=a.p+"static/img/bg-search.png"},1004:function(e,t,a){},"191e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABMCAYAAACbHRIPAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAZKADAAQAAAABAAAATAAAAAD9wpi+AAAK/ElEQVR4Ae1da4xVVxVeZ+beecE8GBihDI/blJBa6HQIghghXJQobZMyJsRG9AfTWqOJpvZffxgFEqN/FPSP/WFk+KG2iaS0DUatwsUQFTRycQAVCAVKec7AnQfMe47rO3f2mX3uPfu87pmHYa/kzNl77bXX2Xd9Z++99tr7gLFx4450uVF2gIhSfGmKZoErY+Z4+4kTv8lEqz5Zq2xOdfVbnE2Btf+n36NFi5oc9xUrlqNIk7cFUpXJxBFvkWClxuZNXzSDiWopPwtk/vxWjWEYA35yXuVGb2/vIAtUegnpsmAWqK2trWdAeoNJu0uVubM1d6YskJAfXF5eTrg0BbOAaZo0MjISTDiglAOQ6upq4i4XsKoWExaIExR7yAIQGgxh4pm724DMXBP0k2ULaEBka8yCtAZkFoAgN0EDIltjFqQdXpayPdndROd/QjScU4ooC5a1EW3kUFlFg1KELnUQZfcQ9V9Ry6hKGlvz+nFX0PDwMOVyORobG1NIqNlYBjQ0NFBFRYVaKMYS/x5yL5s3VhQw0NBrh7n+bu8mn2iPBga0on2nvfVHBQPqASLqTxf5AxIVCPkXdLPRVHQroyoJzvdpY5SeIT+81PqyLr90sCHLSwuGimQ90f0z0YY0L90om2L9IjoBo0+n4VU/uzRAtmWIFm3O68ZbevQLRHG88aK1nzlMtGy7yBFhaMN8ExNxMJDmzp1ra+vv76e+vj47PxMJ/yFL1aoVuybBgAwm7dbdSMVD6BkyGNC6fl88ulkLohIyGFBcmI/tYSEURQdkbqr4MW68YqlgHDevzI0XTFuRVDKZLOKBMV3elOvDmRkdEDcXFR5PXOQ2UQ/3xKWd4Aq7kYrvJjsVvOiAYCy/9s5km/qv+ru3k9L+KYCLtY8ggHG0TeRiucOdRQgdhPt0ureqH1DapC4MhKHKrceonhqUf+rbRLgwVLn1mKB6FHIDAwOEC57WbPCw0MzoPUT+kVMBhqx/CsCQ1c8WMNAm/x6imkif4jf3qVfZNUlN/jYMY6deK36bl7dNyhSmFqXz65gRHpJkQsgFXpWsHy419BfOVao2Tuhz6wGJRILq6+sdk/jo6Cj19PQUzS+QnS6yDzm4uYF2I2Doi3wJ+vg3+eDQDpFz3gdu8Xrhq0Sj/Xk+DPrJ/d6xLIRXzrGMoOZtRC2vi5zzDr3Qj+eAAMamDk/9MDTWF+Pj41YVeFh1dXVW2u0PH/ywt2bLysoI6xUVKIODg7ZsHIccggHi1mrNsywQNyDxzCEanNgsoAGJzZTxKJq+2Sqe9s5aLTdv3KZtL+38ektLuto0jWxn57F3ojRWzyFRrCbVwRxy7ep1evnl19hxeCCVmFfGxqn97NlMRmL6JvWQ5Wsif4HT2bMFYKCOkSovM46tXp1OIxeUAg1ZpZzQE/sNfg2KGkOCW6pySR3PtLYFDAcrcEZsMSgqPPfcZ2n58qX05q/fpkzmLw4pbl4bMzIOpkfGFxCA0dXVRfDlo9L8+fMdC7BCPd3d3UWLsUIZrzz2vHHqUkkIv8hxMaWgogAL4PXSOslFbMOGtXT79t0iQMiklIu4kuU7ZOGYZClg4MkPHz5UNgBhi6i9Qyj10m/JlAIGFFw6KB6lvGPRuX37NsqeOUo/3rfXluPQ5WE7EyDhC0gAHb4iXrEirzJfxdMlECCWJr+0N27kowhLlizu7ezMdIRppu+Q5aUMmzlVVVWEcXxoaMiKnHrJhy3D/IOhCKEO9CL0BBEuD6vLVR5hFxGPQ4A06lEnVo7fz/b4ISc/9fzzWxPnz19INDcvfPHIb3/p+mgVMzIgMBbmBkEwHCbXuPakEVtramqyD4ADeLwA9+/fF48s/b4tw4conpnUg4Dmu2sm8+FTP+B2l/TBTmRAampqipoLo8UFCHoFQJEJ+mMjBD1lMKAY+/jgy9sJ1Ys5UNqHUn869OxG88DqV1gwzVeWr4zRfnYP3wNTZEACP2G2CvqE7K1mz1tLtPZnRCMMiMmnHg31x0yVZ35E1HedP/zEDqT1IqU5kTYPrEoZ7efaLX0B/kSe1N08G4yjcRG8u8L5olRvzNE27Klg21km5OXekZg4IpSsJbrzH54o3HtK8uoRqrh0aEKTBcZE2toe3sWg/F5+jFc6MiDwjrB+wBYoDIU9BFxxkVj/CP04M3Xv3r241Of1/C6dn8hvHc/fkZfpLvNPfoXoAm+UjbDrfpdB6b7I50uHbanyD96jqn98387zWySlkQRAxucYFB4P/amkIQtAxPrWFrQXruSUHjxAb8Ci0Yv6LvBQxNemn+d7yUCON8f4qmvmHtNNyZN7nbXlDuIsSXM262QV50oCBF4PLhDeaATa3NYVcItVBG9NRbJ+yKC3uOlX1fflYxJHWETMJ+gpVojFpWaSnZjF7JHd+Tf3Fv4UvfcjvnMwcdlWPn3zx4kK9vwxkZfQMSnNzP0TBcqbLyDwdmA02RBwb+fNm1cUQ8K2KN5oGE4mr7AGdMPwck+Dd9XY2GiDLXRhKxVeHIYvmcRLIfMcaaw1ClfrCIWAX0jYrsaRVZmEHCb1hat5T/8DDj908VmAOUQrd5JZzh/LXn53Yi6XK0ppw9gu5ZTJQOF38faL1WhlZaXn59MAREzIYn2ibAEXFOqHgb0ChuiJYn88iH7r2di3F4cj6p8katqgbtLdvxH18HwBso60tuXT8l8A0neLhuY0U/L9l6is55Jcmk+L+WRByx3q7nyRXeBMsZCTEwgQZxWdky2Al6PqzXUyqzi99RfHjaXr08UFxRz14F4sqzkuFjAe3HDhSqyERxRaEhNJDYiwRMS78eCmd825y7zLC0o1IAUGCZv17SEhFdqAiEk4ZP1HXty3hzSyAxGCbEBQJ87QR4g2/N+KWkuB7glvLKZfkeCeMcp+v/XvZU31yjumNs8qNTUjzjVRqY1DD3mvVCWPcn2z77r3z69d4l1eUJrg1fXXePXbyT0lHwMpENBZbwvsOFj3jcdrBj+25YlhemGVS7Q7wav5ECQFW0LU0qK2BZ5p2WKHdxfXjVqgfKI5/4+a/bernF54ZS/V1i/IUW3ycWPempxdUZHwjWUp6mk2W6D1yXTKRoPzN3oT9MZfnSZd+fkeWteyoIEGqYFFfAFxeFnayuEsMJqglF+Nt//w98McddxiPLbmip8syjUgQaxUgsyRY/88YyxdlwmqQgMS1FLR5TBUBSYNSGBTRRQ0jdYwNTUgYaw1DbIakBKMzPtPvl5TWPUakLAWk+TPnctkpayV5AX2wUJemLwGJIy1Asj+qzOzK4CYUkQDojRN+AIewo5P1Loavna+hgYkquU86jEwV0QxH6DZLNJB7hqQIFbykjHpjF1smPk5xTAzNi9kQgMS0mCF4tVVFXKI1/K65B5SKO+X14D4WcinfEFj7UIhwkBYPUQDIiwyA/fh4dFB8VgGwuohfLAzP3RxQaK8TP2Bpago3Z2xYqlAJ4NZIL1h1Ru3u3L77uX6Puy8eM0CIpvN5I4fOvgrHs52Xrx88ztf/tafginTUqVbwLx5OmV+eMo0r53qkLUx7/U8/2SbzPdL6znEz0J+5YtyvKlujhaJGXSriBeAoYesAEZyE2ltTTfwV24HWlv2NKx84rH7Dx8MbYLc00+n2/gtf/XTO747Z/niBbn+wcEvMfuwmw43ngbEzSoBeONj1MHHp6xPDC5ctjpDE6qVGUYH3+ofPByi85c+wgdVtheGcj8y/AQepXL8N7Qz+XsTidHs/wBXLqJM7P551QAAAABJRU5ErkJggg=="},"1c92":function(e,t,a){},2013:function(e,t,a){"use strict";var n=a("42fb"),s=a.n(n);s.a},"22d1":function(e,t,a){"use strict";var n=a("65c6"),s=a.n(n);s.a},2416:function(e,t,a){},2619:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"add-friend-auto"},[n("div",{staticClass:"add-friend-auto-content scroll"},[n("div",{staticClass:"uplode-number"},[0===e.phones.length?[n("img",{attrs:{src:a("191e"),alt:"导入号码"}}),n("label",{staticClass:"tip",staticStyle:{cursor:"pointer",color:"#576c95","font-size":"14px"},attrs:{for:"chosePhoneText"}},[e._v(" 导入号码 ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"tip",attrs:{id:"chosePhoneText",type:"file",accept:"text/plain"},on:{change:function(t){return e.openFile(t)}}}),e._m(0)]:[n("p",[e._v("共导入")]),n("p",{staticStyle:{"font-size":"30px",color:"#576c95"},domProps:{textContent:e._s(e.phones.length)}}),n("p",[e._v("微信/号码")]),n("div",[e._v(" 自动分配 "),n("el-switch",{attrs:{size:"small","active-color":"#576C95","inactive-color":"#EEEEEE"},model:{value:e.autoDistribution,callback:function(t){e.autoDistribution=t},expression:"autoDistribution"}})],1),n("label",{staticClass:"tip",staticStyle:{cursor:"pointer",color:"#576c95","font-size":"12px"},attrs:{for:"chosePhoneText"}},[e._v(" 重新导入 ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"tip",attrs:{id:"chosePhoneText",type:"file",accept:"text/plain"},on:{change:function(t){return e.openFile(t)}}})]],2),e._l(e.wechatsOnline,(function(t,a){return n("div",{key:a,staticClass:"wechat-info",class:{"wechat-item":a%5===3}},[n("div",{staticClass:"avatar-info"},[n("el-avatar",{attrs:{size:44,src:t.Avatar}},[n("i",{staticClass:"fa fa-picture-o",attrs:{"aria-hidden":"true",title:"头像miss"}})]),n("div",{staticClass:"other-info"},[n("p",{staticClass:"ellipsis",staticStyle:{color:"#333333","font-size":"14px"},attrs:{title:t.WeChatNick},domProps:{textContent:e._s(t.WeChatNick)}}),n("p",{staticClass:"ellipsis",attrs:{title:t.WeChatNo},domProps:{textContent:e._s(t.WeChatNo)}}),n("p",{staticClass:"ellipsis"},[n("span",{domProps:{textContent:e._s(t.Province)}}),e._v(" "),n("span",{domProps:{textContent:e._s(t.City)}})])])],1),n("div",{staticClass:"number-input"},[n("span",[e._v("添加数量")]),n("el-input-number",{staticStyle:{width:"100px",margin:"0 7px"},attrs:{size:"small",min:0,max:e.limitNumber,step:1,"step-strictly":"",disabled:e.autoDistribution},model:{value:e.numberMap[t.WeChatId],callback:function(a){e.$set(e.numberMap,t.WeChatId,a)},expression:"numberMap[wechat.WeChatId]"}}),e._v(" 个 ")],1)])}))],2),n("el-input",{staticStyle:{margin:"10px 0"},attrs:{size:"small",placeholder:"验证消息"},model:{value:e.validationMessage,callback:function(t){e.validationMessage=t},expression:"validationMessage"}}),n("div",{staticClass:"add-friend-auto-oprations"},[n("div",{staticClass:"break-time"},[n("span",{staticClass:"tip"},[e._v("添加限制")]),n("el-input-number",{staticStyle:{margin:"0 5px",width:"90px"},attrs:{size:"small","controls-position":"right",min:1,max:100},model:{value:e.limitNumber,callback:function(t){e.limitNumber=t},expression:"limitNumber"}})],1),n("div",{staticClass:"break-time"},[n("span",{staticClass:"tip"},[e._v("时间间隔(秒)")]),n("el-input-number",{staticStyle:{margin:"0 5px",width:"90px"},attrs:{size:"small","controls-position":"right",min:1,max:600},model:{value:e.breakTime,callback:function(t){e.breakTime=t},expression:"breakTime"}})],1),n("div",{staticClass:"start-time"},[n("span",{staticClass:"tip"},[e._v("起始时间")]),n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",clearable:"",size:"small"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}})],1),n("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{size:"small",placeholder:"备注"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}}),n("el-button",{staticStyle:{color:"#999999",background:"#fff",border:"solid 1px #dadada"},attrs:{size:"small",type:"info",plain:""},on:{click:e.showTaskDialog}},[e._v(" 任务日志 ")]),n("el-button",{staticStyle:{color:"#fff",background:"#ff9f00",border:"solid 1px #ff9f00"},attrs:{size:"small",type:"primary",disabled:e.sending,loading:e.sending},on:{click:e.sureSend}},[e._v(" 创建任务 ")])],1),n("el-dialog",{attrs:{"append-to-body":"",title:"批量加好友记录",visible:e.taskLogVisiable},on:{"update:visible":function(t){e.taskLogVisiable=t}}},[n("el-table",{attrs:{data:e.addFriendsLog,stripe:""}},[n("el-table-column",{attrs:{label:"任务类型",prop:"tasktype",width:"120",formatter:e.taskTypeFormater}}),n("el-table-column",{attrs:{label:"微信昵称"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{domProps:{textContent:e._s(e.wechatsNameMap[t.row.wechatId]||t.row.wechatId)}})]}}])}),n("el-table-column",{attrs:{label:"手机号码",prop:"content",width:"210"}}),n("el-table-column",{attrs:{label:"当前状态",prop:"state",width:"80",formatter:e.taskStateFormatter}}),n("el-table-column",{attrs:{label:"执行时间",prop:"execute_time",width:"140"}}),n("el-table-column",{attrs:{label:"完成时间",prop:"update_time",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.update_time?n("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.update_time))}}):n("span",{domProps:{textContent:e._s("待执行")}})]}}])}),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[1===a.state?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.modifyState(a,-1)}}},[e._v("暂停")]):e._e(),-1===a.state?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.modifyState(a,1)}}},[e._v("继续")]):e._e(),1===a.state||-1===a.state?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.modifyState(a,2)}}},[e._v(" 取消 ")]):e._e(),2===a.state?n("el-button",{attrs:{type:"text",size:"small"}},[e._v("已取消")]):e._e(),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteTask(a)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{staticStyle:{display:"flex","justify-content":"center"},attrs:{"current-page":e.pageNo,"page-sizes":[15,30,45,60],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",{staticStyle:{color:"#999999","font-size":"12px"}},[a("a",{staticClass:"a_download",attrs:{target:"_blank",href:"http://www.jjldkj.com/files/weixin/phones.txt",download:""}},[e._v(" 下载模板 ")])])}],i=(a("4de4"),a("4160"),a("a15b"),a("fb6a"),a("ac1f"),a("1276"),a("159b"),a("b85c")),r=a("5530"),o=a("2f62"),l=a("3496"),c={name:"ToolsAddFriendAuto",data:function(){return{phones:[],autoDistribution:!1,numberMap:{},limitNumber:15,sending:!1,validationMessage:"",remarks:"",startTime:(new Date).getTime(),breakTime:60,taskLogVisiable:!1,addFriendsLog:[],totalNum:0,pageSize:15,pageNo:1}},computed:Object(r["a"])({},Object(o["b"])({currentUser:"currentUser",wechatsNameMap:"conversation/wechatsNameMap",wechatsOnline:"conversation/wechatsOnline"})),watch:{autoDistribution:function(e){e&&this.autoDispatch()}},created:function(){var e=this;this.wechatsOnline.forEach((function(t){e.$set(e.numberMap,t.WeChatId,0)}))},methods:{taskTypeFormater:function(){return"批量加好友"},taskStateFormatter:function(e){var t={"-1":"暂停",0:"已完成",1:"开启中",2:"取消"};return t[e.state]},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryLogs())},handleCurrentChange:function(e){this.pageNo=e,this.queryLogs()},queryLogs:function(){var e=this;Object(l["r"])(this.currentUser.SupplierId,this.currentUser.UnionId,this.pageNo,this.pageSize,6).then((function(t){0===t.code&&(e.addFriendsLog=t.data.list||[],e.totalNum=t.data.total||0)}))},openFile:function(e){var t=this,a=e.target.files[0],n=new FileReader;a?(n.readAsText(a),n.onload=function(e){var a=e.target.result;t.phones=a.split(/\r\n|\n/),t.phones.length>0&&t.autoDistribution&&t.autoDispatch()}):this.phones=[]},autoDispatch:function(){var e=this,t=this.phones.length/this.wechatsOnline.length;this.wechatsOnline.forEach((function(a,n){n===e.wechatsOnline.length-1?e.$set(e.numberMap,a.WeChatId,Math.floor(t)):e.$set(e.numberMap,a.WeChatId,Math.round(t))}))},getMaxNumber:function(e){var t=0;for(var a in this.numberMap)if(this.numberMap.hasOwnProperty(a)&&a!==e){var n=this.numberMap[a];t+=n}var s=this.phones.length-t;return s>0?s:0},transformTime:function(e){var t=new Date(e),a=t.getFullYear()+"-",n=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ",i=(t.getHours()<10?"0"+t.getHours():t.getHours())+":",r=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),o=a+n+s+i+r;return o},sureSend:function(){var e=this;if(0!==this.phones.length){for(var t in this.sending=!0,this.numberMap){var a={accountid:this.currentUser.UnionId,tasktype:6,state:1,execute_time:this.transformTime(this.startTime),between_time:this.breakTime,wechatId:t,wechatList:[],message:this.validationMessage,remarks:this.remarks};if(this.numberMap.hasOwnProperty(t)){var n=this.phones.slice(0,this.numberMap[t]);a.wechatList=n,a.content=n.join(","),n.length>0&&(Object(l["d"])(a).then((function(t){0===t.code&&e.$message({type:"success",message:"任务创建成功",duration:2e3})})),this.phones=this.phones.slice(this.numberMap[t]))}}setTimeout((function(){e.sending=!1}),1e3)}else this.$alert("请先选择文本文件！","提示",{type:"warning"})},modifyState:function(e,t){var a=this;Object(l["v"])(e.id,t).then((function(n){if(0===n.code){var s,r=Object(i["a"])(a.addFriendsLog);try{for(r.s();!(s=r.n()).done;){var o=s.value;if(o.id===e.id){o.state=t;break}}}catch(l){r.e(l)}finally{r.f()}}}))},deleteTask:function(e){var t=this;Object(l["t"])(e.id).then((function(a){0===a.code&&(t.addFriendsLog=t.addFriendsLog.filter((function(t){return t.id!==e.id})))}))},showTaskDialog:function(){this.queryLogs(),this.taskLogVisiable=!this.taskLogVisiable}}},u=c,d=(a("bec3"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"1214eb16",null);t["default"]=p.exports},2889:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"g",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return u}));var n=a("1c1e");function s(e,t,a,s,i){return n["a"].post("/admin/device/pageList",{page:e,rows:t,isonline:a,wechatid:s,deviceid:i})}function i(e,t,a,s,i,r,o,l){var c={cid:e,page:t,rows:a,deviceid:s,wechatid:i,isonline:r,groupid:o,accountid:l};return n["a"].post("/user/device/pageList",c)}function r(e){return n["a"].post("/user/device/deletes",{ids:e})}function o(e,t,a,s,i,r,o,l){return n["a"].post("/user/device/add",{cid:e,deviceid:t,accountid:a,groupid:s,devnickname:i,brand:r,module:o,snumber:l})}function l(e,t,a,s,i,r,o,l,c){return n["a"].post("/user/device/update",{id:e,cid:t,deviceid:a,accountid:s,groupid:i,devnickname:r,brand:o,module:l,snumber:c})}function c(e,t){return n["a"].post("/user/device/group",{deviceids:e,groupid:t})}function u(e,t){return n["a"].post("/user/device/list",{cid:e,accountid:t})}},"2a28":function(e,t,a){"use strict";var n=a("a4e9"),s=a.n(n);s.a},"2f18":function(e,t,a){"use strict";var n=a("9e77"),s=a.n(n);s.a},"2f9f":function(e,t,a){"use strict";var n=a("87ec"),s=a.n(n);s.a},3681:function(e,t,a){},"42fb":function(e,t,a){},4371:function(e,t,a){"use strict";var n=a("1004"),s=a.n(n);s.a},"45ce":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"material-libary"},[a("el-row",{staticStyle:{padding:"10px 0"},attrs:{type:"flex",align:"middle"}},[a("el-select",{attrs:{size:"small",placeholder:"资源类型",filterable:"",clearable:""},model:{value:e.resourceType,callback:function(t){e.resourceType=t},expression:"resourceType"}},e._l(e.resourceTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff",border:"solid #ff9f00 1px","margin-left":"10px"},attrs:{size:"small"},on:{click:e.queryResourceData}},[e._v(" 刷新素材 ")])],1),a("el-table",{attrs:{data:e.dataList,stripe:"",height:"100%"}},[a("el-table-column",{attrs:{label:"素材类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{domProps:{textContent:e._s(e.tasktypeMap[n.type])}})]}}])}),a("el-table-column",{attrs:{label:"消息内容"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",{class:[{"chat-link":6===n.type},{"chat-app":13===n.type}],domProps:{innerHTML:e._s(e.decodeChat(n))}})]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(n.createTime))}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff"},attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.deleteItem(n.id)}}},[e._v(" 删除 ")])]}}])})],1),a("el-pagination",{staticStyle:{margin:"10px","align-self":"center"},attrs:{"current-page":e.currentPage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,"pager-count":7,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},s=[],i=(a("99af"),a("ac1f"),a("8a79"),a("5319"),a("5530")),r=a("2f62"),o=a("3496"),l=a("f067"),c={name:"MaterialLibrary",data:function(){return{dataList:[],addGroupResource:!1,resourceType:null,pageSize:20,currentPage:1,totalNum:0,tasktypeMap:{6:"链接素材",13:"小程序素材",14:"Emoji",24:"视频号"},resourceTypeList:[{label:"链接素材",value:6},{label:"小程序素材",value:13},{label:"Emoji",value:14},{label:"视频号",value:24}]}},computed:Object(i["a"])({},Object(r["b"])({currentUser:"currentUser",actionUrl:"actionUrl"})),created:function(){this.queryResourceData()},methods:{queryResourceData:function(){var e=this;Object(o["s"])(this.currentUser.SupplierId,this.currentPage,this.pageSize,this.resourceType).then((function(t){0===t.code&&t.data.rows?(console.log(t.data.rows),e.dataList=t.data.rows,e.totalNum=t.data.records||0):(e.dataList=[],e.totalNum=0)}))},deleteItem:function(e){var t=this;Object(o["i"])(e).then((function(e){0===e.code&&t.queryResourceData()})).catch((function(e){t.$message.error(e.message)}))},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryResourceData())},handleCurrentChange:function(e){this.currentPage=e,this.queryResourceData()},decodeChat:function(e){var t=e.content,a={};try{a=JSON.parse(t);var n="",s="";switch(e.type){case"Text":case 1:return t;case"Picture":case 2:return'<img class="chat-img" src="'.concat(t,'"  alt="图片"/>');case"Voice":case 3:return n=t.endsWith(".amr")?t.replace(/.amr$/,".mp3"):t.replace(/.mp3:[0-9]+/,".mp3"),'<audio src="'.concat(n,'" alt="语音" controls></audio>');case"Video":case 4:return'<video class="video-box" src="'.concat(t,'" type="video/mp4" alt="视频" controls></video>');case 6:return s='\n                      <span class="link-title">'.concat(a.Title,'</span>\n                      <div class="link-content">\n                        <span class="link-des">').concat(a.Des,'</span>\n                        <img class="link-img" src="').concat(a.Thumb,'" alt="链接图片" />\n                      </div>\n                      <div class="link-type">').concat(a.TypeStr,"</div>\n                      "),s;case 13:var i=l,r="无效小程序",o="无效小程序",c="",u="小程序";return i=a.Icon&&"undefined"!==typeof a.Icon?a.Icon:l,r=a.Source,o=a.Title||a.Des,c=a.Thumb,u=a.TypeStr?a.TypeStr:"小程序",s='\n                <div class="app-des">\n                <img class="app-icon" src="'.concat(i,'" alt="icon" />\n                <span class="app-source ellipsis">').concat(r,'</span>\n                </div>\n                <div class="app-title ellipsis">').concat(o,'</div>\n                <img class="app-img" src="').concat(c,'" />\n                <div class="app-typestr">').concat(u,"</div>\n                 "),s;case 14:var d={"jsb_j.png":"http://emoji.qpic.cn/wx_emoji/abG5b87mcOW7YxBZFZPZOBXUjE99n48g6Znn6zaUiaVRtxMBYaEEKoA/","jsb_s.png":"http://emoji.qpic.cn/wx_emoji/ARQOAfC52Cu6iczyCvLhibUNQxCialTeaeObDoEMsL7uJjyV5dqzCNCFQ/","jsb_b.png":"http://emoji.qpic.cn/wx_emoji/Ty7jp6YeVib7MibicS8eb9buorVCg7mYTFXxuEpVDyQMaqK6PUoOcGxbQ/","dice_1.png":"http://emoji.qpic.cn/wx_emoji/QsDXJwBwXEXGFwLHJCm6haBlFls30vzPQcZTib9dyhLiazKxoPX6kp0A/","dice_2.png":"http://emoji.qpic.cn/wx_emoji/YbCHM38dRYCIWbKmiaBrdnPrfuuwicLD2iacSWaPoAiaFrUySG87ELibOXQ/","dice_3.png":"http://emoji.qpic.cn/wx_emoji/lgVbvPFtzP8ytMiaKZMUoV3BXNPRfUaP69vozHfNarmX3MlTrgOhrkA/","dice_4.png":"http://emoji.qpic.cn/wx_emoji/zaBCJf5hVDn8NlibdrxV4NoPc12d28S7s67UCJqwynRmB0spdttIbeQ/","dice_5.png":"http://emoji.qpic.cn/wx_emoji/72IJJTdBzuibcxvnpFVicUAzCWRJC3cKhtkpMHTFejC2cyOeEGSHibTKw/","dice_6.png":"http://emoji.qpic.cn/wx_emoji/Jowow1icuI3XqtkFeQgIuzjIEYHdtJZictGFJjTsAFwW1g6cx1uTaQfw/"};return n=a.Thumb||a.cdnUrl,n?d[n]?'<img class="chat-img" src="'.concat(d[n],'" title="点击看大图" alt="图片"/>'):'<img class="chat-img" src="'.concat(n,'" title="点击看大图" alt="图片"/>'):t;case 24:return a.title?"\n                    <div>\n                      <p>".concat(a.title,'</p>\n                      <img style="width:200px;" src="').concat(a.thumb,'" alt="好友头像" />\n                    </div>\n                    <div style="display:flex;align-items:center;">\n                      <img style="width:30px;border-radius:15px;" class="namecard-img" src="').concat(a.avatar,'" alt="好友头像" />\n                      <span style="margin-left:10px;">').concat(a.nickname,"</span>\n                    </div>\n                  "):t;default:return"不支持的消息类型".concat(e.ContentType)}}catch(p){return console.error(p),e.content}}}},u=c,d=(a("c529"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"266091a8",null);t["default"]=p.exports},"4b64":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"group-send"},[a("div",{staticClass:"filter-box"},[a("div",{staticClass:"tab-title"},[a("p",{staticClass:"can-not-select",class:{tabChose:"friendsTab"===e.currentTab},on:{click:function(t){e.currentTab="friendsTab"}}},[e._v(" 好友打标签 ")]),a("p",{staticClass:"can-not-select",class:{tabChose:"roomsTab"===e.currentTab},on:{click:function(t){e.currentTab="roomsTab"}}},[e._v(" 群打标签 ")])]),a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.searchContent&&e.currentWeChatId,expression:"!searchContent && currentWeChatId"}],staticClass:"labels-list scroll"},["friendsTab"===e.currentTab?[a("li",{staticClass:"label-item",class:{"current-label":"allFriends"===e.currentLabel},on:{click:function(t){return e.showFriends("allFriends")}}},[a("input",{staticStyle:{"margin-left":"5px"},attrs:{type:"checkbox"},domProps:{checked:e.friendsChecked.length===e.toolsFriends.length},on:{click:function(t){return e.choseFriendsByLabel(t,"allFriends")}}}),a("p",{domProps:{textContent:e._s("全部好友")}})]),e._l(e.toolsLabels,(function(t,n){return a("li",{key:n,staticClass:"label-item",class:[{"current-label":e.currentLabel===t.LabelId},{"label-disabled":!e.friendsOfEveryLabel[t.LabelId]||0===e.friendsOfEveryLabel[t.LabelId].length}],on:{click:function(a){(!e.friendsOfEveryLabel[t.LabelId]||0!==e.friendsOfEveryLabel[t.LabelId].length)&&e.showFriends(t.LabelId)}}},[a("input",{staticStyle:{"margin-left":"5px"},attrs:{type:"checkbox"},domProps:{checked:e.friendsOfEveryLabel[t.LabelId]&&0!==e.friendsOfEveryLabel[t.LabelId].length&&e.friendsOfEveryLabel[t.LabelId].length===e.friendsCheckedByLabel[t.LabelId].length},on:{click:function(a){return e.choseFriendsByLabel(a,t.LabelId)}}}),a("p",{staticClass:"ellipsis"},[e._v(" "+e._s(t.LabelName)+"("+e._s(e.friendsOfEveryLabel[t.LabelId]?e.friendsOfEveryLabel[t.LabelId].length:0)+") ")])])}))]:[a("li",{staticClass:"label-item",class:{"current-label":"allFriends"===e.currentRoomLabel},on:{click:function(t){return e.showFriends("allFriends")}}},[a("input",{staticStyle:{"margin-left":"5px"},attrs:{type:"checkbox"},domProps:{checked:e.roomsChecked.length===e.toolsRooms.length},on:{click:function(t){return e.choseRoomsByLabel(t,"allFriends")}}}),a("p",{domProps:{textContent:e._s("全部群组")}})])]],2),e.currentWeChatId?a("el-button",{staticClass:"create-label",attrs:{size:"small",type:"text",plain:"",icon:"el-icon-plus"},on:{click:e.createLabel}},[e._v(" 新建标签 ")]):e._e()],1),"friendsTab"===e.currentTab?a("div",{staticClass:"friends-list"},[a("div",{staticClass:"friends-list-title"},[a("p",[e._v("好友列表")]),a("el-input",{staticClass:"search-input",attrs:{size:"small","suffix-icon":"el-icon-search",type:"text",placeholder:"输入昵称搜索"},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}})],1),e.forceRefresh?a("el-table",{staticClass:"scroll",attrs:{data:e.tableDataPage[e.currentPage-1],stripe:""}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"60px"}}),a("el-table-column",{attrs:{label:"昵称",prop:"FriendNick"}}),a("el-table-column",{staticStyle:{border:"solid red 1px"},attrs:{label:"头像",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.row.Avatar}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"30px"}})])])]}}],null,!1,1594755109)}),a("el-table-column",{attrs:{label:"备注名",prop:"Memo"}}),a("el-table-column",{attrs:{width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return["allFriends"===e.currentLabel?a("input",{staticStyle:{"margin-left":"5px"},attrs:{type:"checkbox"},domProps:{checked:e.friendsChecked.indexOf(t.row.FriendId)>=0},on:{click:function(a){return e.choseFriend(a,t.row)}}}):a("input",{staticStyle:{"margin-left":"5px"},attrs:{type:"checkbox"},domProps:{checked:e.friendsCheckedByLabel[e.currentLabel].indexOf(t.row.FriendId)>=0},on:{click:function(a){return e.choseFriend(a,t.row)}}})]}}],null,!1,722963418)},[a("template",{slot:"header"})],2)],1):e._e(),a("el-pagination",{staticStyle:{margin:"5px auto 0"},attrs:{"current-page":e.currentPage,"page-sizes":[50,100,150,200],"page-size":e.pageSize,"pager-count":7,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):a("ul",{staticClass:"chat-rooms-list scroll"},e._l(e.toolsRooms,(function(t,n){return a("li",{key:n,staticClass:"room-item",class:{"room-item-3x":n%3===2}},[a("el-avatar",{staticStyle:{"min-width":"34px","margin-right":"5px"},attrs:{size:34,shape:"square",src:t.Avatar}},[a("i",{staticClass:"fa fa-picture-o",attrs:{"aria-hidden":"true",title:"头像miss"}})]),a("p",{staticClass:"ellipsis",domProps:{textContent:e._s(t.NickName)}}),a("input",{attrs:{type:"checkbox"},domProps:{checked:e.roomsChecked.indexOf(t.UserName)>=0},on:{click:function(a){return e.choseRoom(a,t)}}})],1)})),0),a("div",{staticClass:"friends-chosed"},[a("div",{staticClass:"third-box-title"},[a("p",{staticStyle:{color:"#999999"},domProps:{textContent:e._s("friendsTab"===e.currentTab?"已选好友":"已选群组")}}),"friendsTab"===e.currentTab?a("p",[e._v(" 已选 "),a("span",{staticStyle:{color:"#ff0000"},domProps:{textContent:e._s(e.finalFriendsInfo.length)}}),e._v(" 人 ")]):a("p",[e._v(" 已选 "),a("span",{staticStyle:{color:"#ff0000"},domProps:{textContent:e._s(e.roomsChecked.length)}}),e._v(" 个 ")])]),a("div",{staticClass:"friends-chose-list scroll"},e._l("friendsTab"===e.currentTab?e.finalFriendsInfo:e.roomsCheckedInfo,(function(t,n){return a("el-tag",{key:n,staticStyle:{margin:"5px"},attrs:{closable:"",type:"info"},on:{close:function(a){"friendsTab"===e.currentTab?e.removeFriend(t):e.removeRoom(t)}}},[e._v(" "+e._s(t.FriendNick||t.NickName)+" ")])})),1),a("el-select",{staticStyle:{margin:"5px"},attrs:{size:"small",clearable:"",placeholder:"请选择标签"},model:{value:e.labelId2Send,callback:function(t){e.labelId2Send=t},expression:"labelId2Send"}},e._l(e.toolsLabels,(function(e,t){return a("el-option",{key:t,attrs:{label:e.LabelName,value:e.LabelId}})})),1),a("div",{staticClass:"friends-chosed-btns"},[a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"white",width:"178px"},attrs:{size:"small"},on:{click:e.takeLabel}},[e._v(" 贴标签 ")])],1)],1)])},s=[],i=(a("99af"),a("4de4"),a("4160"),a("c975"),a("a15b"),a("d81d"),a("fb6a"),a("a434"),a("159b"),a("b85c")),r=a("5530"),o=a("2f62"),l=a("ca00"),c={data:function(){return{searchContent:"",currentTab:"friendsTab",currentLabel:"allFriends",tableData:[],friendsChecked:[],friendsCheckedByLabel:{},finalFriends:[],labelId2Send:[],forceRefresh:!0,friendsOfEveryLabel:{},currentRoomLabel:"allFriends",roomsChecked:[],currentPage:1,pageSize:50}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["d"])("nedb",{toolsLabels:"toolsLabels",toolsRooms:"toolsRooms"})),Object(o["b"])({currentWeChatId:"tools/currentWeChatId",toolsFriends:"nedb/toolsFriends",toolsLabelIdMap:"nedb/toolsLabelIdMap"})),{},{finalFriendsInfo:function(){var e=this,t=[];return this.toolsFriends.forEach((function(a){e.finalFriends.indexOf(a.FriendId)>=0&&t.push(a)})),t},roomsCheckedInfo:function(){var e=this,t=[];return this.toolsRooms.forEach((function(a){e.roomsChecked.indexOf(a.UserName)>=0&&t.push(a)})),t},tableDataPage:function(){for(var e=this.pageSize,t=[],a=0;a<this.tableData.length;a+=e)t.push(this.tableData.slice(a,a+e));return t}}),watch:{searchContent:function(e){var t=this;this.tableData=e?this.toolsFriends.filter((function(e){return e.FriendNick?e.FriendNick.indexOf(t.searchContent)>=0:e.Memo?e.Memo.indexOf(t.searchContent)>=0:e.NickName?e.NickName.indexOf(t.searchContent)>=0:e.Nickname?e.Nickname.indexOf(t.searchContent)>=0:void 0})):this.toolsFriends},currentWeChatId:function(e){var t=this;this.currentLabel="allFriends",this.currentRoomLabel="allFriends",setTimeout((function(){t.tableData=e?t.toolsFriends:[],setTimeout((function(){t.initData()}),200)}),100)}},created:function(){var e=this;this.currentWeChatId&&(this.$store.dispatch("nedb/SetToolsFriends",this.currentWeChatId),this.$store.dispatch("nedb/SetToolsRooms",this.currentWeChatId),this.$store.dispatch("nedb/SetToolsLabels",this.currentWeChatId),setTimeout((function(){e.initData()}),200))},methods:{handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},createLabel:function(){var e=this;this.currentWeChatId?this.$prompt("请输入标签名","新建标签",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S{1,20}?/,inputErrorMessage:"标签名不符合要求！"}).then((function(t){var a=t.value,n={WeChatId:e.currentWeChatId,LabelId:0,LabelName:a};e.$store.dispatch("websocket/ContactLabelTask",n)})).catch((function(){e.$message({type:"info",message:"取消输入"})})):this.$alert("请先选中微信！","提示",{type:"warning"})},takeLabel:function(){if("friendsTab"===this.currentTab){if(!this.currentWeChatId)return void this.$alert("请先选中微信！","提示",{type:"warning"});if(!this.labelId2Send||!this.toolsLabelIdMap[this.labelId2Send])return void this.$alert("请选择要打的标签！","提示",{type:"warning"});if(0===this.finalFriends.length)return void this.$alert("请选择好友！","提示",{type:"warning"});var e={WeChatId:this.currentWeChatId,AddList:this.finalFriends.join(","),LabelId:this.labelId2Send,LabelName:this.toolsLabelIdMap[this.labelId2Send]};this.$store.dispatch("websocket/ContactLabelTask",e),this.$parent.resetWeChatId()}else this.$alert("给群打标签,请自行实现!","提示",{type:"info"})},initData:function(){var e=this;this.tableData=this.toolsFriends;var t,a=Object(i["a"])(this.toolsLabels);try{var n=function(){var a=t.value;e.friendsOfEveryLabel[a.LabelId]=e.toolsFriends.filter((function(e){return e.LabelIds&&e.LabelIds.indexOf(String(a.LabelId))>=0})),e.friendsCheckedByLabel[a.LabelId]=[]};for(a.s();!(t=a.n()).done;)n()}catch(s){a.e(s)}finally{a.f()}this.$nextTick(),this.$forceUpdate()},indexMethod:function(e){return e+1},showFriends:function(e){this.tableData="allFriends"===e?this.toolsFriends:this.toolsFriends.filter((function(t){return t.LabelIds&&t.LabelIds.indexOf(String(e))>=0})),this.currentLabel=e},computedFriends:function(){var e=[].concat(this.friendsChecked);for(var t in this.friendsCheckedByLabel)Object.hasOwnProperty.call(this.friendsCheckedByLabel,t)&&(e=e.concat(this.friendsCheckedByLabel[t]));this.finalFriends=Object(l["c"])(e,"FriendId")},choseFriendsByLabel:function(e,t){var a=this;if("allFriends"===t){if(this.friendsChecked.length===this.toolsFriends.length)for(var n in this.friendsChecked=[],this.friendsCheckedByLabel)Object.hasOwnProperty.call(this.friendsCheckedByLabel,n)&&(this.friendsCheckedByLabel[n]=[]);else for(var s in this.toolsFriends.forEach((function(e){a.friendsChecked.indexOf(e.FriendId)<0&&a.friendsChecked.push(e.FriendId)})),this.friendsOfEveryLabel)if(Object.hasOwnProperty.call(this.friendsOfEveryLabel,s)){var i=this.friendsOfEveryLabel[s];this.friendsCheckedByLabel[s]=i.map((function(e){return e.FriendId}))}}else{if(0===this.friendsOfEveryLabel[t].length)return void e.preventDefault();var r=this.friendsOfEveryLabel[t],o=this.friendsCheckedByLabel[t];r.length===o.length?this.friendsCheckedByLabel[t]=[]:r.forEach((function(e){o.indexOf(e.FriendId)<0&&o.push(e.FriendId)}))}this.computedFriends()},choseFriend:function(e,t){var a=t.FriendId,n=this.currentLabel;if("allFriends"===this.currentLabel){var s=this.friendsChecked.indexOf(a);s>=0?this.friendsChecked.splice(s,1):this.friendsChecked.push(a)}else{var i=this.friendsCheckedByLabel[n].indexOf(a);i>=0?this.friendsCheckedByLabel[n].splice(i,1):this.friendsCheckedByLabel[n].push(a),this.$forceUpdate()}this.computedFriends()},choseRoomsByLabel:function(e,t){var a=this;"allFriends"===t&&(this.roomsChecked.length===this.toolsRooms.length?this.roomsChecked=[]:this.toolsRooms.forEach((function(e){a.roomsChecked.indexOf(e.UserName)<0&&a.roomsChecked.push(e.UserName)})))},choseRoom:function(e,t){var a=this.roomsChecked.indexOf(t.UserName);"allFriends"===this.currentRoomLabel&&(a>=0?this.roomsChecked.splice(a,1):this.roomsChecked.push(t.UserName))},removeFriend:function(e){var t=this,a=e.FriendId,n=this.friendsChecked.indexOf(a);for(var s in n>=0&&this.friendsChecked.splice(n,1),this.forceRefresh=!1,this.friendsCheckedByLabel)if(Object.hasOwnProperty.call(this.friendsCheckedByLabel,s)){var i=this.friendsCheckedByLabel[s],r=i.indexOf(a);r>=0&&i.splice(n,1)}setTimeout((function(){t.forceRefresh=!0}),50),this.$forceUpdate(),this.computedFriends()},removeRoom:function(e){this.roomsChecked.splice(this.roomsChecked.indexOf(e.UserName),1)}}},u=c,d=(a("9fb6"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"0b7a3eba",null);t["default"]=p.exports},"4d1a":function(e,t,a){"use strict";var n=a("6e61"),s=a.n(n);s.a},"55ff":function(e,t,a){"use strict";var n=a("d732"),s=a.n(n);s.a},"5faa":function(e,t,a){"use strict";var n=a("1c92"),s=a.n(n);s.a},"65c6":function(e,t,a){},"6c1f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"circle-manager-page"},[a(e.currentCircleNav,{tag:"component"})],1)},s=[],i=(a("d3b7"),a("5530")),r=a("2f62"),o=function(){return a.e("circle").then(a.bind(null,"b98a"))},l=function(){return a.e("circle").then(a.bind(null,"9927"))},c=function(){return a.e("circle").then(a.bind(null,"c0e2"))},u=function(){return a.e("circle").then(a.bind(null,"f04b"))},d=function(){return a.e("circle").then(a.bind(null,"aa12"))},p={components:{allCircle:o,newComments:l,sendCircle:c,dataAnalysis:u,circleDetail:d},data:function(){return{}},computed:Object(i["a"])({},Object(r["b"])({currentCircleNav:"circleManager/currentCircleNav"}))},h=p,f=(a("4371"),a("2877")),m=Object(f["a"])(h,n,s,!1,null,"54431ddc",null);t["default"]=m.exports},"6e61":function(e,t,a){},7852:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auto-reply-list"},[a("div",{staticClass:"seach-box"},[a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{clearable:"",placeholder:"请选择任务类型"},model:{value:e.tasktype,callback:function(t){e.tasktype=t},expression:"tasktype"}},e._l(e.types,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{clearable:"",placeholder:"请选择任务状态"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.states,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticStyle:{"margin-right":"10px",width:"200px"},attrs:{clearable:"",maxlength:"1000",placeholder:"输入备注"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}}),a("el-button",{on:{click:e.queryData}},[e._v("开始搜索")]),a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff",border:"solid #ff9f00 1px"},attrs:{plain:""},on:{click:e.deleteTasks}},[e._v(" 批量删除 ")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"微信id",prop:"wechatid",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[2===n.tasktype?a("span",{domProps:{textContent:e._s(e.wechatsNoMap[n.wechatId])}}):a("span",{domProps:{textContent:e._s("--")}})]}}])}),a("el-table-column",{attrs:{label:"任务类型",filters:e.taskTypes,prop:"tasktype","filter-method":e.filterTaskTypes},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.tasktypeMap[t.row.tasktype])}})]}}])}),a("el-table-column",{attrs:{label:"消息类型"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[2===n.tasktype?a("span",{domProps:{textContent:e._s(e.circleMap(n))}}):a("span",{domProps:{textContent:e._s(e.restypeMap[n.restype])}})]}}])}),a("el-table-column",{attrs:{label:"当前状态",prop:"state",width:"80",formatter:e.taskStateFormatter}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),a("el-table-column",{attrs:{label:"执行时间",prop:"execute_time"}}),a("el-table-column",{attrs:{label:"完成时间",prop:"update_time"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.update_time?a("span",{domProps:{textContent:e._s(e.$options.filters.transformTime2Minute(t.row.update_time))}}):a("span",{domProps:{textContent:e._s("待执行")}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.state?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.modifyState(n,-1)}}},[e._v("暂停")]):e._e(),-1===n.state?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.modifyState(n,1)}}},[e._v("继续")]):e._e(),1===n.state||-1===n.state?a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.modifyState(n,2)}}},[e._v(" 取消 ")]):e._e(),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.deleteTask(n)}}},[e._v("删除")]),a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.showTaskDetail(n)}}},[e._v("详情")])]}}])})],1),a("el-pagination",{staticStyle:{margin:"10px auto 0"},attrs:{"current-page":e.pageNo,"page-sizes":[100,200,400,800],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"task-detail-sort",attrs:{"append-to-body":"",title:"任务详情",visible:e.taskDetailVisiable},on:{"update:visible":function(t){e.taskDetailVisiable=t}}},[a("div",{class:[{"chat-link":6===e.rowDetail.restype},{"chat-app":13===e.rowDetail.restype}],staticStyle:{width:"100%"},domProps:{innerHTML:e._s(e.decodeChat(e.rowDetail))}}),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"medium"},on:{click:function(t){e.taskDetailVisiable=!1}}},[e._v("确 定")])],1)])],1)},s=[],i=(a("99af"),a("a15b"),a("d81d"),a("4d63"),a("ac1f"),a("25f0"),a("8a79"),a("5319"),a("1276"),a("b85c")),r=a("5530"),o=a("2f62"),l=a("3496"),c=a("f067"),u={name:"ToolsAutoTaskList",data:function(){return{remarks:"",multipleSelection:[],tableData:[],tasktypeMap:{1:"PC群发消息",2:"PC发朋友圈",5:"群发群消息",6:"批量加好友"},restypeMap:{Text:1,Picture:2,Voice:3,Video:4,Link:6,WeApp:13,1:"文本",2:"图片",3:"语音",4:"视频",6:"链接",13:"小程序"},taskTypes:[{text:"群发好友",value:1},{text:"发朋友圈",value:2},{text:"群发群",value:5},{text:"批量加好友",value:6}],types:[{value:1,label:"群发好友"},{value:5,label:"群发群"},{value:6,label:"批量加好友"},{value:2,label:"发朋友圈"}],states:[{value:0,label:"已完成"},{value:1,label:"开启中"},{value:2,label:"取消"},{value:-1,label:"暂停"}],pageNo:1,pageSize:100,tasktype:"",status:"",total:0,taskDetailVisiable:!1,rowDetail:{}}},computed:Object(r["a"])({},Object(o["b"])({currentUser:"currentUser",wechatsNoMap:"conversation/wechatsNoMap"})),mounted:function(){this.queryData()},methods:{handleSelectionChange:function(e){this.multipleSelection=e},deleteTasks:function(){var e=this;this.$confirm("确认删除选中的任务么 ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=e.multipleSelection.map((function(e){return e.id})).join();Object(l["t"])(t).then((function(t){0===t.code?(e.$message.success("删除成功！"),e.queryData()):e.$alert(t.data,"删除失败",{type:"warning"})})).catch((function(t){e.$alert(t,"提示",{type:"error"})}))})).catch((function(){}))},circleMap:function(e){var t=JSON.parse(e.remark2);return 0===t.attachtype?"链接":2===t.attachtype?"图片":3===t.attachtype?"视频":"文本"},taskStateFormatter:function(e){var t={"-1":"暂停",0:"已完成",1:"开启中",2:"取消"};return t[e.state]},queryData:function(){var e=this;Object(l["r"])(this.currentUser.SupplierId,this.currentUser.UnionId,this.pageNo,this.pageSize,this.tasktype,this.status,this.remarks).then((function(t){0===t.code&&(e.tableData=t.data.list||[],e.total=t.data.total||0)})).catch((function(e){console.log(e)}))},filterTaskTypes:function(e,t,a){var n=a["property"];return t[n]===e},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e,this.queryData())},handleCurrentChange:function(e){this.pageNo=e,this.queryData()},showTaskDetail:function(e){this.rowDetail=e,this.taskDetailVisiable=!0},modifyState:function(e,t){var a=this;Object(l["v"])(e.id,t).then((function(n){if(0===n.code){var s,r=Object(i["a"])(a.tableData);try{for(r.s();!(s=r.n()).done;){var o=s.value;if(o.id===e.id){o.state=t;break}}}catch(l){r.e(l)}finally{r.f()}}}))},deleteTask:function(e){var t=this;this.$confirm("确认删除该任务么 ?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["t"])(e.id).then((function(e){0===e.code?(t.$message.success("删除成功！"),t.queryData()):t.$alert(e.data,"删除失败",{type:"warning"})})).catch((function(e){t.$alert(e,"提示",{type:"error"})}))})).catch((function(){}))},decodeChat:function(e){var t=e.tasktype,a=e.remark2,n=e.content;if(2===t){var s=new RegExp(/^{.+}$/),r={};s.test(a)&&(r=JSON.parse(a));var o="",l="",u=r,d=u.attachtype,p=u.attachtcontent;switch(d){case 2:o=p?p.split(","):[];var h,f=Object(i["a"])(o);try{for(f.s();!(h=f.n()).done;){var m=h.value;l+='<img style="width:100px;height:100px;padding:5px;object-fit:cover;" src="'.concat(m,'" />')}}catch(_){f.e(_)}finally{f.f()}return"<p>".concat(n,'</p>\n                <div style="display:flex;flex-wrap:wrap;">').concat(l,"</div>\n                ");case 3:return o=p||"",l='<video style="width:auto;max-height:200px;padding:5px;" src="'.concat(o,'" type="video/mp4" alt="视频" controls></video>'),"<p>".concat(n,'</p>\n                <div style="display:flex;flex-wrap:wrap;">').concat(l,"</div>\n                ");case 0:return o=p?p.split(","):[],"<p>".concat(n,'</p>\n            <div style="display:flex;align-items:center;">\n            <img style="width:30%;margin-right:5px;" src="').concat(o[2],'" />\n            <span>').concat(o[1],"</span>\n            </div>\n            ");default:return e.content}}else{var b=n,y=new RegExp(/^{.+}$/),g={};y.test(b)&&(g=JSON.parse(b));var v="",k="";switch(e.restype){case"Text":case 1:return n;case"Picture":case 2:return'<img class="chat-img" src="'.concat(n,'"  alt="图片"/>');case"Voice":case 3:return v=n.endsWith(".amr")?n.replace(/.amr$/,".mp3"):n.replace(/.mp3:[0-9]+/,".mp3"),' <audio src="'.concat(v,'" alt="语音" controls></audio>');case"Video":case 4:return'<video class="video-box" src="'.concat(n,'" type="video/mp4" alt="视频" controls></video>');case"Link":case 6:return k='\n                          <span class="link-title">'.concat(g.Title,'</span>\n                          <div class="link-content">\n                            <span class="link-des">').concat(g.Des,'</span>\n                            <img class="link-img" src="').concat(g.Thumb,'" alt="链接图片" />\n                          </div>\n                          <div class="link-type">').concat(g.TypeStr,"</div>\n                          "),k;case"WeApp":case 13:var C=c,x="无效小程序",w="无效小程序",S="",T="小程序";return"string"===typeof n&&y.test(n)&&(g=JSON.parse(n),C=g.Icon&&"undefined"!==typeof g.Icon?g.Icon:c,x=g.Source,w=g.Title||g.Des,S=g.Thumb,T=g.TypeStr?g.TypeStr:"小程序"),k='\n                    <div class="app-des">\n                    <img class="app-icon" src="'.concat(C,'" alt="icon" />\n                    <span class="app-source ellipsis">').concat(x,'</span>\n                    </div>\n                    <div class="app-title ellipsis">').concat(w,'</div>\n                    <img class="app-img" src="').concat(S,'" />\n                    <div class="app-typestr">').concat(T,"</div>\n                     "),k;default:return e.content}}}}},d=u,p=(a("2f18"),a("2877")),h=Object(p["a"])(d,n,s,!1,null,"65ab29bc",null);t["default"]=h.exports},7875:function(e,t,a){},"7e1d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"new-friend"},[a("div",{staticStyle:{padding:"10px 0"}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"所有微信"},model:{value:e.filterWeChatId,callback:function(t){e.filterWeChatId=t},expression:"filterWeChatId"}},e._l(e.wechatsOnline,(function(e,t){return a("el-option",{key:t,attrs:{label:e.WeChatNick,value:e.WeChatId,disabled:!e.IsOnline}})})),1),a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff",border:"solid #ff9f00 1px","margin-left":"10px"},attrs:{size:"small",type:"primary"},on:{click:e.getNewFriends}},[e._v(" 刷新 ")])],1),a("el-table",{attrs:{data:e.newFriendsData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"所属微信",prop:"WeChatId"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{domProps:{textContent:e._s(e.wechatsNameMap[n.WeChatId]||e.scope.WeChatId)}})]}}])}),a("el-table-column",{attrs:{label:"昵称",prop:"FriendNick"}}),a("el-table-column",{attrs:{label:"头像",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-avatar",{attrs:{size:30,src:e.row.Avatar}},[a("img",{attrs:{src:"https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png"}})])]}}])}),a("el-table-column",{attrs:{prop:"Gender",width:"50px",label:"性别",formatter:e.formatGender}}),a("el-table-column",{attrs:{label:"来源"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.Source?a("div",{domProps:{textContent:e._s(e.$options.filters.getFriendSource(t.row.Source))}}):e._e()]}}])}),a("el-table-column",{attrs:{label:"地区"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.Province))]),a("p",[e._v(e._s(t.row.City))])]}}])}),a("el-table-column",{attrs:{prop:"Reason",label:"验证信息"}}),a("el-table-column",{attrs:{label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.$options.filters.timeFilter(t.row.ReqTime))}})]}}])}),a("el-table-column",{attrs:{prop:"address",width:"90px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.State?a("el-button",{attrs:{type:"info",size:"mini"}},[e._v("已添加")]):e.timeNow-t.row.ReqTime>=2592e5?a("el-button",{attrs:{type:"info",size:"mini"}},[e._v(" 已过期 ")]):a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.acceptRequest(t.$index,t.row)}}},[e._v("接受")])]}}])})],1)],1)},s=[],i=a("b85c"),r=a("5530"),o=a("2f62"),l=a("2c32"),c={name:"ToolsNewFriend",data:function(){return{currentPage:1,pageSize:20,filterWeChatId:"",timeNow:(new Date).getTime()}},computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])({wechatsOnline:"conversation/wechatsOnline",wechatsNameMap:"conversation/wechatsNameMap",newFriends:"tools/newFriendsList"})),{},{newFriendsData:function(){return this.newFriends}}),created:function(){this.getNewFriends()},methods:{getNewFriends:function(){this.$store.commit("tools/RESET_NEW_FRIENDS_LIST");var e=(new Date).getTime()-3456e5;if(this.filterWeChatId)Object(l["p"])(this.filterWeChatId,e,!1,!1);else{var t,a=Object(i["a"])(this.wechatsOnline);try{for(a.s();!(t=a.n()).done;){var n=t.value;Object(l["p"])(n.WeChatId,e,!1,!1)}}catch(s){a.e(s)}finally{a.f()}}},formatGender:function(e){return"Male"===e.Gender?"男":"Female"===e.Gender?"女":"未知"},acceptRequest:function(e,t){var a=this;console.log(t),this.$prompt("设置备注(非必需)","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{0,50}$/,inputErrorMessage:"备注超过50个字符"}).then((function(n){var s=n.value;t.State=1,Object(l["a"])(t.WeChatId,t.FriendId,1,s),a.$store.commit("tools/UPDATE_ACCEPTE_STATE",{ri:e,rd:t})})).catch((function(){}))}}},u=c,d=(a("22d1"),a("2877")),p=Object(d["a"])(u,n,s,!1,null,"f023e1b6",null);t["default"]=p.exports},"7fa1":function(e,t,a){"use strict";var n=a("b959"),s=a.n(n);s.a},"863e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phone-management scroll"},e._l(e.wechatsOnline,(function(t,n){return a("div",{key:n,staticClass:"wechat-info"},[a("div",{staticClass:"avatar-info"},[a("el-avatar",{attrs:{size:44,src:t.Avatar}},[a("i",{staticClass:"fa fa-picture-o",attrs:{"aria-hidden":"true",title:"头像miss"}})]),a("div",{staticClass:"other-info"},[a("p",{staticClass:"ellipsis",staticStyle:{color:"#333333","font-size":"14px"},attrs:{title:t.WeChatNick},domProps:{textContent:e._s(t.WeChatNick)}}),e.phoneState[t.WeChatId]?[a("p",{staticClass:"ellipsis"},[e._v("电量: "+e._s(e.phoneState[t.WeChatId].BatteryLevel))]),a("p",{staticClass:"ellipsis"},[e._v("网络: "+e._s(e.phoneState[t.WeChatId].NetType))]),e.chargingStateMap[e.phoneState[t.WeChatId].ChargingState]?a("p",{staticClass:"ellipsis"},[e._v(" 充电方式: "+e._s(e.chargingStateMap[e.phoneState[t.WeChatId].ChargingState])+" ")]):a("p",{staticClass:"ellipsis"},[e._v("充电方式: 未知")]),a("p",{},[e._v("内存: "+e._s(e.phoneState[t.WeChatId].SdcardFree))])]:[a("el-button",{staticClass:"el-button-my",attrs:{type:"text",size:"medium",icon:"el-icon-search",title:"查询手机状态"},on:{click:function(a){return e.queryPhoneState(t)}}},[e._v(" 点击查看手机状态 ")])]],2)],1),a("div",{staticClass:"operation-btns"},[a("el-button",{staticClass:"el-button-my",staticStyle:{color:"red"},attrs:{type:"text",size:"medium",icon:"el-icon-switch-button",title:"重启手机"},on:{click:function(a){return e.managerPhone(t,1)}}}),a("el-button",{staticClass:"el-button-my",attrs:{type:"text",size:"medium",icon:"el-icon-upload2",title:"上传日志"},on:{click:function(a){return e.managerPhone(t,2)}}}),a("el-button",{staticClass:"el-button-my",attrs:{type:"text",size:"medium",icon:"el-icon-picture-outline-round",title:"清除客服系统的图片缓存"},on:{click:function(a){return e.managerPhone(t,4)}}}),a("el-button",{staticClass:"el-button-my",attrs:{type:"text",size:"medium",icon:"el-icon-film",title:"清除微信的图片视频缓存"},on:{click:function(a){return e.managerPhone(t,5)}}}),a("el-button",{staticClass:"el-button-my",attrs:{type:"text",size:"medium",icon:"el-icon-document-remove",title:"清除手机缓存的文件url"},on:{click:function(a){return e.managerPhone(t,6)}}}),a("el-button",{staticClass:"el-button-my",attrs:{type:"text",size:"medium",icon:"el-icon-search",title:"查询手机状态"},on:{click:function(a){return e.queryPhoneState(t)}}})],1)])})),0)},s=[],i=a("5530"),r=a("2f62"),o=a("2c32"),l={name:"ToolsPhoneManagement",data:function(){return{wechats:this.$store.getters["conversation/wechats"],chargingStateMap:{0:"未充电",1:"充电中",2:"已充满",3:"已插线,未充电",4:"未知"}}},computed:Object(i["a"])({},Object(r["b"])({wechatsOnline:"conversation/wechatsOnline",phoneState:"tools/phoneState"})),methods:{managerPhone:function(e,t){var a=this;if(e.WeChatId){var n={wechatId:e.WeChatId,action:t},s=e.WeChatNick||e.WeChatNo,i={1:"重启 ".concat(s," 所在的手机？"),2:"上传 ".concat(s," 的日志？"),4:"清除手机(".concat(s,")中客服系统的图片缓存？"),5:"清除微信(".concat(s,")的图片视频缓存？"),6:"清除手机(".concat(s,")缓存的文件url（用于防止重复上传）？")};this.$confirm(i[t],"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.$store.dispatch("websocket/PhoneActionTask",n)})).catch((function(e){a.$message.error(e.message)}))}else this.$message({message:"该微信不可用！",type:"warning"})},queryPhoneState:function(e){e.WeChatId&&Object(o["j"])(e.WeChatId)}}},c=l,u=(a("93d6"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"5aa64c3c",null);t["default"]=d.exports},"87ec":function(e,t,a){},"93d6":function(e,t,a){"use strict";var n=a("97e7"),s=a.n(n);s.a},"97e7":function(e,t,a){},"9b0d":function(e,t,a){"use strict";var n=a("2416"),s=a.n(n);s.a},"9e77":function(e,t,a){},"9fb6":function(e,t,a){"use strict";var n=a("d467"),s=a.n(n);s.a},a4b1:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"friends-filter"},[a("div",{staticClass:"search-condition"},[a("el-select",{staticClass:"el-select-wechats-list",staticStyle:{"margin-right":"10px"},attrs:{size:"small",clearable:"",placeholder:"所属微信"},model:{value:e.authorWxid,callback:function(t){e.authorWxid=t},expression:"authorWxid"}},e._l(e.wechats,(function(e,t){return a("el-option",{key:t,attrs:{label:e.WeChatNick,value:e.WeChatId}})})),1),a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"好友微信id",size:"small",maxlength:"50","show-word-limit":"",clearable:""},model:{value:e.friendId,callback:function(t){e.friendId="string"===typeof t?t.trim():t},expression:"friendId"}}),a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"好友的微信号",size:"small",maxlength:"30","show-word-limit":"",clearable:""},model:{value:e.wechatNo,callback:function(t){e.wechatNo="string"===typeof t?t.trim():t},expression:"wechatNo"}}),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"好友昵称",maxlength:"30","show-word-limit":"",clearable:""},model:{value:e.wechatNick,callback:function(t){e.wechatNick="string"===typeof t?t.trim():t},expression:"wechatNick"}}),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",placeholder:"好友备注",maxlength:"25","show-word-limit":"",clearable:""},model:{value:e.wechatMemo,callback:function(t){e.wechatMemo="string"===typeof t?t.trim():t},expression:"wechatMemo"}}),a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff",border:"solid #ff9f00 1px"},attrs:{size:"small"},on:{click:e.screenFriends}},[e._v(" 筛选 ")])],1),a("el-table",{attrs:{data:e.tableData[e.currentPage-1],stripe:"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"60px"}}),a("el-table-column",{attrs:{label:"所属微信"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(e.wechatsNameMap[t.row.WeChatId]||t.row.WeChatId)}})]}}])}),a("el-table-column",{attrs:{label:"微信号",prop:"FriendNo"}}),a("el-table-column",{attrs:{label:"好友昵称",prop:"FriendNick"}}),a("el-table-column",{attrs:{label:"好友Id",prop:"FriendId"}}),a("el-table-column",{attrs:{label:"头像",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"32px",height:"32px"},attrs:{src:e.row.Avatar}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"50px"}})])])]}}])}),a("el-table-column",{attrs:{label:"备注名",prop:"Memo"}}),a("el-table-column",{attrs:{label:"性别",prop:"Gender",width:"80px"}}),a("el-table-column",{attrs:{label:"省市",prop:"Province"}}),a("el-table-column",{attrs:{label:"城市",prop:"City"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"5px","background-color":"#ff9f00",color:"#ffffff"},attrs:{type:"warning",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v(" 删除 ")])]}}])})],1),a("el-pagination",{staticStyle:{margin:"0 auto","margin-top":"5px"},attrs:{"current-page":e.currentPage,"page-sizes":[15,30,45,60],"page-size":e.pageSize,"pager-count":5,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},s=[],i=(a("4de4"),a("c975"),a("d81d"),a("fb6a"),a("a434"),a("b85c")),r=a("5530"),o=a("2f62"),l={name:"ToolsFriendsFilter",data:function(){return{authorWxid:"",friendId:"",wechatNo:"",wechatNick:"",wechatMemo:"",pageSize:15,currentPage:1}},computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])({wechats:"conversation/wechats",wechatsNameMap:"conversation/wechatsNameMap",searchResults:"nedb/searchResults"})),{},{totalNum:function(){return this.searchResults.length},tableData:function(){for(var e=this.pageSize,t=[],a=0;a<this.searchResults.length;a+=e)t.push(this.searchResults.slice(a,a+e));return t}}),methods:{screenFriends:function(){var e={};this.authorWxid&&(e.WeChatId=this.authorWxid),this.wechatNo&&(e.FriendNo=this.wechatNo),this.friendId&&(e.FriendId=this.friendId),this.wechatMemo&&(e.Memo=this.wechatMemo),this.wechatNick&&(e.FriendNick=this.wechatNick),this.$store.dispatch("nedb/FindFriendsByConditions",e)},handleClick:function(e){var t=this;this.$confirm("此操作将删除该好友, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$store.dispatch("websocket/DeleteFriendTask",e),t.$message({type:"info",message:"正在删除!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},indexMethod:function(e){return e+1},choseRow:function(e){var t=e.FriendId,a=this.friends2send.indexOf(t);a>=0?this.friends2send.splice(a,1):this.friends2send.push(t)},computedCheckState:function(e){return this.friends2send.indexOf(e.FriendId)>=0},choseAllOfPage:function(){var e=this.tableData[this.currentPage-1],t=e.map((function(e){return e.FriendId})),a=this.friends2send.filter((function(e){return t.indexOf(e)>-1}));if(a.length===t.length){var n,s=Object(i["a"])(e);try{for(s.s();!(n=s.n()).done;){var r=n.value,o=r.FriendId,l=this.friends2send.indexOf(o);this.friends2send.splice(l,1)}}catch(f){s.e(f)}finally{s.f()}}else{var c,u=Object(i["a"])(e);try{for(u.s();!(c=u.n()).done;){var d=c.value,p=d.FriendId,h=this.friends2send.indexOf(p);h<0&&this.friends2send.push(p)}}catch(f){u.e(f)}finally{u.f()}}},handleSizeChange:function(e){this.pageSize!==e&&(this.pageSize=e)},handleCurrentChange:function(e){this.currentPage=e}}},c=l,u=(a("5faa"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"8dcb1c26",null);t["default"]=d.exports},a4e9:function(e,t,a){},aa72:function(e,t,a){"use strict";var n=a("7875"),s=a.n(n);s.a},b959:function(e,t,a){},bec3:function(e,t,a){"use strict";var n=a("cf9c"),s=a.n(n);s.a},c529:function(e,t,a){"use strict";var n=a("f0ef"),s=a.n(n);s.a},cf9c:function(e,t,a){},d00f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"add-friend"},[n("div",{staticClass:"add-friend-wrap"},[n("div",{staticClass:"add-friend-content"},[n("img",{attrs:{src:a("0e6e"),alt:""}}),n("el-input",{staticStyle:{width:"320px"},attrs:{placeholder:"请输入手机号/微信号搜索",clearable:"",maxlength:"30","show-word-limit":""},on:{focus:function(t){return e.clearErrMsg()}},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber="string"===typeof t?t.trim():t},expression:"phoneNumber"}}),n("p",{staticClass:"err-msg"},[e.errMsg?n("span",{domProps:{textContent:e._s(e.errMsg)}}):e._e()]),n("el-button",{staticStyle:{color:"#fff","background-color":"#ff9f00"},attrs:{type:"warning",loading:e.loading,icon:"el-icon-search"},on:{click:function(t){return e.searchNumber(e.phoneNumber)}}},[e._v(" 查询 ")])],1)]),n("div",{staticClass:"search-result"},[n("div",{staticClass:"name-avatar"},[n("el-avatar",{attrs:{size:60,src:e.searchResult.Avatar,shape:"square"}},[n("i",{staticClass:"fa fa-picture-o",attrs:{"aria-hidden":"true",title:"头像miss"}})]),n("div",{staticClass:"nick-name"},[n("p",{staticStyle:{padding:"5px","font-size":"16px","font-weight":"600"},domProps:{textContent:e._s(e.searchResult.NickName||"")}}),n("p",{staticStyle:{padding:"5px",width:"250px","word-wrap":"break-word"},domProps:{textContent:e._s(e.searchResult.UserName||"")}})])],1),n("ul",{staticClass:"other-info"},[n("li",[n("p",{staticClass:"other-info-tip"},[e._v("性 别")]),n("p",{domProps:{textContent:e._s(e.searchResult.Gender||"")}})]),n("li",[n("p",{staticClass:"other-info-tip"},[e._v("城 市")]),n("p",[n("span",{domProps:{textContent:e._s(e.searchResult.Province||"")}}),n("span",{domProps:{textContent:e._s(e.searchResult.City||"")}})])]),n("li",[n("p",{staticClass:"other-info-tip"},[e._v("号 码")]),n("p",{domProps:{textContent:e._s(e.searchResult.SearchText||"")}})]),n("li",[n("p",{staticClass:"other-info-tip"},[e._v("结 果")]),e.searchResult.ErrMsg?n("p",{domProps:{textContent:e._s(e.searchResult.ErrMsg)}}):e.searchResult.IsFriend?n("p",[e._v("'已经是好友'")]):e.searchResult.SearchText?n("p",[e._v("'不是好友'")]):n("p")])]),n("el-row",{staticStyle:{"margin-top":"40px"},attrs:{type:"flex",align:"middle",justify:"center"}},[e.alreadyAdd?e._e():n("el-button",{staticClass:"add-to-address-btn",on:{click:e.addFriendByWxid}},[e._v("添加到通讯录")])],1)],1)])},s=[],i=(a("4d63"),a("ac1f"),a("25f0"),a("5530")),r=a("2f62"),o={name:"AddFriend",data:function(){return{phoneNumber:"",errMsg:"",loading:!1,alreadyAdd:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(r["d"])("tools",{searchResult:"searchResult"})),Object(r["b"])({currentWeChatId:"tools/currentWeChatId"})),watch:{searchResult:function(e){e.WeChatId&&(this.loading=!1,this.alreadyAdd=!1)}},beforeDestroy:function(){this.$store.commit("tools/SET_SEARCH_RESULT",{})},methods:{searchNumber:function(e){var t=this;if(this.currentWeChatId){var a=new RegExp(/^1[0-9]{10}$|[a-zA-Z_0-9]{6,20}/);a.test(e)?(this.$store.commit("tools/SET_SEARCH_RESULT",{}),this.$store.dispatch("websocket/FindContactTask",{WeChatId:this.currentWeChatId,Content:e}),this.loading=!0,setTimeout((function(){t.loading=!1}),3e3)):this.errMsg="错误的号码格式"}else this.$alert("请选中一个微信！","提示",{confirmButtonText:"确定"})},clearErrMsg:function(){this.errMsg=""},addFriendByWxid:function(){var e=this,t=this.searchResult,a=t.Success,n=t.WeChatId,s=t.IsFriend,i=t.SearchText,r=t.ErrMsg;if(r)this.$alert(r,"提示",{type:"warning",confirmButtonText:"确定"});else if(void 0!==i)if(a&&n&&i){if("已经是好友"===s)return void this.$alert("已经是好友了！","提示",{type:"info"});this.$prompt("请输入验证语","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/[\s\S]{0,50}/,inputErrorMessage:"验证语格式不正确"}).then((function(t){var a=t.value,s={WeChatId:n,Phones:[i],message:a,Remark:"",TaskId:1e4*(new Date).getTime()+parseInt(1e4*Math.random(),10)};e.$store.dispatch("websocket/AddFriendsTask",s),e.alreadyAdd=!0})).catch((function(){}))}else this.$alert("查询失败不能添加！","提示",{type:"warning"});else this.$alert("请先查询微信数据！","提示",{type:"warning",confirmButtonText:"确定"})}}},l=o,c=(a("f025"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,"2354f087",null);t["default"]=u.exports},d467:function(e,t,a){},d58b:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c}));var n=a("1c1e");function s(e){return n["a"].post("/user/data/circleTongji",{cid:e})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return n["a"].post("/user/data/friendAddTongji",{cid:e,type:t,wechatid:i,groupid:r,start:a,end:s})}function r(e,t,a,s,i){return n["a"].post("/user/data/friendChangeTongji",{cid:e,accountid:t,type:a,start:s,end:i})}function o(e,t,a){return n["a"].post("/user/data/friendTotalTongji",{cid:e,accountid:t,wechatid:a})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;return n["a"].post("/user/data/luckyMoneyTongji",{cid:e,type:t,start:a,end:s})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return n["a"].post("/user/data/luckyMoneyDetail",{cid:e,type:t,wechatid:a,start:s,end:i})}},d732:function(e,t,a){},d89f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"qr-code"},[a("el-image",{staticClass:"qr-code-img",attrs:{src:e.qrCode["QrCodeUrl"],fit:"cover"}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"100px"}})])]),e.qrCode.ModifyTime?a("el-row",{staticStyle:{},attrs:{type:"flex",justify:"center",align:"middle"},domProps:{textContent:e._s(e.$options.filters.timeFilter(e.qrCode["ModifyTime"]))}}):e._e()],1)},s=[],i=a("5530"),r=a("2f62"),o={name:"ToolsQrCode",data:function(){return{qrCode:this.$store.getters["nedb/qrCode"]}},computed:Object(i["a"])({},Object(r["b"])({currentWeChatId:"tools/currentWeChatId"})),mounted:function(){this.currentWeChatId&&this.$store.dispatch("nedb/SetQrCode",this.currentWeChatId)}},l=o,c=(a("55ff"),a("2877")),u=Object(c["a"])(l,n,s,!1,null,"5ed10acc",null);t["default"]=u.exports},eb1e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"money-statistics"},[a("el-row",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",align:"middle"}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择任务类型"},model:{value:e.taskType,callback:function(t){e.taskType=t},expression:"taskType"}},e._l(e.moneyTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{disabled:0===e.taskType,size:"small",type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.timePick,callback:function(t){e.timePick=t},expression:"timePick"}}),a("el-button",{staticStyle:{"background-color":"#ff9f00",color:"#ffffff",border:"solid #ff9f00 1px","margin-left":"10px"},attrs:{plain:"",size:"small"},on:{click:e.queryData}},[e._v(" 开始搜索 ")])],1),a("el-table",{attrs:{data:e.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"微信id",prop:"wechatid"}}),a("el-table-column",{attrs:{label:"微信号",prop:"wechatno"}}),a("el-table-column",{attrs:{label:"微信昵称",prop:"wechatnick"}}),a("el-table-column",{attrs:{label:"数量",prop:"count"}}),0!==e.taskType?a("el-table-column",{attrs:{label:"日期",prop:"day"}}):e._e()],1)],1)},s=[],i=a("5530"),r=a("2f62"),o=a("5a0c"),l=a.n(o),c=a("d58b"),u={name:"ToolsAutoTaskList",data:function(){return{taskType:0,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},timePick:"",tableData:[],moneyTypes:[{value:0,label:"实时用户数"},{value:1,label:"新增好友数"},{value:2,label:"每日单删数"}]}},computed:Object(i["a"])({},Object(r["b"])({currentUser:"currentUser"})),watch:{taskType:function(){this.tableData=[]}},mounted:function(){},methods:{queryData:function(){var e=this;if(""!==this.taskType)if(0===this.taskType)Object(c["d"])(this.currentUser.SupplierId,this.currentUser.UnionId,"").then((function(t){0===t.code&&(e.tableData=t.data)})).catch((function(t){e.$alert(t,"提示",{type:"error"})}));else{var t="",a="";if(this.timePick&&(t=l()(this.timePick[0]).format("YYYY-MM-DD"),a=l()(this.timePick[1]).format("YYYY-MM-DD")),!t||!a)return void this.$message.warning("请设置时间！");Object(c["b"])(this.currentUser.SupplierId,this.currentUser.UnionId,this.taskType,t,a).then((function(t){0===t.code&&(e.tableData=t.data)})).catch((function(t){e.$alert(t,"提示",{type:"error"})}))}}}},d=u,p=(a("2a28"),a("2877")),h=Object(p["a"])(d,n,s,!1,null,"439795e9",null);t["default"]=h.exports},efb7:function(e,t,a){e.exports=a.p+"static/img/tianjiatupian.png"},f025:function(e,t,a){"use strict";var n=a("3681"),s=a.n(n);s.a},f053:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auto-task scroll"},[e._l(e.buttons,(function(t,n){return a("el-row",{key:n,staticClass:"el-button-my"},[a("span",{domProps:{textContent:e._s(t.name)}}),a("el-switch",{staticClass:"rt-input",attrs:{"active-color":"#13ce66",disabled:""},nativeOn:{click:function(a){return e.changeStatus(t)}},model:{value:t.switchState,callback:function(a){e.$set(t,"switchState",a)},expression:"btn.switchState"}}),e.btnRemarks.includes(t.keyName)?a("i",{staticClass:"el-icon-setting",staticStyle:{"margin-left":"10px",cursor:"pointer"},on:{click:function(a){return e.showRemarksDialog(t)}}}):e._e()],1)})),a("el-dialog",{staticClass:"remarks-dialog",attrs:{title:e.dialogTitle,"close-on-click-modal":!1,"show-close":!0,"append-to-body":"",visible:e.remarksDialog},on:{"update:visible":function(t){e.remarksDialog=t}}},[a("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入内容"},model:{value:e.remarksContent,callback:function(t){e.remarksContent=t},expression:"remarksContent"}}),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{"margin-left":"10px",color:"#999999"},attrs:{size:"small"},on:{click:function(t){return e.updateRemarks(e.remarksBtn)}}},[e._v(" 提 交 ")])],1)],1)],2)},s=[],i=(a("4160"),a("a9e3"),a("159b"),a("5530")),r=a("2f62"),o=a("3496"),l={name:"ToolsAutoTask",data:function(){return{btnRemarks:[1001,1002,1004,1009,1010],autoHiContent:"",luckyMoneyContent:"",transferMoneyContent:"",addFriendRemark:"",chatGptRemarks:"",dialogTitle:"输入话术",buttons:[{keyName:1001,name:"智能抢红包",switchState:!1},{keyName:1002,name:"自动通过好友请求",switchState:!1},{keyName:1003,name:"自动通过群邀请",switchState:!1},{keyName:1004,name:"自动收转账",switchState:!1},{keyName:1005,name:"自动通过好友请求并用企业微信加对方",switchState:!1},{keyName:1006,name:"聊天关键词自动回复",switchState:!1},{keyName:1007,name:"群聊关键词自动回复",switchState:!1},{keyName:1008,name:"自动点赞",switchState:!1},{keyName:1009,name:"自动打招呼",switchState:!1},{keyName:1010,name:"ChatGpt自动回复",switchState:!1}],autoTaskConfig:{},remarksDialog:!1,remarksContent:"",remarksBtn:{}}},computed:Object(i["a"])({},Object(r["b"])({currentUser:"currentUser",currentWeChatId:"tools/currentWeChatId"})),watch:{currentWeChatId:function(e){this.autoTaskConfig={},e&&this.getAutoTaskDetailList()}},created:function(){this.currentWeChatId&&this.getAutoTaskDetailList()},mounted:function(){this.modifyState()},methods:{getAutoTaskDetailList:function(){var e=this;this.autoHiContent="",this.luckyMoneyContent="",this.transferMoneyContent="",this.addFriendRemark="",this.chatGptRemarks="",Object(o["f"])(this.currentUser.SupplierId,this.currentWeChatId).then((function(t){0===t.code&&(t.data.forEach((function(t){1009===t.auto_type?e.autoHiContent=t.remarks:1001===t.auto_type?e.luckyMoneyContent=t.remarks:1004===t.auto_type?e.transferMoneyContent=t.remarks:1002===t.auto_type?e.addFriendRemark=t.remarks:1010===t.auto_type&&(e.chatGptRemarks=t.remarks),e.autoTaskConfig[t.auto_type]=t.state})),e.modifyState())})).catch((function(t){e.$message.error(t.message),e.modifyState()}))},modifyState:function(){for(var e=0;e<this.buttons.length;e++){var t=this.autoTaskConfig[this.buttons[e].keyName];0===t?this.$set(this.buttons[e],"switchState",!0):this.$set(this.buttons[e],"switchState",!1)}},changeStatus:function(e,t){var a=this;if(this.currentWeChatId){var n="",s=e.switchState?1:0;"keep"===t&&(s=e.switchState?0:1),1001===e.keyName?n=this.luckyMoneyContent:1004===e.keyName?n=this.transferMoneyContent:1009===e.keyName?n=this.autoHiContent:1002===e.keyName?n=this.addFriendRemark:1010===e.keyName&&(n=this.chatGptRemarks),this.currentWeChatId?Object(o["g"])(this.currentUser.SupplierId,this.currentWeChatId,Number(e.keyName),s,n).then((function(e){0===e.code&&e.data&&(a.$message({type:"success",message:"修改成功!",duration:1e3}),a.getAutoTaskDetailList())})).catch((function(e){a.$message.error(e.message)})):this.$message({message:"请先选中微信",type:"warning"})}else this.$alert("请先选择微信！","提示")},showRemarksDialog:function(e){this.currentWeChatId?(this.remarksContent="",1001===e.keyName?(this.remarksContent=this.luckyMoneyContent,this.dialogTitle="输入话术"):1004===e.keyName?(this.remarksContent=this.transferMoneyContent,this.dialogTitle="输入话术"):1002===e.keyName?(this.remarksContent=this.addFriendRemark,this.dialogTitle="输入备注"):1009===e.keyName?(this.remarksContent=this.autoHiContent,this.dialogTitle="输入招呼语"):1010===e.keyName&&(this.remarksContent=this.chatGptRemarks,this.dialogTitle="输入话术"),this.remarksBtn=e,this.remarksDialog=!0):this.$alert("请先选择微信！","提示")},updateRemarks:function(e){1001===e.keyName?this.luckyMoneyContent=this.remarksContent:1004===e.keyName?this.transferMoneyContent=this.remarksContent:1002===e.keyName?this.addFriendRemark=this.remarksContent:1009===e.keyName?this.autoHiContent=this.remarksContent:1010===e.keyName&&(this.chatGptRemarks=this.remarksContent),this.changeStatus(e,"keep"),this.remarksDialog=!1}}},c=l,u=(a("2f9f"),a("2877")),d=Object(u["a"])(c,n,s,!1,null,"92353bd8",null);t["default"]=d.exports},f067:function(e,t,a){e.exports=a.p+"static/img/conversation-image-error.svg"},f0ef:function(e,t,a){}}]);